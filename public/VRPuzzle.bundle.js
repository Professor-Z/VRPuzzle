!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=h.p+""+e+"."+g+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=h.p+""+g+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(i){return e(i)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var i=JSON.parse(t.responseText)}catch(r){return void e(r)}e(null,i)}}}function i(e){function t(e,t){"ready"===P&&o("prepare"),O++,h.e(e,function(){function n(){O--,"prepare"===P&&(_[e]||l(e),0===O&&0===R&&u())}try{t.call(null,i)}finally{n()}})}var n=j[e];if(!n)return h;var i=function(t){return n.hot.active?j[t]?(j[t].parents.indexOf(e)<0&&j[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):x=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),x=[]),h(t)};for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&(p?Object.defineProperty(i,r,function(e){return{configurable:!0,enumerable:!0,get:function(){return h[e]},set:function(t){h[e]=t}}}(r)):i[r]=h[r]);return p?Object.defineProperty(i,"e",{enumerable:!0,value:t}):i.e=t,i}function r(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._acceptedDependencies[e[i]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:a,apply:d,status:function(e){return e?void H.push(e):P},addStatusHandler:function(e){H.push(e)},removeStatusHandler:function(e){var t=H.indexOf(e);t>=0&&H.splice(t,1)},data:E[e]};return t}function o(e){P=e;for(var t=0;t<H.length;t++)H[t].call(null,e)}function s(e){var t=+e+""===e;return t?+e:e}function a(e,t){if("idle"!==P)throw new Error("check() is only allowed in idle status");"function"==typeof e?(w=!1,t=e):(w=e,t=t||function(e){if(e)throw e}),o("check"),n(function(e,n){if(e)return t(e);if(!n)return o("idle"),void t(null,null);S={},T={},_={};for(var i=0;i<n.c.length;i++)T[n.c[i]]=!0;m=n.h,o("prepare"),b=t,y={};var r=0;l(r),"prepare"===P&&0===O&&0===R&&u()})}function c(e,t){if(T[e]&&S[e]){S[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0===--R&&0===O&&u()}}function l(e){T[e]?(S[e]=!0,R++,t(e)):_[e]=!0}function u(){o("ready");var e=b;if(b=null,e)if(w)d(w,e);else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(s(n));e(null,t)}}function d(t,n){function i(e){for(var t=[e],n={},i=t.slice();i.length>0;){var o=i.pop(),e=j[o];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var s=0;s<e.parents.length;s++){var a=e.parents[s],c=j[a];if(c.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+a);t.indexOf(a)>=0||(c.hot._acceptedDependencies[o]?(n[a]||(n[a]=[]),r(n[a],[o])):(delete n[a],t.push(a),i.push(a)))}}}return[t,n]}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}}if("ready"!==P)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var a={},c=[],l={};for(var u in y)if(Object.prototype.hasOwnProperty.call(y,u)){var d=s(u),f=i(d);if(!f){if(t.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+d+" is not accepted"))}if(f instanceof Error)return o("abort"),n(f);l[d]=y[d],r(c,f[0]);for(var d in f[1])Object.prototype.hasOwnProperty.call(f[1],d)&&(a[d]||(a[d]=[]),r(a[d],f[1][d]))}for(var p=[],v=0;v<c.length;v++){var d=c[v];j[d]&&j[d].hot._selfAccepted&&p.push({module:d,errorHandler:j[d].hot._selfAccepted})}o("dispose");for(var b=c.slice();b.length>0;){var d=b.pop(),w=j[d];if(w){for(var H={},R=w.hot._disposeHandlers,O=0;O<R.length;O++){var _=R[O];_(H)}E[d]=H,w.hot.active=!1,delete j[d];for(var O=0;O<w.children.length;O++){var S=j[w.children[O]];if(S){var T=S.parents.indexOf(d);T>=0&&S.parents.splice(T,1)}}}}for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d))for(var w=j[d],M=a[d],O=0;O<M.length;O++){var N=M[O],T=w.children.indexOf(N);T>=0&&w.children.splice(T,1)}o("apply"),g=m;for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(e[d]=l[d]);var k=null;for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){for(var w=j[d],M=a[d],z=[],v=0;v<M.length;v++){var N=M[v],_=w.hot._acceptedDependencies[N];z.indexOf(_)>=0||z.push(_)}for(var v=0;v<z.length;v++){var _=z[v];try{_(a)}catch(W){k||(k=W)}}}for(var v=0;v<p.length;v++){var D=p[v],d=D.module;x=[d];try{h(d)}catch(W){if("function"==typeof D.errorHandler)try{D.errorHandler(W)}catch(W){k||(k=W)}else k||(k=W)}}return k?(o("fail"),n(k)):(o("idle"),void n(null,c))}function h(t){if(j[t])return j[t].exports;var n=j[t]={exports:{},id:t,loaded:!1,hot:r(t),parents:x,children:[]};return e[t].call(n.exports,n,n.exports,i(t)),n.loaded=!0,n.exports}var f=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){c(e,t),f&&f(e,t)};var p=!1;try{Object.defineProperty({},"x",{get:function(){}}),p=!0}catch(v){}var b,y,m,w=!0,g="3e629927e060ab7eef84",E={},x=[],H=[],P="idle",R=0,O=0,_={},S={},T={},j={};return h.m=e,h.c=j,h.p="/public/",h.h=function(){return g},i(0)(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),o=i(r),s=new o["default"],a=function(){s.render()};a()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),a=i(s),c=function(){function e(){r(this,e),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.controls=new THREE.VRControls(this.camera),this.controls.userHeight=10,this.controls.standing=!0,this.effect=new THREE.VREffect(this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight);var t={hideButton:!1,isUndistorted:!1};this.manager=new WebVRManager(this.renderer,this.effect,t),this.raycaster=new THREE.Raycaster,this.mouse=new a["default"],this.onTextureLoaded=this.onTextureLoaded.bind(this),this.onResize=this.onResize.bind(this),this.render=this.render.bind(this),this.setupStage=this.setupStage.bind(this),this.setStageDimensions=this.setStageDimensions.bind(this),this.placePieces=this.placePieces.bind(this),this.meshList=[],this.logFlag=!0,this.boxSize=20,this.loader=new THREE.TextureLoader,this.loader.load("public/images/box.png",this.onTextureLoaded),window.addEventListener("resize",this.onResize,!0),window.addEventListener("vrdisplaypresentchange",this.onResize,!0),this.lastRender=0,this.display=null}return o(e,[{key:"onTextureLoaded",value:function(e){e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.set(this.boxSize,this.boxSize);var t=new THREE.BoxGeometry(this.boxSize,this.boxSize,this.boxSize),n=new THREE.MeshBasicMaterial({map:e,color:"rgba(255,255,255,1)",side:THREE.BackSide});this.skybox=new THREE.Mesh(t,n),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox),this.placePieces(),this.setupStage()}},{key:"placePieces",value:function(){this.columnNumber=4,this.pieceNumber=this.columnNumber*this.columnNumber,this.scaledWidth=16,this.scaledHeight=9,this.freePieceNumber=1*this.pieceNumber/2,this.freePieceList=[],this.planeWidth=this.scaledWidth/this.columnNumber,this.planeHeight=this.scaledHeight/this.columnNumber;var e=new Image;e.src=n(3);var t=document.createElement("canvas"),i=t.getContext("2d"),r=t.width/1.5/e.width,o=t.height/1.5/e.height;this.scale=Math.min(r,o),this.pieceWidth=e.width/this.columnNumber,this.pieceHeight=e.height/this.columnNumber;var s=this;e.onload=function(){for(var n,r,o,a=0,c=0;a<s.columnNumber;a++)for(var l=0;l<s.columnNumber;l++,c++){t=document.createElement("canvas"),i=t.getContext("2d"),n=new THREE.Texture(t),i.drawImage(e,a*s.pieceWidth,l*s.pieceHeight,s.pieceWidth,s.pieceHeight,0,0,t.width,t.height),n&&(n.needsUpdate=!0),r=new THREE.MeshBasicMaterial({map:n,side:THREE.DoubleSide}),r.transparent=!1,o=new THREE.Mesh(new THREE.PlaneGeometry(s.planeWidth,s.planeHeight),r),console.log(s.freePieceNumber+"/"+(s.columnNumber*s.columnNumber-c));var u=Math.random();if(console.log(u),console.log(u>s.freePieceNumber/(s.columnNumber*s.columnNumber-c)&&s.freePieceNumber>0),console.log(s.freePieceList.length),u<s.freePieceNumber/(s.columnNumber*s.columnNumber-c)&&s.freePieceNumber>0){var d=-s.boxSize/2+s.planeWidth/2+Math.random()*(s.boxSize-s.planeWidth),h=-s.boxSize/2+s.planeHeight/2+Math.random()*(s.boxSize-s.planeHeight);o.rotation.x=Math.PI/2,o.position.set(Math.round(d),.5,Math.round(h)),s.freePieceNumber--,s.freePieceList.push(o.id)}else o.position.set(a*s.planeWidth-s.scaledWidth/2+s.planeWidth/2,s.scaledHeight-s.planeHeight/2-l*s.planeHeight,-10);s.meshList.push(o),s.scene.add(o)}console.log(s.freePieceList);var f=!0,p=!1,v=void 0;try{for(var b,y=s.meshList[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var m=b.value;console.log(m.id)}}catch(w){p=!0,v=w}finally{try{!f&&y["return"]&&y["return"]()}finally{if(p)throw v}}}}},{key:"render",value:function(e){this.lastRender=e,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children);if(this.mouse.x=this.mouse.y=void 0,t.length>0){var n=!0,i=!1,r=void 0;try{for(var o,s=this.meshList[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.id in this.freePieceList&&a.id!=t[0].object.id?a.rotation.x=Math.PI/2:a.rotation.x=0}}catch(c){i=!0,r=c}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw r}}}this.controls.update(),this.manager.render(this.scene,this.camera,e),requestAnimationFrame(this.render)}},{key:"onResize",value:function(e){this.effect.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"setStageDimensions",value:function(e){var t=this.skybox.material;this.scene.remove(this.skybox);var n=new THREE.BoxGeometry(e.sizeX,this.boxSize,e.sizeZ);this.skybox=new THREE.Mesh(n,t),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox)}},{key:"setupStage",value:function(){var e=this;navigator.getVRDisplays().then(function(t){t.length>0&&(e.display=t[0],e.display.stageParameters&&e.setStageDimensions(e.display.stageParameters))})}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.x=void 0,r.y=void 0,window.addEventListener("click",r.onMouseClick.bind(r),!1),r}return r(t,e),o(t,[{key:"onMouseClick",value:function(e){this.x=e.clientX/window.innerWidth*2-1,this.y=2*-(e.clientY/window.innerHeight)+1}}]),t}(THREE.Vector2);t["default"]=s},function(e,t,n){e.exports=n.p+"images/puzzles/cartoon (1).jpg"}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vVlJQdXp6bGUuYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzZTYyOTkyN2UwNjBhYjdlZWY4NCIsIndlYnBhY2s6Ly8vLi9zcmMvamF2YXNjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL21vdXNlLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9pbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGciXSwibmFtZXMiOlsibW9kdWxlcyIsImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJjaHVua0lkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJzcmMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsImhvdEN1cnJlbnRIYXNoIiwiYXBwZW5kQ2hpbGQiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiY2FsbGJhY2siLCJYTUxIdHRwUmVxdWVzdCIsIkVycm9yIiwicmVxdWVzdCIsInJlcXVlc3RQYXRoIiwib3BlbiIsInRpbWVvdXQiLCJzZW5kIiwiZXJyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInVwZGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImUiLCJob3RDcmVhdGVSZXF1aXJlIiwibW9kdWxlSWQiLCJlbnN1cmUiLCJob3RTdGF0dXMiLCJob3RTZXRTdGF0dXMiLCJob3RDaHVua3NMb2FkaW5nIiwiZmluaXNoQ2h1bmtMb2FkaW5nIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwiaG90RW5zdXJlVXBkYXRlQ2h1bmsiLCJob3RXYWl0aW5nRmlsZXMiLCJob3RVcGRhdGVEb3dubG9hZGVkIiwiY2FsbCIsImZuIiwibWUiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJob3RDdXJyZW50UGFyZW50cyIsImNvbnNvbGUiLCJ3YXJuIiwibmFtZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FuRGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsImhvdENyZWF0ZU1vZHVsZSIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkRlY2xpbmVkIiwiX2Rpc3Bvc2VIYW5kbGVycyIsImFjY2VwdCIsImRlcCIsImkiLCJsZW5ndGgiLCJkZWNsaW5lIiwiZGlzcG9zZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJpZHgiLCJzcGxpY2UiLCJjaGVjayIsImhvdENoZWNrIiwiYXBwbHkiLCJob3RBcHBseSIsImwiLCJob3RTdGF0dXNIYW5kbGVycyIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwiZGF0YSIsImhvdEN1cnJlbnRNb2R1bGVEYXRhIiwibmV3U3RhdHVzIiwidG9Nb2R1bGVJZCIsImlkIiwiaXNOdW1iZXIiLCJob3RBcHBseU9uVXBkYXRlIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJob3RBdmFpbGlibGVGaWxlc01hcCIsImMiLCJob3RVcGRhdGVOZXdIYXNoIiwiaCIsImhvdENhbGxiYWNrIiwiaG90VXBkYXRlIiwiaG90QWRkVXBkYXRlQ2h1bmsiLCJtb3JlTW9kdWxlcyIsIm91dGRhdGVkTW9kdWxlcyIsIm9wdGlvbnMiLCJnZXRBZmZlY3RlZFN0dWZmIiwibW9kdWxlIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsInNsaWNlIiwicG9wIiwicGFyZW50SWQiLCJwYXJlbnQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJyZXN1bHQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzIiwiZXJyb3JIYW5kbGVyIiwiZGlzcG9zZUhhbmRsZXJzIiwiaiIsImNiIiwiY2hpbGQiLCJtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyIsImRlcGVuZGVuY3kiLCJlcnJvciIsImNhbGxiYWNrcyIsImV4cG9ydHMiLCJsb2FkZWQiLCJwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayIsInRoaXMiLCJ4IiwibSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nYW1lIiwiX2dhbWUyIiwiZ2FtZSIsImxvb3AiLCJyZW5kZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX21vdXNlIiwiX21vdXNlMiIsIkdhbWUiLCJyZW5kZXJlciIsIlRIUkVFIiwiV2ViR0xSZW5kZXJlciIsImFudGlhbGlhcyIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYm9keSIsImRvbUVsZW1lbnQiLCJzY2VuZSIsIlNjZW5lIiwiY2FtZXJhIiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJjb250cm9scyIsIlZSQ29udHJvbHMiLCJ1c2VySGVpZ2h0Iiwic3RhbmRpbmciLCJlZmZlY3QiLCJWUkVmZmVjdCIsInNldFNpemUiLCJwYXJhbXMiLCJoaWRlQnV0dG9uIiwiaXNVbmRpc3RvcnRlZCIsIm1hbmFnZXIiLCJXZWJWUk1hbmFnZXIiLCJyYXljYXN0ZXIiLCJSYXljYXN0ZXIiLCJtb3VzZSIsIm9uVGV4dHVyZUxvYWRlZCIsImJpbmQiLCJvblJlc2l6ZSIsInNldHVwU3RhZ2UiLCJzZXRTdGFnZURpbWVuc2lvbnMiLCJwbGFjZVBpZWNlcyIsIm1lc2hMaXN0IiwibG9nRmxhZyIsImJveFNpemUiLCJsb2FkZXIiLCJUZXh0dXJlTG9hZGVyIiwibG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJsYXN0UmVuZGVyIiwiZGlzcGxheSIsInRleHR1cmUiLCJ3cmFwUyIsIlJlcGVhdFdyYXBwaW5nIiwid3JhcFQiLCJyZXBlYXQiLCJnZW9tZXRyeSIsIkJveEdlb21ldHJ5IiwibWF0ZXJpYWwiLCJNZXNoQmFzaWNNYXRlcmlhbCIsIm1hcCIsImNvbG9yIiwic2lkZSIsIkJhY2tTaWRlIiwic2t5Ym94IiwiTWVzaCIsInBvc2l0aW9uIiwieSIsImFkZCIsImNvbHVtbk51bWJlciIsInBpZWNlTnVtYmVyIiwic2NhbGVkV2lkdGgiLCJzY2FsZWRIZWlnaHQiLCJmcmVlUGllY2VOdW1iZXIiLCJmcmVlUGllY2VMaXN0IiwicGxhbmVXaWR0aCIsInBsYW5lSGVpZ2h0IiwiaW1hZ2VPYmoiLCJJbWFnZSIsImNhbnZhcyIsImNvbnRleHQiLCJnZXRDb250ZXh0Iiwid3MiLCJ3aWR0aCIsImhzIiwiaGVpZ2h0Iiwic2NhbGUiLCJNYXRoIiwibWluIiwicGllY2VXaWR0aCIsInBpZWNlSGVpZ2h0Iiwic2VsZiIsIm9ubG9hZCIsIm1lc2giLCJpbmRleCIsIlRleHR1cmUiLCJkcmF3SW1hZ2UiLCJuZWVkc1VwZGF0ZSIsIkRvdWJsZVNpZGUiLCJ0cmFuc3BhcmVudCIsIlBsYW5lR2VvbWV0cnkiLCJsb2ciLCJyYW5kb20iLCJ6Iiwicm90YXRpb24iLCJQSSIsInJvdW5kIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJ0aW1lc3RhbXAiLCJzZXRGcm9tQ2FtZXJhIiwiaW50ZXJzZWN0cyIsImludGVyc2VjdE9iamVjdHMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJvYmplY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhc3BlY3QiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Iiwic3RhZ2UiLCJyZW1vdmUiLCJzaXplWCIsInNpemVaIiwibmF2aWdhdG9yIiwiZ2V0VlJEaXNwbGF5cyIsInRoZW4iLCJkaXNwbGF5cyIsInN0YWdlUGFyYW1ldGVycyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiTW91c2UiLCJfVEhSRUUkVmVjdG9yIiwiX3RoaXMiLCJnZXRQcm90b3R5cGVPZiIsIm9uTW91c2VDbGljayIsImV2ZW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJWZWN0b3IyIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ09uQixRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFDLFNBQUFDLHFCQUFBLFdBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsU0FDQUQsR0FBQUUsS0FBQSxrQkFDQUYsRUFBQUcsUUFBQSxRQUNBSCxFQUFBSSxJQUFBQyxFQUFBQyxFQUFBLEdBQUFWLEVBQUEsSUFBQVcsRUFBQSxpQkFDQVYsRUFBQVcsWUFBQVIsR0FHQSxRQUFBUyxHQUFBQyxHQUNBLHNCQUFBQyxnQkFDQSxNQUFBRCxHQUFBLEdBQUFFLE9BQUEsc0JBQ0EsS0FDQSxHQUFBQyxHQUFBLEdBQUFGLGdCQUNBRyxFQUFBVCxFQUFBQyxFQUFBLEdBQUFDLEVBQUEsa0JBQ0FNLEdBQUFFLEtBQUEsTUFBQUQsR0FBQSxHQUNBRCxFQUFBRyxRQUFBLElBQ0FILEVBQUFJLEtBQUEsTUFDSSxNQUFBQyxHQUNKLE1BQUFSLEdBQUFRLEdBRUFMLEVBQUFNLG1CQUFBLFdBQ0EsT0FBQU4sRUFBQU8sV0FDQSxPQUFBUCxFQUFBUSxPQUVBWCxFQUFBLEdBQUFFLE9BQUEsdUJBQUFFLEVBQUEsb0JBQ0ssVUFBQUQsRUFBQVEsT0FFTFgsUUFDSyxVQUFBRyxFQUFBUSxRQUFBLE1BQUFSLEVBQUFRLE9BRUxYLEVBQUEsR0FBQUUsT0FBQSx1QkFBQUUsRUFBQSxpQkFDSyxDQUVMLElBQ0EsR0FBQVEsR0FBQUMsS0FBQUMsTUFBQVgsRUFBQVksY0FDTSxNQUFBQyxHQUVOLFdBREFoQixHQUFBZ0IsR0FHQWhCLEVBQUEsS0FBQVksS0F1QkEsUUFBQUssR0FBQUMsR0FzQ0EsUUFBQUMsR0FBQWpDLEVBQUFjLEdBQ0EsVUFBQW9CLEdBQ0FDLEVBQUEsV0FDQUMsSUFDQTNCLEVBQUFxQixFQUFBOUIsRUFBQSxXQU9BLFFBQUFxQyxLQUNBRCxJQUNBLFlBQUFGLElBQ0FJLEVBQUF0QyxJQUNBdUMsRUFBQXZDLEdBRUEsSUFBQW9DLEdBQUEsSUFBQUksR0FDQUMsS0FiQSxJQUNBM0IsRUFBQTRCLEtBQUEsS0FBQUMsR0FDTSxRQUNOTixPQTdDQSxHQUFBTyxHQUFBQyxFQUFBYixFQUNBLEtBQUFZLEVBQUEsTUFBQW5DLEVBQ0EsSUFBQWtDLEdBQUEsU0FBQTFCLEdBWUEsTUFYQTJCLEdBQUFFLElBQUFDLE9BQ0FGLEVBQUE1QixJQUNBNEIsRUFBQTVCLEdBQUErQixRQUFBQyxRQUFBakIsR0FBQSxHQUNBYSxFQUFBNUIsR0FBQStCLFFBQUFFLEtBQUFsQixHQUNBWSxFQUFBTyxTQUFBRixRQUFBaEMsR0FBQSxHQUNBMkIsRUFBQU8sU0FBQUQsS0FBQWpDLElBQ01tQyxHQUFBcEIsSUFFTnFCLFFBQUFDLEtBQUEsNEJBQUFyQyxFQUFBLDBCQUFBZSxHQUNBb0IsTUFFQTNDLEVBQUFRLEdBRUEsUUFBQXNDLEtBQUE5QyxHQUNBK0MsT0FBQUMsVUFBQUMsZUFBQWhCLEtBQUFqQyxFQUFBOEMsS0FDQUksRUFDQUgsT0FBQUksZUFBQWpCLEVBQUFZLEVBQUEsU0FBQUEsR0FDQSxPQUNBTSxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQSxXQUNBLE1BQUF0RCxHQUFBOEMsSUFFQVMsSUFBQSxTQUFBQyxHQUNBeEQsRUFBQThDLEdBQUFVLEtBR09WLElBRVBaLEVBQUFZLEdBQUE5QyxFQUFBOEMsR0FxQ0EsT0FSQUksR0FDQUgsT0FBQUksZUFBQWpCLEVBQUEsS0FDQW1CLFlBQUEsRUFDQUcsTUFBQWhDLElBR0FVLEVBQUFiLEVBQUFHLEVBRUFVLEVBR0EsUUFBQXVCLEdBQUFsQyxHQUNBLEdBQUFjLElBRUFxQix5QkFDQUMseUJBQ0FDLGVBQUEsRUFDQUMsZUFBQSxFQUNBQyxvQkFHQXhCLFFBQUEsRUFDQXlCLE9BQUEsU0FBQUMsRUFBQTNELEdBQ0Esc0JBQUEyRCxHQUNBM0IsRUFBQXVCLGVBQUEsTUFDQSxzQkFBQUksR0FDQTNCLEVBQUF1QixjQUFBSSxNQUNBLG9CQUFBQSxHQUNBLE9BQUFDLEdBQUEsRUFBb0JBLEVBQUFELEVBQUFFLE9BQWdCRCxJQUNwQzVCLEVBQUFxQixzQkFBQU0sRUFBQUMsSUFBQTVELE1BRUFnQyxHQUFBcUIsc0JBQUFNLEdBQUEzRCxHQUVBOEQsUUFBQSxTQUFBSCxHQUNBLHNCQUFBQSxHQUNBM0IsRUFBQXdCLGVBQUEsTUFDQSxvQkFBQUcsR0FDQTNCLEVBQUFzQixzQkFBQUssSUFBQSxNQUVBLFFBQUFDLEdBQUEsRUFBb0JBLEVBQUFELEVBQUFFLE9BQWdCRCxJQUNwQzVCLEVBQUFzQixzQkFBQUssRUFBQUMsS0FBQSxHQUVBRyxRQUFBLFNBQUEvRCxHQUNBZ0MsRUFBQXlCLGlCQUFBckIsS0FBQXBDLElBRUFnRSxrQkFBQSxTQUFBaEUsR0FDQWdDLEVBQUF5QixpQkFBQXJCLEtBQUFwQyxJQUVBaUUscUJBQUEsU0FBQWpFLEdBQ0EsR0FBQWtFLEdBQUFsQyxFQUFBeUIsaUJBQUF0QixRQUFBbkMsRUFDQWtFLElBQUEsR0FBQWxDLEVBQUF5QixpQkFBQVUsT0FBQUQsRUFBQSxJQUlBRSxNQUFBQyxFQUNBQyxNQUFBQyxFQUNBNUQsT0FBQSxTQUFBNkQsR0FDQSxNQUFBQSxPQUNBQyxHQUFBckMsS0FBQW9DLEdBREFwRCxHQUdBc0QsaUJBQUEsU0FBQUYsR0FDQUMsRUFBQXJDLEtBQUFvQyxJQUVBRyxvQkFBQSxTQUFBSCxHQUNBLEdBQUFOLEdBQUFPLEVBQUF0QyxRQUFBcUMsRUFDQU4sSUFBQSxHQUFBTyxFQUFBTixPQUFBRCxFQUFBLElBSUFVLEtBQUFDLEVBQUEzRCxHQUVBLE9BQUFjLEdBTUEsUUFBQVgsR0FBQXlELEdBQ0ExRCxFQUFBMEQsQ0FDQSxRQUFBbEIsR0FBQSxFQUFpQkEsRUFBQWEsRUFBQVosT0FBOEJELElBQy9DYSxFQUFBYixHQUFBaEMsS0FBQSxLQUFBa0QsR0FjQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLElBQUFELEVBQUEsS0FBQUEsQ0FDQSxPQUFBQyxJQUFBRCxJQUdBLFFBQUFYLEdBQUFDLEVBQUF0RSxHQUNBLFlBQUFvQixFQUFBLFNBQUFsQixPQUFBLHlDQUNBLG1CQUFBb0UsSUFDQVksR0FBQSxFQUNBbEYsRUFBQXNFLElBRUFZLEVBQUFaLEVBQ0F0RSxLQUFBLFNBQUFRLEdBQ0EsR0FBQUEsRUFBQSxLQUFBQSxLQUdBYSxFQUFBLFNBQ0F0QixFQUFBLFNBQUFTLEVBQUFJLEdBQ0EsR0FBQUosRUFBQSxNQUFBUixHQUFBUSxFQUNBLEtBQUFJLEVBR0EsTUFGQVMsR0FBQSxZQUNBckIsR0FBQSxVQUlBbUYsTUFDQUMsS0FDQTVELElBQ0EsUUFBQW9DLEdBQUEsRUFBa0JBLEVBQUFoRCxFQUFBeUUsRUFBQXhCLE9BQXFCRCxJQUN2Q3dCLEVBQUF4RSxFQUFBeUUsRUFBQXpCLEtBQUEsQ0FDQTBCLEdBQUExRSxFQUFBMkUsRUFFQWxFLEVBQUEsV0FDQW1FLEVBQUF4RixFQUNBeUYsSUFDQSxJQUFBdkcsR0FBQSxDQUdBdUMsR0FBQXZDLEdBRUEsWUFBQWtDLEdBQUEsSUFBQUUsR0FBQSxJQUFBSSxHQUNBQyxNQUtBLFFBQUErRCxHQUFBeEcsRUFBQXlHLEdBQ0EsR0FBQVAsRUFBQWxHLElBQUFpRyxFQUFBakcsR0FBQSxDQUVBaUcsRUFBQWpHLElBQUEsQ0FDQSxRQUFBZ0MsS0FBQXlFLEdBQ0FqRCxPQUFBQyxVQUFBQyxlQUFBaEIsS0FBQStELEVBQUF6RSxLQUNBdUUsRUFBQXZFLEdBQUF5RSxFQUFBekUsR0FHQSxPQUFBUSxHQUFBLElBQUFKLEdBQ0FLLEtBSUEsUUFBQUYsR0FBQXZDLEdBQ0FrRyxFQUFBbEcsSUFHQWlHLEVBQUFqRyxJQUFBLEVBQ0F3QyxJQUNBekMsRUFBQUMsSUFKQXNDLEVBQUF0QyxJQUFBLEVBUUEsUUFBQXlDLEtBQ0FOLEVBQUEsUUFDQSxJQUFBckIsR0FBQXdGLENBRUEsSUFEQUEsRUFBQSxLQUNBeEYsRUFDQSxHQUFBa0YsRUFDQVgsRUFBQVcsRUFBQWxGLE9BQ0ksQ0FDSixHQUFBNEYsS0FDQSxRQUFBWixLQUFBUyxHQUNBL0MsT0FBQUMsVUFBQUMsZUFBQWhCLEtBQUE2RCxFQUFBVCxJQUNBWSxFQUFBeEQsS0FBQTJDLEVBQUFDLEdBR0FoRixHQUFBLEtBQUE0RixJQUlBLFFBQUFyQixHQUFBc0IsRUFBQTdGLEdBZ0JBLFFBQUE4RixHQUFBQyxHQUtBLElBSkEsR0FBQUgsSUFBQUcsR0FDQUMsS0FFQUMsRUFBQUwsRUFBQU0sUUFDQUQsRUFBQXBDLE9BQUEsSUFDQSxHQUFBM0MsR0FBQStFLEVBQUFFLE1BQ0FKLEVBQUFoRSxFQUFBYixFQUNBLElBQUE2RSxNQUFBL0QsSUFBQXVCLGNBQUEsQ0FFQSxHQUFBd0MsRUFBQS9ELElBQUF3QixjQUNBLFVBQUF0RCxPQUFBLG9DQUFBZ0IsRUFFQSxRQUFBQSxFQUNBLE1BRUEsUUFBQTBDLEdBQUEsRUFBbUJBLEVBQUFtQyxFQUFBN0QsUUFBQTJCLE9BQTJCRCxJQUFBLENBQzlDLEdBQUF3QyxHQUFBTCxFQUFBN0QsUUFBQTBCLEdBQ0F5QyxFQUFBdEUsRUFBQXFFLEVBQ0EsSUFBQUMsRUFBQXJFLElBQUFzQixzQkFBQXBDLEdBQ0EsVUFBQWhCLE9BQUEsMkNBQUFnQixFQUFBLE9BQUFrRixFQUVBUixHQUFBekQsUUFBQWlFLElBQUEsSUFDQUMsRUFBQXJFLElBQUFxQixzQkFBQW5DLElBQ0E4RSxFQUFBSSxLQUNBSixFQUFBSSxPQUNBRSxFQUFBTixFQUFBSSxJQUFBbEYsWUFHQThFLEdBQUFJLEdBQ0FSLEVBQUF4RCxLQUFBZ0UsR0FDQUgsRUFBQTdELEtBQUFnRSxPQUlBLE9BQUFSLEVBQUFJLEdBR0EsUUFBQU0sR0FBQUMsRUFBQUMsR0FDQSxPQUFBNUMsR0FBQSxFQUFrQkEsRUFBQTRDLEVBQUEzQyxPQUFjRCxJQUFBLENBQ2hDLEdBQUE2QyxHQUFBRCxFQUFBNUMsRUFDQTJDLEdBQUFwRSxRQUFBc0UsR0FBQSxHQUNBRixFQUFBbkUsS0FBQXFFLElBekRBLGFBQUFyRixFQUFBLFNBQUFsQixPQUFBLDBDQUNBLG1CQUFBMkYsSUFDQTdGLEVBQUE2RixFQUNBQSxNQUNJQSxHQUFBLGdCQUFBQSxHQUNKN0YsS0FBQSxTQUFBUSxHQUNBLEdBQUFBLEVBQUEsS0FBQUEsS0FHQXFGLEtBQ0E3RixLQUFBLFNBQUFRLEdBQ0EsR0FBQUEsRUFBQSxLQUFBQSxJQW9EQSxJQUFBd0YsTUFDQUosS0FDQWMsSUFDQSxRQUFBMUIsS0FBQVMsR0FDQSxHQUFBL0MsT0FBQUMsVUFBQUMsZUFBQWhCLEtBQUE2RCxFQUFBVCxHQUFBLENBQ0EsR0FBQTlELEdBQUE2RCxFQUFBQyxHQUNBMkIsRUFBQWIsRUFBQTVFLEVBQ0EsS0FBQXlGLEVBQUEsQ0FDQSxHQUFBZCxFQUFBZSxpQkFDQSxRQUVBLE9BREF2RixHQUFBLFNBQ0FyQixFQUFBLEdBQUFFLE9BQUEsbUJBQUFnQixFQUFBLHFCQUVBLEdBQUF5RixZQUFBekcsT0FFQSxNQURBbUIsR0FBQSxTQUNBckIsRUFBQTJHLEVBRUFELEdBQUF4RixHQUFBdUUsRUFBQXZFLEdBQ0FvRixFQUFBVixFQUFBZSxFQUFBLEdBQ0EsUUFBQXpGLEtBQUF5RixHQUFBLEdBQ0FqRSxPQUFBQyxVQUFBQyxlQUFBaEIsS0FBQStFLEVBQUEsR0FBQXpGLEtBQ0E4RSxFQUFBOUUsS0FDQThFLEVBQUE5RSxPQUNBb0YsRUFBQU4sRUFBQTlFLEdBQUF5RixFQUFBLEdBQUF6RixLQVFBLE9BREEyRixNQUNBakQsRUFBQSxFQUFpQkEsRUFBQWdDLEVBQUEvQixPQUE0QkQsSUFBQSxDQUM3QyxHQUFBMUMsR0FBQTBFLEVBQUFoQyxFQUNBN0IsR0FBQWIsSUFBQWEsRUFBQWIsR0FBQWMsSUFBQXVCLGVBQ0FzRCxFQUFBekUsTUFDQTJELE9BQUE3RSxFQUNBNEYsYUFBQS9FLEVBQUFiLEdBQUFjLElBQUF1QixnQkFLQWxDLEVBQUEsVUFFQSxLQURBLEdBQUE0RSxHQUFBTCxFQUFBTSxRQUNBRCxFQUFBcEMsT0FBQSxJQUNBLEdBQUEzQyxHQUFBK0UsRUFBQUUsTUFDQUosRUFBQWhFLEVBQUFiLEVBQ0EsSUFBQTZFLEVBQUEsQ0FNQSxPQUpBbkIsTUFHQW1DLEVBQUFoQixFQUFBL0QsSUFBQXlCLGlCQUNBdUQsRUFBQSxFQUFrQkEsRUFBQUQsRUFBQWxELE9BQTRCbUQsSUFBQSxDQUM5QyxHQUFBQyxHQUFBRixFQUFBQyxFQUNBQyxHQUFBckMsR0FFQUMsRUFBQTNELEdBQUEwRCxFQUdBbUIsRUFBQS9ELElBQUFDLFFBQUEsUUFHQUYsR0FBQWIsRUFHQSxRQUFBOEYsR0FBQSxFQUFrQkEsRUFBQWpCLEVBQUExRCxTQUFBd0IsT0FBNEJtRCxJQUFBLENBQzlDLEdBQUFFLEdBQUFuRixFQUFBZ0UsRUFBQTFELFNBQUEyRSxHQUNBLElBQUFFLEVBQUEsQ0FDQSxHQUFBaEQsR0FBQWdELEVBQUFoRixRQUFBQyxRQUFBakIsRUFDQWdELElBQUEsR0FDQWdELEVBQUFoRixRQUFBaUMsT0FBQUQsRUFBQSxNQU1BLE9BQUFoRCxLQUFBOEUsR0FDQSxHQUFBdEQsT0FBQUMsVUFBQUMsZUFBQWhCLEtBQUFvRSxFQUFBOUUsR0FHQSxPQUZBNkUsR0FBQWhFLEVBQUFiLEdBQ0FpRyxFQUFBbkIsRUFBQTlFLEdBQ0E4RixFQUFBLEVBQW1CQSxFQUFBRyxFQUFBdEQsT0FBdUNtRCxJQUFBLENBQzFELEdBQUFJLEdBQUFELEVBQUFILEdBQ0E5QyxFQUFBNkIsRUFBQTFELFNBQUFGLFFBQUFpRixFQUNBbEQsSUFBQSxHQUFBNkIsRUFBQTFELFNBQUE4QixPQUFBRCxFQUFBLEdBTUE3QyxFQUFBLFNBRUF4QixFQUFBeUYsQ0FHQSxRQUFBcEUsS0FBQXdGLEdBQ0FoRSxPQUFBQyxVQUFBQyxlQUFBaEIsS0FBQThFLEVBQUF4RixLQUNBbEMsRUFBQWtDLEdBQUF3RixFQUFBeEYsR0FLQSxJQUFBbUcsR0FBQSxJQUNBLFFBQUFuRyxLQUFBOEUsR0FDQSxHQUFBdEQsT0FBQUMsVUFBQUMsZUFBQWhCLEtBQUFvRSxFQUFBOUUsR0FBQSxDQUlBLE9BSEE2RSxHQUFBaEUsRUFBQWIsR0FDQWlHLEVBQUFuQixFQUFBOUUsR0FDQW9HLEtBQ0ExRCxFQUFBLEVBQW1CQSxFQUFBdUQsRUFBQXRELE9BQXVDRCxJQUFBLENBQzFELEdBQUF3RCxHQUFBRCxFQUFBdkQsR0FDQXFELEVBQUFsQixFQUFBL0QsSUFBQXFCLHNCQUFBK0QsRUFDQUUsR0FBQW5GLFFBQUE4RSxJQUFBLEdBQ0FLLEVBQUFsRixLQUFBNkUsR0FFQSxPQUFBckQsR0FBQSxFQUFtQkEsRUFBQTBELEVBQUF6RCxPQUFzQkQsSUFBQSxDQUN6QyxHQUFBcUQsR0FBQUssRUFBQTFELEVBQ0EsS0FDQXFELEVBQUFqQixHQUNPLE1BQUF4RixHQUNQNkcsSUFDQUEsRUFBQTdHLEtBT0EsT0FBQW9ELEdBQUEsRUFBaUJBLEVBQUFpRCxFQUFBaEQsT0FBd0NELElBQUEsQ0FDekQsR0FBQTZDLEdBQUFJLEVBQUFqRCxHQUNBMUMsRUFBQXVGLEVBQUFWLE1BQ0F6RCxJQUFBcEIsRUFDQSxLQUNBdkIsRUFBQXVCLEdBQ0ssTUFBQVYsR0FDTCxxQkFBQWlHLEdBQUFLLGFBQ0EsSUFDQUwsRUFBQUssYUFBQXRHLEdBQ08sTUFBQUEsR0FDUDZHLElBQ0FBLEVBQUE3RyxPQUVNNkcsS0FDTkEsRUFBQTdHLElBS0EsTUFBQTZHLElBQ0FoRyxFQUFBLFFBQ0FyQixFQUFBcUgsS0FHQWhHLEVBQUEsWUFDQXJCLEdBQUEsS0FBQTRGLElBT0EsUUFBQWpHLEdBQUF1QixHQUdBLEdBQUFhLEVBQUFiLEdBQ0EsTUFBQWEsR0FBQWIsR0FBQXFHLE9BR0EsSUFBQXhCLEdBQUFoRSxFQUFBYixJQUNBcUcsV0FDQXZDLEdBQUE5RCxFQUNBc0csUUFBQSxFQUNBeEYsSUFBQW9CLEVBQUFsQyxHQUNBZ0IsUUFBQUksRUFDQUQsWUFVQSxPQU5BckQsR0FBQWtDLEdBQUFVLEtBQUFtRSxFQUFBd0IsUUFBQXhCLElBQUF3QixRQUFBdEcsRUFBQUMsSUFHQTZFLEVBQUF5QixRQUFBLEVBR0F6QixFQUFBd0IsUUFoakJBLEdBQUFFLEdBQUFDLEtBQUEsZ0JBQ0FBLE1BQUEsaUJBQ0EsU0FBQXhJLEVBQUF5RyxHQUNBRCxFQUFBeEcsRUFBQXlHLEdBQ0E4QixLQUFBdkksRUFBQXlHLEdBbURBLElBQUE5QyxJQUFBLENBQ0EsS0FDQUgsT0FBQUksa0JBQTJCLEtBQzNCRyxJQUFBLGVBRUFKLEdBQUEsRUFDRyxNQUFBOEUsSUFJSCxHQTRKQW5DLEdBR0FDLEVBQUFILEVBL0pBSixHQUFBLEVBQ0FyRixFQUFBLHVCQUNBZ0YsS0FDQXZDLEtBMElBbUMsS0FDQXJELEVBQUEsT0FTQU0sRUFBQSxFQUNBSixFQUFBLEVBQ0FFLEtBQ0EyRCxLQUNBQyxLQTBUQXJELElBMkNBLE9BWkFwQyxHQUFBaUksRUFBQTVJLEVBR0FXLEVBQUEwRixFQUFBdEQsRUFHQXBDLEVBQUFDLEVBQUEsV0FHQUQsRUFBQTRGLEVBQUEsV0FBc0MsTUFBQTFGLElBR3RDb0IsRUFBQSxRRE1NLFNBQVM4RSxFQUFRd0IsRUFBUzVILEdBRS9CLFlBTUEsU0FBU2tJLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdFL2tCeEYsR0FBQUcsR0FBQXRJLEVBQUEsR0Y2a0JLdUksRUFBU0wsRUFBdUJJLEdFNWtCakNFLEVBQU8sR0FBQUQsY0FFTEUsRUFBTyxXQUNURCxFQUFLRSxTQUdURCxNRm9sQk0sU0FBU3JDLEVBQVF3QixFQUFTNUgsR0FFL0IsWUFZQSxTQUFTa0ksR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FFdkYsUUFBU1EsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FaaEgvRixPQUFPSSxlQUFleUUsRUFBUyxjQUMzQnBFLE9BQU8sR0FHWCxJQUFJdUYsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSWpGLEdBQUksRUFBR0EsRUFBSWlGLEVBQU1oRixPQUFRRCxJQUFLLENBQUUsR0FBSWtGLEdBQWFELEVBQU1qRixFQUFJa0YsR0FBVzlGLFdBQWE4RixFQUFXOUYsYUFBYyxFQUFPOEYsRUFBVy9GLGNBQWUsRUFBVSxTQUFXK0YsS0FBWUEsRUFBV0MsVUFBVyxHQUFNckcsT0FBT0ksZUFBZThGLEVBQVFFLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVU4sRUFBYVMsRUFBWUMsR0FBaUosTUFBOUhELElBQVlOLEVBQWlCSCxFQUFZN0YsVUFBV3NHLEdBQWlCQyxHQUFhUCxFQUFpQkgsRUFBYVUsR0FBcUJWLE1Hbm1CamlCVyxFQUFBeEosRUFBQSxHSHVtQkt5SixFQUFVdkIsRUFBdUJzQixHR3JtQmpCRSxFSDJtQlQsV0cxbUJSLFFBQUFBLEtBQWFmLEVBQUFaLEtBQUEyQixHQUNUM0IsS0FBSzRCLFNBQVcsR0FBSUMsT0FBTUMsZUFBZUMsV0FBVyxJQUNwRC9CLEtBQUs0QixTQUFTSSxjQUFjQyxPQUFPQyxrQkFHbkN4SyxTQUFTeUssS0FBSy9KLFlBQVk0SCxLQUFLNEIsU0FBU1EsWUFHeENwQyxLQUFLcUMsTUFBUSxHQUFJUixPQUFNUyxNQUd2QnRDLEtBQUt1QyxPQUFTLEdBQUlWLE9BQU1XLGtCQUFrQixHQUFJUCxPQUFPUSxXQUFhUixPQUFPUyxZQUFhLEdBQUssS0FHM0YxQyxLQUFLMkMsU0FBVyxHQUFJZCxPQUFNZSxXQUFXNUMsS0FBS3VDLFFBRzFDdkMsS0FBSzJDLFNBQVNFLFdBQWEsR0FDM0I3QyxLQUFLMkMsU0FBU0csVUFBVyxFQUN6QjlDLEtBQUsrQyxPQUFTLEdBQUlsQixPQUFNbUIsU0FBU2hELEtBQUs0QixVQUN0QzVCLEtBQUsrQyxPQUFPRSxRQUFRaEIsT0FBT1EsV0FBWVIsT0FBT1MsWUFJOUMsSUFBSVEsSUFDQUMsWUFBWSxFQUNaQyxlQUFlLEVBRW5CcEQsTUFBS3FELFFBQVUsR0FBSUMsY0FBYXRELEtBQUs0QixTQUFVNUIsS0FBSytDLE9BQVFHLEdBRzVEbEQsS0FBS3VELFVBQVksR0FBSTFCLE9BQU0yQixVQUMzQnhELEtBQUt5RCxNQUFRLEdBQUEvQixjQUViMUIsS0FBSzBELGdCQUFrQjFELEtBQUswRCxnQkFBZ0JDLEtBQUszRCxNQUNqREEsS0FBSzRELFNBQVc1RCxLQUFLNEQsU0FBU0QsS0FBSzNELE1BQ25DQSxLQUFLVyxPQUFTWCxLQUFLVyxPQUFPZ0QsS0FBSzNELE1BQy9CQSxLQUFLNkQsV0FBYTdELEtBQUs2RCxXQUFXRixLQUFLM0QsTUFDdkNBLEtBQUs4RCxtQkFBcUI5RCxLQUFLOEQsbUJBQW1CSCxLQUFLM0QsTUFDdkRBLEtBQUsrRCxZQUFjL0QsS0FBSytELFlBQVlKLEtBQUszRCxNQUV6Q0EsS0FBS2dFLFlBQ0xoRSxLQUFLaUUsU0FBVSxFQUVmakUsS0FBS2tFLFFBQVUsR0FDZmxFLEtBQUttRSxPQUFTLEdBQUl0QyxPQUFNdUMsY0FDeEJwRSxLQUFLbUUsT0FBT0UsS0FBSyx3QkFBeUJyRSxLQUFLMEQsaUJBQy9DekIsT0FBT3FDLGlCQUFpQixTQUFVdEUsS0FBSzRELFVBQVUsR0FDakQzQixPQUFPcUMsaUJBQWlCLHlCQUEwQnRFLEtBQUs0RCxVQUFVLEdBQ2pFNUQsS0FBS3VFLFdBQWEsRUFDbEJ2RSxLQUFLd0UsUUFBVSxLSDIxQmxCLE1BM09BeEQsR0FBYVcsSUFDVEwsSUFBSyxrQkFDTDdGLE1BQU8sU0dobkJJZ0osR0FDWkEsRUFBUUMsTUFBUTdDLE1BQU04QyxlQUN0QkYsRUFBUUcsTUFBUS9DLE1BQU04QyxlQUN0QkYsRUFBUUksT0FBT3JKLElBQUl3RSxLQUFLa0UsUUFBU2xFLEtBQUtrRSxRQUV0QyxJQUFJWSxHQUFXLEdBQUlqRCxPQUFNa0QsWUFBWS9FLEtBQUtrRSxRQUFTbEUsS0FBS2tFLFFBQVNsRSxLQUFLa0UsU0FDbEVjLEVBQVcsR0FBSW5ELE9BQU1vRCxtQkFDckJDLElBQUtULEVBQ0xVLE1BQU8sc0JBQ1BDLEtBQU12RCxNQUFNd0QsVUFJaEJyRixNQUFLc0YsT0FBUyxHQUFJekQsT0FBTTBELEtBQUtULEVBQVVFLEdBQ3ZDaEYsS0FBS3NGLE9BQU9FLFNBQVNDLEVBQUl6RixLQUFLa0UsUUFBUSxFQUN0Q2xFLEtBQUtxQyxNQUFNcUQsSUFBSTFGLEtBQUtzRixRQU9wQnRGLEtBQUsrRCxjQUtML0QsS0FBSzZELGdCSG1uQkp2QyxJQUFLLGNBQ0w3RixNQUFPLFdHaG5CUnVFLEtBQUsyRixhQUFlLEVBQ3BCM0YsS0FBSzRGLFlBQWM1RixLQUFLMkYsYUFBYTNGLEtBQUsyRixhQUMxQzNGLEtBQUs2RixZQUFjLEdBQ25CN0YsS0FBSzhGLGFBQWUsRUFDcEI5RixLQUFLK0YsZ0JBQW1DLEVBQWpCL0YsS0FBSzRGLFlBQWMsRUFDMUM1RixLQUFLZ0csaUJBQ0xoRyxLQUFLaUcsV0FBYWpHLEtBQUs2RixZQUFZN0YsS0FBSzJGLGFBQ3hDM0YsS0FBS2tHLFlBQWNsRyxLQUFLOEYsYUFBYTlGLEtBQUsyRixZQUUxQyxJQUFJUSxHQUFXLEdBQUlDLE1BQ25CRCxHQUFTbk8sSUFBTUMsRUFBUSxFQUN2QixJQUFJb08sR0FBUzNPLFNBQVNHLGNBQWMsVUFDaEN5TyxFQUFVRCxFQUFPRSxXQUFXLE1BQzVCQyxFQUFNSCxFQUFPSSxNQUFNLElBQUtOLEVBQVNNLE1BQ2pDQyxFQUFNTCxFQUFPTSxPQUFPLElBQUtSLEVBQVNRLE1BQ3RDM0csTUFBSzRHLE1BQVFDLEtBQUtDLElBQUlOLEVBQUdFLEdBQ3pCMUcsS0FBSytHLFdBQWFaLEVBQVNNLE1BQU16RyxLQUFLMkYsYUFDdEMzRixLQUFLZ0gsWUFBY2IsRUFBU1EsT0FBTzNHLEtBQUsyRixZQUV4QyxJQUFJc0IsR0FBT2pILElBQ1htRyxHQUFTZSxPQUFTLFdBQ2QsSUFBSSxHQUFrQnpDLEdBQVFPLEVBQVNtQyxFQUEvQmpMLEVBQUksRUFBRWtMLEVBQU0sRUFBd0JsTCxFQUFFK0ssRUFBS3RCLGFBQWF6SixJQUM1RCxJQUFJLEdBQUlvRCxHQUFJLEVBQUdBLEVBQUUySCxFQUFLdEIsYUFBY3JHLElBQUk4SCxJQUFRLENBRzVDZixFQUFTM08sU0FBU0csY0FBYyxVQUNoQ3lPLEVBQVVELEVBQU9FLFdBQVcsTUFDNUI5QixFQUFVLEdBQUk1QyxPQUFNd0YsUUFBUWhCLEdBSzVCQyxFQUFRZ0IsVUFBVW5CLEVBQVVqSyxFQUFFK0ssRUFBS0YsV0FBV3pILEVBQUUySCxFQUFLRCxZQUFZQyxFQUFLRixXQUFXRSxFQUFLRCxZQUFZLEVBQUUsRUFBRVgsRUFBT0ksTUFBTUosRUFBT00sUUFDckhsQyxJQUNEQSxFQUFROEMsYUFBYyxHQUUxQnZDLEVBQVcsR0FBSW5ELE9BQU1vRCxtQkFBb0JDLElBQUtULEVBQVNXLEtBQUt2RCxNQUFNMkYsYUFDbEV4QyxFQUFTeUMsYUFBYyxFQUV2Qk4sRUFBTyxHQUFJdEYsT0FBTTBELEtBQ2IsR0FBSTFELE9BQU02RixjQUFjVCxFQUFLaEIsV0FBWWdCLEVBQUtmLGFBQzlDbEIsR0FFSm5LLFFBQVE4TSxJQUFPVixFQUFLbEIsZ0JBQXBCLEtBQXdDa0IsRUFBS3RCLGFBQWFzQixFQUFLdEIsYUFBZXlCLEdBQzlFLElBQUlRLEdBQVNmLEtBQUtlLFFBSWxCLElBSEEvTSxRQUFROE0sSUFBSUMsR0FDWi9NLFFBQVE4TSxJQUFJQyxFQUFTWCxFQUFLbEIsaUJBQWlCa0IsRUFBS3RCLGFBQWFzQixFQUFLdEIsYUFBZXlCLElBQVFILEVBQUtsQixnQkFBZ0IsR0FDOUdsTCxRQUFROE0sSUFBSVYsRUFBS2pCLGNBQWM3SixRQUM1QnlMLEVBQVNYLEVBQUtsQixpQkFBaUJrQixFQUFLdEIsYUFBYXNCLEVBQUt0QixhQUFleUIsSUFBUUgsRUFBS2xCLGdCQUFnQixFQUFFLENBQ25HLEdBQUk5RixJQUFLZ0gsRUFBSy9DLFFBQVEsRUFBRStDLEVBQUtoQixXQUFXLEVBQUlZLEtBQUtlLFVBQVVYLEVBQUsvQyxRQUFVK0MsRUFBS2hCLFlBQzNFNEIsR0FBS1osRUFBSy9DLFFBQVEsRUFBRStDLEVBQUtmLFlBQVksRUFBSVcsS0FBS2UsVUFBVVgsRUFBSy9DLFFBQVUrQyxFQUFLZixZQUNoRmlCLEdBQUtXLFNBQVM3SCxFQUFJNEcsS0FBS2tCLEdBQUcsRUFDMUJaLEVBQUszQixTQUFTaEssSUFBSXFMLEtBQUttQixNQUFNL0gsR0FBRyxHQUFJNEcsS0FBS21CLE1BQU1ILElBQy9DWixFQUFLbEIsa0JBQ0xrQixFQUFLakIsY0FBY3RMLEtBQUt5TSxFQUFLN0osUUFFN0I2SixHQUFLM0IsU0FBU2hLLElBQUlVLEVBQUUrSyxFQUFLaEIsV0FBV2dCLEVBQUtwQixZQUFZLEVBQUVvQixFQUFLaEIsV0FBVyxFQUFHZ0IsRUFBS25CLGFBQWFtQixFQUFLZixZQUFZLEVBQUU1RyxFQUFFMkgsRUFBS2YsZ0JBRzFIZSxHQUFLakQsU0FBU3RKLEtBQUt5TSxHQUNuQkYsRUFBSzVFLE1BQU1xRCxJQUFLeUIsR0FJeEJ0TSxRQUFROE0sSUFBSVYsRUFBS2pCLGNBNUNPLElBQUFpQyxJQUFBLEVBQUFDLEdBQUEsRUFBQUMsRUFBQUMsTUFBQSxLQTZDeEIsT0FBQUMsR0FBQUMsRUFBZ0JyQixFQUFLakQsU0FBckJ1RSxPQUFBQyxjQUFBUCxHQUFBSSxFQUFBQyxFQUFBRyxRQUFBQyxNQUFBVCxHQUFBLEVBQThCLElBQXRCZCxHQUFzQmtCLEVBQUE1TSxLQUMxQlosU0FBUThNLElBQUlSLEVBQUs3SixLQTlDRyxNQUFBeEUsR0FBQW9QLEdBQUEsRUFBQUMsRUFBQXJQLEVBQUEsYUFBQW1QLEdBQUFLLDJCQUFBLFdBQUFKLEVBQUEsS0FBQUMsU0h1ckIzQjdHLElBQUssU0FDTDdGLE1BQU8sU0d0b0JMa04sR0FFSDNJLEtBQUt1RSxXQUFhb0UsRUFFbEIzSSxLQUFLdUQsVUFBVXFGLGNBQWM1SSxLQUFLeUQsTUFBTXpELEtBQUt1QyxPQUU3QyxJQUFJc0csR0FBYTdJLEtBQUt1RCxVQUFVdUYsaUJBQWtCOUksS0FBS3FDLE1BQU0xSCxTQVk3RCxJQU5BcUYsS0FBS3lELE1BQU14RCxFQUFJRCxLQUFLeUQsTUFBTWdDLEVBQUkyQyxPQU0zQlMsRUFBVzFNLE9BQU8sRUFBRSxJQUFBNE0sSUFBQSxFQUFBQyxHQUFBLEVBQUFDLEVBQUFiLE1BQUEsS0FDbkIsT0FBQWMsR0FBQUMsRUFBZ0JuSixLQUFLZ0UsU0FBckJ1RSxPQUFBQyxjQUFBTyxHQUFBRyxFQUFBQyxFQUFBVixRQUFBQyxNQUFBSyxHQUFBLEVBQThCLElBQXRCNUIsR0FBc0IrQixFQUFBek4sS0FDdEIwTCxHQUFLN0osS0FBTTBDLE1BQUtnRyxlQUFnQm1CLEVBQUs3SixJQUFJdUwsRUFBVyxHQUFHTyxPQUFPOUwsR0FFOUQ2SixFQUFLVyxTQUFTN0gsRUFBSTRHLEtBQUtrQixHQUFHLEVBRTFCWixFQUFLVyxTQUFTN0gsRUFBSSxHQU5QLE1BQUFuSCxHQUFBa1EsR0FBQSxFQUFBQyxFQUFBblEsRUFBQSxhQUFBaVEsR0FBQUksMkJBQUEsV0FBQUgsRUFBQSxLQUFBQyxLQWdCdkJqSixLQUFLMkMsU0FBU3pKLFNBVWQ4RyxLQUFLcUQsUUFBUTFDLE9BQU9YLEtBQUtxQyxNQUFPckMsS0FBS3VDLE9BQVFvRyxHQUc3Q1Usc0JBQXNCckosS0FBS1csV0g4cEIxQlcsSUFBSyxXQUNMN0YsTUFBTyxTRzdwQkhuQyxHQUNMMEcsS0FBSytDLE9BQU9FLFFBQVFoQixPQUFPUSxXQUFZUixPQUFPUyxhQUM5QzFDLEtBQUt1QyxPQUFPK0csT0FBU3JILE9BQU9RLFdBQWFSLE9BQU9TLFlBQ2hEMUMsS0FBS3VDLE9BQU9nSCw0QkhncUJYakksSUFBSyxxQkFDTDdGLE1BQU8sU0cvcEJPK04sR0FFZixHQUFJeEUsR0FBV2hGLEtBQUtzRixPQUFPTixRQUMzQmhGLE1BQUtxQyxNQUFNb0gsT0FBT3pKLEtBQUtzRixPQUd2QixJQUFJUixHQUFXLEdBQUlqRCxPQUFNa0QsWUFBWXlFLEVBQU1FLE1BQU8xSixLQUFLa0UsUUFBU3NGLEVBQU1HLE1BQ3RFM0osTUFBS3NGLE9BQVMsR0FBSXpELE9BQU0wRCxLQUFLVCxFQUFVRSxHQUd2Q2hGLEtBQUtzRixPQUFPRSxTQUFTQyxFQUFJekYsS0FBS2tFLFFBQVEsRUFDdENsRSxLQUFLcUMsTUFBTXFELElBQUkxRixLQUFLc0YsV0hxcUJuQmhFLElBQUssYUFDTDdGLE1BQU8sV0docUJSLEdBQU13TCxHQUFPakgsSUFDYjRKLFdBQVVDLGdCQUFnQkMsS0FBSyxTQUFTQyxHQUNoQ0EsRUFBUzVOLE9BQVMsSUFDbEI4SyxFQUFLekMsUUFBVXVGLEVBQVMsR0FDcEI5QyxFQUFLekMsUUFBUXdGLGlCQUNiL0MsRUFBS25ELG1CQUFtQm1ELEVBQUt6QyxRQUFRd0Ysd0JId3FCN0NySSxJQUdYOUIsY0dqNUJvQjhCLEdIcTVCZixTQUFTdEQsRUFBUXdCLEdBRXRCLFlBUUEsU0FBU2UsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tKLEdBQTJCaEQsRUFBTS9NLEdBQVEsSUFBSytNLEVBQVEsS0FBTSxJQUFJaUQsZ0JBQWUsNERBQWdFLFFBQU9oUSxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCK00sRUFBUC9NLEVBRWxPLFFBQVNpUSxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl0SixXQUFVLGlFQUFvRXNKLEdBQWVELEdBQVNuUCxVQUFZRCxPQUFPc1AsT0FBT0QsR0FBY0EsRUFBV3BQLFdBQWFzUCxhQUFlOU8sTUFBTzJPLEVBQVU5TyxZQUFZLEVBQU8rRixVQUFVLEVBQU1oRyxjQUFjLEtBQWVnUCxJQUFZclAsT0FBT3dQLGVBQWlCeFAsT0FBT3dQLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBVmplclAsT0FBT0ksZUFBZXlFLEVBQVMsY0FDM0JwRSxPQUFPLEdBR1gsSUFBSXVGLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlqRixHQUFJLEVBQUdBLEVBQUlpRixFQUFNaEYsT0FBUUQsSUFBSyxDQUFFLEdBQUlrRixHQUFhRCxFQUFNakYsRUFBSWtGLEdBQVc5RixXQUFhOEYsRUFBVzlGLGFBQWMsRUFBTzhGLEVBQVcvRixjQUFlLEVBQVUsU0FBVytGLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXJHLE9BQU9JLGVBQWU4RixFQUFRRSxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVOLEVBQWFTLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZTixFQUFpQkgsRUFBWTdGLFVBQVdzRyxHQUFpQkMsR0FBYVAsRUFBaUJILEVBQWFVLEdBQXFCVixNSS81QjVnQjRKLEVKdTZCUixTQUFVQyxHSXQ2Qm5CLFFBQUFELEdBQVl2SixHQUFNUCxFQUFBWixLQUFBMEssRUFBQSxJQUFBRSxHQUFBWCxFQUFBakssTUFBQTBLLEVBQUFELFdBQUF6UCxPQUFBNlAsZUFBQUgsSUFBQXhRLEtBQUE4RixLQUNSbUIsR0FEUSxPQUVkeUosR0FBSzNLLEVBQUltSSxPQUNUd0MsRUFBS25GLEVBQUkyQyxPQUNUbkcsT0FBT3FDLGlCQUFrQixRQUFTc0csRUFBS0UsYUFBYW5ILEtBQWxCaUgsSUFBOEIsR0FKbERBLEVKKzdCakIsTUF4QkFULEdBQVVPLEVBQU9DLEdBY2pCM0osRUFBYTBKLElBQ1RwSixJQUFLLGVBQ0w3RixNQUFPLFNJaDdCRXNQLEdBR1YvSyxLQUFLQyxFQUFNOEssRUFBTUMsUUFBVS9JLE9BQU9RLFdBQWUsRUFBSSxFQUNyRHpDLEtBQUt5RixFQUErQyxJQUF2Q3NGLEVBQU1FLFFBQVVoSixPQUFPUyxhQUFvQixNSm83QnBEZ0ksR0loOEJ1QjdJLE1BQU1xSixRSm04QnhDckwsY0luOEJvQjZLLEdKdThCZixTQUFTck0sRUFBUXdCLEVBQVM1SCxHS3Y4QmhDb0csRUFBQXdCLFFBQUE1SCxFQUFBQyxFQUFBIiwiZmlsZSI6IlZSUHV6emxlLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0dmFyIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrID0gdGhpc1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4vKioqKioqLyBcdHRoaXNbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gXHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gd2VicGFja0hvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuLyoqKioqKi8gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuLyoqKioqKi8gXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XHJcbi8qKioqKiovIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xyXG4vKioqKioqLyBcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KGNhbGxiYWNrKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIk5vIGJyb3dzZXIgc3VwcG9ydFwiKSk7XHJcbi8qKioqKiovIFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgcmVxdWVzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzb25cIjtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC5vcGVuKFwiR0VUXCIsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gMTAwMDA7XHJcbi8qKioqKiovIFx0XHRcdHJlcXVlc3Quc2VuZChudWxsKTtcclxuLyoqKioqKi8gXHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0cmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdGlmKHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gdGltZW91dFxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIikpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xyXG4vKioqKioqLyBcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcclxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFjaygpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgIT09IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyAhPT0gMzA0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gb3RoZXIgZmFpbHVyZVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdC8vIHN1Y2Nlc3NcclxuLyoqKioqKi8gXHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gY2F0Y2goZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2soZSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIHVwZGF0ZSk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqL1xuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHQvLyBDb3BpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iZWY0NWIwL3NyYy9zaGFyZWQvdXRpbHMvY2FuRGVmaW5lUHJvcGVydHkuanNcclxuLyoqKioqKi8gXHR2YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBmYWxzZTtcclxuLyoqKioqKi8gXHR0cnkge1xyXG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInhcIiwge1xyXG4vKioqKioqLyBcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge31cclxuLyoqKioqKi8gXHRcdH0pO1xyXG4vKioqKioqLyBcdFx0Y2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xyXG4vKioqKioqLyBcdH0gY2F0Y2goeCkge1xyXG4vKioqKioqLyBcdFx0Ly8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudEhhc2ggPSBcIjNlNjI5OTI3ZTA2MGFiN2VlZjg0XCI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRpZighbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xyXG4vKioqKioqLyBcdFx0dmFyIGZuID0gZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihtZS5ob3QuYWN0aXZlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA8IDApXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1lLmNoaWxkcmVuLnB1c2gocmVxdWVzdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBlbHNlIGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0XHRjb25zb2xlLndhcm4oXCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyByZXF1ZXN0ICsgXCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICsgbW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XHJcbi8qKioqKiovIFx0XHR9O1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgKGZ1bmN0aW9uKG5hbWUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fShuYW1lKSkpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmbltuYW1lXSA9IF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBlbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoaG90U3RhdHVzID09PSBcInJlYWR5XCIpXHJcbi8qKioqKiovIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xyXG4vKioqKioqLyBcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCwgZnVuY3Rpb24oKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobnVsbCwgZm4pO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZmluYWxseSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmaW5pc2hDaHVua0xvYWRpbmcoKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Q2h1bmtzTG9hZGluZy0tO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighaG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBcImVcIiwge1xyXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdFx0dmFsdWU6IGVuc3VyZVxyXG4vKioqKioqLyBcdFx0XHR9KTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdGZuLmUgPSBlbnN1cmU7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gZm47XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaG90ID0ge1xyXG4vKioqKioqLyBcdFx0XHQvLyBwcml2YXRlIHN0dWZmXHJcbi8qKioqKiovIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9zZWxmQWNjZXB0ZWQ6IGZhbHNlLFxyXG4vKioqKioqLyBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcclxuLyoqKioqKi8gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIE1vZHVsZSBBUElcclxuLyoqKioqKi8gXHRcdFx0YWN0aXZlOiB0cnVlLFxyXG4vKioqKioqLyBcdFx0XHRhY2NlcHQ6IGZ1bmN0aW9uKGRlcCwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJmdW5jdGlvblwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGRlY2xpbmU6IGZ1bmN0aW9uKGRlcCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm51bWJlclwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1tkZXBdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlXHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcclxuLyoqKioqKi8gXHRcdFx0Y2hlY2s6IGhvdENoZWNrLFxyXG4vKioqKioqLyBcdFx0XHRhcHBseTogaG90QXBwbHksXHJcbi8qKioqKiovIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFsKSByZXR1cm4gaG90U3RhdHVzO1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGhvdFN0YXR1c0hhbmRsZXJzLmluZGV4T2YobCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdFN0YXR1c0hhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvL2luaGVyaXQgZnJvbSBwcmV2aW91cyBkaXNwb3NlIGNhbGxcclxuLyoqKioqKi8gXHRcdFx0ZGF0YTogaG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdXHJcbi8qKioqKiovIFx0XHR9O1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGhvdDtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0dmFyIGhvdFN0YXR1c0hhbmRsZXJzID0gW107XHJcbi8qKioqKiovIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdFNldFN0YXR1cyhuZXdTdGF0dXMpIHtcclxuLyoqKioqKi8gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcclxuLyoqKioqKi8gXHRcdFx0aG90U3RhdHVzSGFuZGxlcnNbaV0uY2FsbChudWxsLCBuZXdTdGF0dXMpO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHQvLyB3aGlsZSBkb3dubG9hZGluZ1xyXG4vKioqKioqLyBcdHZhciBob3RXYWl0aW5nRmlsZXMgPSAwO1xyXG4vKioqKioqLyBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcclxuLyoqKioqKi8gXHR2YXIgaG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdENhbGxiYWNrO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIFRoZSB1cGRhdGUgaW5mb1xyXG4vKioqKioqLyBcdHZhciBob3RVcGRhdGUsIGhvdFVwZGF0ZU5ld0hhc2g7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xyXG4vKioqKioqLyBcdFx0dmFyIGlzTnVtYmVyID0gKCtpZCkgKyBcIlwiID09PSBpZDtcclxuLyoqKioqKi8gXHRcdHJldHVybiBpc051bWJlciA/ICtpZCA6IGlkO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RDaGVjayhhcHBseSwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIGFwcGx5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuLyoqKioqKi8gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IGFwcGx5O1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4vKioqKioqLyBcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiY2hlY2tcIik7XHJcbi8qKioqKiovIFx0XHRob3REb3dubG9hZE1hbmlmZXN0KGZ1bmN0aW9uKGVyciwgdXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbi8qKioqKiovIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIG51bGwpO1xyXG4vKioqKioqLyBcdFx0XHRcdHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRob3RBdmFpbGlibGVGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHVwZGF0ZS5jLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwW3VwZGF0ZS5jW2ldXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHRcdHZhciBjaHVua0lkID0gMDtcclxuLyoqKioqKi8gXHRcdFx0eyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmUtYmxvY2tzXHJcbi8qKioqKiovIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cclxuLyoqKioqKi8gXHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9KTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdIHx8ICFob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSlcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRpZigtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xyXG4vKioqKioqLyBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xyXG4vKioqKioqLyBcdFx0XHRob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XHJcbi8qKioqKiovIFx0XHR2YXIgY2FsbGJhY2sgPSBob3RDYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdGhvdENhbGxiYWNrID0gbnVsbDtcclxuLyoqKioqKi8gXHRcdGlmKCFjYWxsYmFjaykgcmV0dXJuO1xyXG4vKioqKioqLyBcdFx0aWYoaG90QXBwbHlPblVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseShob3RBcHBseU9uVXBkYXRlLCBjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaCh0b01vZHVsZUlkKGlkKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMsIGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRpZihob3RTdGF0dXMgIT09IFwicmVhZHlcIikgdGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IG9wdGlvbnM7XHJcbi8qKioqKiovIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSBpZihvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRvcHRpb25zID0ge307XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZSkge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW21vZHVsZV07XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuLyoqKioqKi8gXHRcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZighbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZS5ob3QuX3NlbGZEZWNsaW5lZCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICsgbW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRpZihtb2R1bGVJZCA9PT0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudCA9IGluc3RhbGxlZE1vZHVsZXNbcGFyZW50SWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgKyBtb2R1bGVJZCArIFwiIGluIFwiICsgcGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHF1ZXVlLnB1c2gocGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gW291dGRhdGVkTW9kdWxlcywgb3V0ZGF0ZWREZXBlbmRlbmNpZXNdO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBpdGVtID0gYltpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihhLmluZGV4T2YoaXRlbSkgPCAwKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0YS5wdXNoKGl0ZW0pO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxyXG4vKioqKioqLyBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbi8qKioqKiovIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFyZXN1bHQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKG9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhyZXN1bHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHRbMF0pO1xyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gcmVzdWx0WzFdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0WzFdLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHRbMV1bbW9kdWxlSWRdKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cclxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBvdXRkYXRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSAmJiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZXJyb3JIYW5kbGVyOiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZFxyXG4vKioqKioqLyBcdFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xyXG4vKioqKioqLyBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XHJcbi8qKioqKiovIFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdGlmKCFtb2R1bGUpIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHR2YXIgZGF0YSA9IHt9O1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcclxuLyoqKioqKi8gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRpc3Bvc2VIYW5kbGVycy5sZW5ndGg7IGorKykge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcclxuLyoqKioqKi8gXHRcdFx0XHRjYihkYXRhKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxyXG4vKioqKioqLyBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcclxuLyoqKioqKi8gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFjaGlsZCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNoaWxkLnBhcmVudHMuc3BsaWNlKGlkeCwgMSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIE5vdCBpbiBcImFwcGx5XCIgcGhhc2VcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0aG90Q3VycmVudEhhc2ggPSBob3RVcGRhdGVOZXdIYXNoO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIGFwcGxpZWRVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXHJcbi8qKioqKiovIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goY2IpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgY2IgPSBjYWxsYmFja3NbaV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjYihvdXRkYXRlZERlcGVuZGVuY2llcyk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9IGNhdGNoKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XHJcbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZih0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaWYoIWVycm9yKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXHJcbi8qKioqKiovIFx0XHRpZihlcnJvcikge1xyXG4vKioqKioqLyBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuLyoqKioqKi8gXHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuLyoqKioqKi8gXHRcdFx0cGFyZW50czogaG90Q3VycmVudFBhcmVudHMsXG4vKioqKioqLyBcdFx0XHRjaGlsZHJlbjogW11cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL3B1YmxpYy9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19oYXNoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKSgwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9nYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfZ2FtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nYW1lKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgZ2FtZSA9IG5ldyBfZ2FtZTIuZGVmYXVsdCgpO1xuXHRcblx0dmFyIGxvb3AgPSBmdW5jdGlvbiBsb29wKCkge1xuXHQgICAgZ2FtZS5yZW5kZXIoKTtcblx0ICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxuXHR9O1xuXHRsb29wKCk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9tb3VzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX21vdXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vdXNlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBHYW1lKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHYW1lKTtcblx0XG5cdCAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pO1xuXHQgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cdFxuXHQgICAgICAgIC8vIEFwcGVuZCB0aGUgY2FudmFzIGVsZW1lbnQgY3JlYXRlZCBieSB0aGUgcmVuZGVyZXIgdG8gZG9jdW1lbnQgYm9keSBlbGVtZW50LlxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcblx0XG5cdCAgICAgICAgLy8gQ3JlYXRlIGEgdGhyZWUuanMgc2NlbmUuXG5cdCAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHRcblx0ICAgICAgICAvLyBDcmVhdGUgYSB0aHJlZS5qcyBjYW1lcmEuXG5cdCAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDAwKTtcblx0XG5cdCAgICAgICAgLy8gQXBwbHkgVlIgaGVhZHNldCBwb3NpdGlvbmFsIGRhdGEgdG8gY2FtZXJhLlxuXHQgICAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgVEhSRUUuVlJDb250cm9scyh0aGlzLmNhbWVyYSk7XG5cdCAgICAgICAgLy8gdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDVcblx0ICAgICAgICAvL+ermeeri+Wnv+aAgVxuXHQgICAgICAgIHRoaXMuY29udHJvbHMudXNlckhlaWdodCA9IDEwO1xuXHQgICAgICAgIHRoaXMuY29udHJvbHMuc3RhbmRpbmcgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFRIUkVFLlZSRWZmZWN0KHRoaXMucmVuZGVyZXIpO1xuXHQgICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdFxuXHQgICAgICAgIC8vIENyZWF0ZSBhIFZSIG1hbmFnZXIgaGVscGVyIHRvIGVudGVyIGFuZCBleGl0IFZSIG1vZGUuXG5cdCAgICAgICAgLy/mjInpkq7lkozlhajlsY/mqKHlvI/nrqHnkIZcblx0ICAgICAgICB2YXIgcGFyYW1zID0ge1xuXHQgICAgICAgICAgICBoaWRlQnV0dG9uOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXG5cdCAgICAgICAgICAgIGlzVW5kaXN0b3J0ZWQ6IGZhbHNlIC8vIERlZmF1bHQ6IGZhbHNlLlxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFdlYlZSTWFuYWdlcih0aGlzLnJlbmRlcmVyLCB0aGlzLmVmZmVjdCwgcGFyYW1zKTtcblx0XG5cdCAgICAgICAgLy8gcmF5Y2FzdGVyXG5cdCAgICAgICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG5cdCAgICAgICAgdGhpcy5tb3VzZSA9IG5ldyBfbW91c2UyLmRlZmF1bHQoKTtcblx0ICAgICAgICAvL2JpbmQgdGhpc1xuXHQgICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkID0gdGhpcy5vblRleHR1cmVMb2FkZWQuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNldHVwU3RhZ2UgPSB0aGlzLnNldHVwU3RhZ2UuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNldFN0YWdlRGltZW5zaW9ucyA9IHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zLmJpbmQodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wbGFjZVBpZWNlcyA9IHRoaXMucGxhY2VQaWVjZXMuYmluZCh0aGlzKTtcblx0ICAgICAgICAvL1xuXHQgICAgICAgIHRoaXMubWVzaExpc3QgPSBbXTtcblx0ICAgICAgICB0aGlzLmxvZ0ZsYWcgPSB0cnVlO1xuXHQgICAgICAgIC8vIEFkZCBhIHJlcGVhdGluZyBncmlkIGFzIGEgc2t5Ym94LlxuXHQgICAgICAgIHRoaXMuYm94U2l6ZSA9IDIwO1xuXHQgICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcblx0ICAgICAgICB0aGlzLmxvYWRlci5sb2FkKFwicHVibGljL2ltYWdlcy9ib3gucG5nXCIsIHRoaXMub25UZXh0dXJlTG9hZGVkKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplLCB0cnVlKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInZyZGlzcGxheXByZXNlbnRjaGFuZ2VcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSk7XG5cdCAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gMDtcblx0ICAgICAgICB0aGlzLmRpc3BsYXkgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhHYW1lLCBbe1xuXHQgICAgICAgIGtleTogXCJvblRleHR1cmVMb2FkZWRcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25UZXh0dXJlTG9hZGVkKHRleHR1cmUpIHtcblx0ICAgICAgICAgICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuXHQgICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cdCAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnNldCh0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5ib3hTaXplLCB0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSk7XG5cdCAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG5cdCAgICAgICAgICAgICAgICBtYXA6IHRleHR1cmUsXG5cdCAgICAgICAgICAgICAgICBjb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDEpXCIsXG5cdCAgICAgICAgICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIC8vIEFsaWduIHRoZSBza3lib3ggdG8gdGhlIGZsb29yICh3aGljaCBpcyBhdCB5PTApLlxuXHQgICAgICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdCAgICAgICAgICAgIHRoaXMuc2t5Ym94LnBvc2l0aW9uLnkgPSB0aGlzLmJveFNpemUgLyAyO1xuXHQgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveCk7XG5cdFxuXHQgICAgICAgICAgICAvLyAgIHZhciBwYW5lbEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMiwgMSlcblx0ICAgICAgICAgICAgLy8gICB2YXIgcGFuZWwgPSBuZXcgVEhSRUUuTWVzaChwYW5lbEdlb21ldHJ5LG1hdGVyaWFsKVxuXHQgICAgICAgICAgICAvLyAgIHBhbmVsLnBvc2l0aW9uLnNldCgwLDIuNSwtMS45OTkpXG5cdCAgICAgICAgICAgIC8vIC8vIEFkZCBjdWJlIG1lc2ggdG8geW91ciB0aHJlZS5qcyBzY2VuZVxuXHQgICAgICAgICAgICAvLyAgIHRoaXMuc2NlbmUuYWRkKHBhbmVsKVxuXHQgICAgICAgICAgICB0aGlzLnBsYWNlUGllY2VzKCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBGb3IgaGlnaCBlbmQgVlIgZGV2aWNlcyBsaWtlIFZpdmUgYW5kIE9jdWx1cywgdGFrZSBpbnRvIGFjY291bnQgdGhlIHN0YWdlXG5cdCAgICAgICAgICAgIC8vIHBhcmFtZXRlcnMgcHJvdmlkZWQuXG5cdCAgICAgICAgICAgIC8v5Zyo6auY56uv55qE6K6+5aSH5LiK77yM6KaB6ICD6JmR5Yiw6K6+5aSH5o+Q5L6b55qE5Zy65pmv5L+h5oGv55qE5pu05paw44CCXG5cdCAgICAgICAgICAgIHRoaXMuc2V0dXBTdGFnZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwicGxhY2VQaWVjZXNcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VQaWVjZXMoKSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLmNvbHVtbk51bWJlciA9IDQ7XG5cdCAgICAgICAgICAgIHRoaXMucGllY2VOdW1iZXIgPSB0aGlzLmNvbHVtbk51bWJlciAqIHRoaXMuY29sdW1uTnVtYmVyO1xuXHQgICAgICAgICAgICB0aGlzLnNjYWxlZFdpZHRoID0gMTY7XG5cdCAgICAgICAgICAgIHRoaXMuc2NhbGVkSGVpZ2h0ID0gOTtcblx0ICAgICAgICAgICAgdGhpcy5mcmVlUGllY2VOdW1iZXIgPSB0aGlzLnBpZWNlTnVtYmVyICogMSAvIDI7XG5cdCAgICAgICAgICAgIHRoaXMuZnJlZVBpZWNlTGlzdCA9IFtdO1xuXHQgICAgICAgICAgICB0aGlzLnBsYW5lV2lkdGggPSB0aGlzLnNjYWxlZFdpZHRoIC8gdGhpcy5jb2x1bW5OdW1iZXI7XG5cdCAgICAgICAgICAgIHRoaXMucGxhbmVIZWlnaHQgPSB0aGlzLnNjYWxlZEhlaWdodCAvIHRoaXMuY29sdW1uTnVtYmVyO1xuXHQgICAgICAgICAgICAvLyBsb2FkIGFuIGltYWdlXG5cdCAgICAgICAgICAgIHZhciBpbWFnZU9iaiA9IG5ldyBJbWFnZSgpO1xuXHQgICAgICAgICAgICBpbWFnZU9iai5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0ICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHQgICAgICAgICAgICB2YXIgd3MgPSBjYW52YXMud2lkdGggLyAxLjUgLyBpbWFnZU9iai53aWR0aDtcblx0ICAgICAgICAgICAgdmFyIGhzID0gY2FudmFzLmhlaWdodCAvIDEuNSAvIGltYWdlT2JqLmhlaWdodDtcblx0ICAgICAgICAgICAgdGhpcy5zY2FsZSA9IE1hdGgubWluKHdzLCBocyk7XG5cdCAgICAgICAgICAgIHRoaXMucGllY2VXaWR0aCA9IGltYWdlT2JqLndpZHRoIC8gdGhpcy5jb2x1bW5OdW1iZXI7XG5cdCAgICAgICAgICAgIHRoaXMucGllY2VIZWlnaHQgPSBpbWFnZU9iai5oZWlnaHQgLyB0aGlzLmNvbHVtbk51bWJlcjtcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5waWVjZVdpZHRoLHRoaXMucGllY2VIZWlnaHQpXG5cdCAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgaW1hZ2VPYmoub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGluZGV4ID0gMCwgdGV4dHVyZSwgbWF0ZXJpYWwsIG1lc2g7IGkgPCBzZWxmLmNvbHVtbk51bWJlcjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxmLmNvbHVtbk51bWJlcjsgaisrLCBpbmRleCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRleHQuY2xlYXJSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FudmFzIGNvbnRlbnRzIHdpbGwgYmUgdXNlZCBmb3IgYSB0ZXh0dXJlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGlzIGxvYWRlZCwgdGhpcyBmdW5jdGlvbiBleGVjdXRlc1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbWcuc3JjKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250ZXh0LnNjYWxlKHNlbGYuc2NhbGUsc2VsZi5zY2FsZSlcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VPYmosIGkgKiBzZWxmLnBpZWNlV2lkdGgsIGogKiBzZWxmLnBpZWNlSGVpZ2h0LCBzZWxmLnBpZWNlV2lkdGgsIHNlbGYucGllY2VIZWlnaHQsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlKSAvLyBjaGVja3MgaWYgdGV4dHVyZSBleGlzdHNcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBtYXA6IHRleHR1cmUsIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoc2VsZi5wbGFuZVdpZHRoLCBzZWxmLnBsYW5lSGVpZ2h0KSwgbWF0ZXJpYWwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmZyZWVQaWVjZU51bWJlciArIFwiL1wiICsgKHNlbGYuY29sdW1uTnVtYmVyICogc2VsZi5jb2x1bW5OdW1iZXIgLSBpbmRleCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZG9tID0gTWF0aC5yYW5kb20oKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmFuZG9tKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmFuZG9tID4gc2VsZi5mcmVlUGllY2VOdW1iZXIgLyAoc2VsZi5jb2x1bW5OdW1iZXIgKiBzZWxmLmNvbHVtbk51bWJlciAtIGluZGV4KSAmJiBzZWxmLmZyZWVQaWVjZU51bWJlciA+IDApO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmZyZWVQaWVjZUxpc3QubGVuZ3RoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmRvbSA8IHNlbGYuZnJlZVBpZWNlTnVtYmVyIC8gKHNlbGYuY29sdW1uTnVtYmVyICogc2VsZi5jb2x1bW5OdW1iZXIgLSBpbmRleCkgJiYgc2VsZi5mcmVlUGllY2VOdW1iZXIgPiAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IC1zZWxmLmJveFNpemUgLyAyICsgc2VsZi5wbGFuZVdpZHRoIC8gMiArIE1hdGgucmFuZG9tKCkgKiAoc2VsZi5ib3hTaXplIC0gc2VsZi5wbGFuZVdpZHRoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gLXNlbGYuYm94U2l6ZSAvIDIgKyBzZWxmLnBsYW5lSGVpZ2h0IC8gMiArIE1hdGgucmFuZG9tKCkgKiAoc2VsZi5ib3hTaXplIC0gc2VsZi5wbGFuZUhlaWdodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnJvdGF0aW9uLnggPSBNYXRoLlBJIC8gMjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2gucG9zaXRpb24uc2V0KE1hdGgucm91bmQoeCksIDAuNSwgTWF0aC5yb3VuZCh6KSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZyZWVQaWVjZU51bWJlci0tO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcmVlUGllY2VMaXN0LnB1c2gobWVzaC5pZCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldChpICogc2VsZi5wbGFuZVdpZHRoIC0gc2VsZi5zY2FsZWRXaWR0aCAvIDIgKyBzZWxmLnBsYW5lV2lkdGggLyAyLCBzZWxmLnNjYWxlZEhlaWdodCAtIHNlbGYucGxhbmVIZWlnaHQgLyAyIC0gaiAqIHNlbGYucGxhbmVIZWlnaHQsIC0xMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVzaC5wb3NpdGlvbi5zZXQoMCwgMiwtOSlcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tZXNoTGlzdC5wdXNoKG1lc2gpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNjZW5lLmFkZChtZXNoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHRoaXMuc2NlbmUpXG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5mcmVlUGllY2VMaXN0KTtcblx0ICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gc2VsZi5tZXNoTGlzdFtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9tZXNoID0gX3N0ZXAudmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfbWVzaC5pZCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XG5cdCAgICAgICAgICAgIC8vIHZhciBkZWx0YSA9IE1hdGgubWluKHRpbWVzdGFtcCAtIHRoaXMubGFzdFJlbmRlciwgNTAwKVxuXHQgICAgICAgICAgICB0aGlzLmxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XG5cdCAgICAgICAgICAgIC8v5aSE55CG6byg5qCH54K55Ye7XG5cdCAgICAgICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSwgdGhpcy5jYW1lcmEpO1xuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1vdXNlLngsdGhpcy5tb3VzZS55KVxuXHQgICAgICAgICAgICB2YXIgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHModGhpcy5zY2VuZS5jaGlsZHJlbik7XG5cdCAgICAgICAgICAgIC8vIGZvciAoIHZhciBpID0gMDsgaSA8IGludGVyc2VjdHMubGVuZ3RoOyBpKysgKSB7XG5cdCAgICAgICAgICAgIC8vICAgICAvLyBpZihpbnRlcnNlY3RzWyBpIF0ub2JqZWN0LmlkIGluIHRoaXMubWVzaExpc3QpXG5cdCAgICAgICAgICAgIC8vICAgICAvLyBpbnRlcnNlY3RzWyBpIF0ub2JqZWN0Lm1hdGVyaWFsLmNvbG9yLnNldCggMHhmZjAwMDAgKVxuXHQgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0c1tpXSlcblx0ICAgICAgICAgICAgLy8gfVxuXHQgICAgICAgICAgICB0aGlzLm1vdXNlLnggPSB0aGlzLm1vdXNlLnkgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWVzaExpc3QpXG5cdCAgICAgICAgICAgIC8vIGxldCBpbnRlcnNlY3RMaXN0ID0gaW50ZXJzZWN0cy5tYXAoXz0+Xy5vYmplY3QpXG5cdCAgICAgICAgICAgIC8vIGlmKHRoaXMubG9nRmxhZyAmJiBpbnRlcnNlY3RMaXN0Lmxlbmd0aCE9PTApe1xuXHQgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0TGlzdClcblx0ICAgICAgICAgICAgLy8gfVxuXHQgICAgICAgICAgICBpZiAoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLm1lc2hMaXN0W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNoID0gX3N0ZXAyLnZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc2guaWQgaW4gdGhpcy5mcmVlUGllY2VMaXN0ICYmIG1lc2guaWQgIT0gaW50ZXJzZWN0c1swXS5vYmplY3QuaWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lc2gubWF0ZXJpYWwuY29sb3Iuc2V0KDB4ZmYwMDAwKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnJvdGF0aW9uLnggPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVzaC5tYXRlcmlhbC5jb2xvci5zZXQoMHhmZmZmZmYpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyAgIOeri+aWueS9k+eahOaXi+i9rFxuXHQgICAgICAgICAgICAvLyAgIHRoaXMuY3ViZS5yb3RhdGlvbi55ICs9IGRlbHRhICogMC4wMDA2O1xuXHRcblx0ICAgICAgICAgICAgLy8gVXBkYXRlIFZSIGhlYWRzZXQgcG9zaXRpb24gYW5kIGFwcGx5IHRvIGNhbWVyYS5cblx0ICAgICAgICAgICAgLy/mm7TmlrDojrflj5ZITUTnmoTkv6Hmga9cblx0ICAgICAgICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXNoTGlzdC5sZW5ndGgpXG5cdCAgICAgICAgICAgIC8vIGlmKHRoaXMubWVzaExpc3QubGVuZ3RoIT09MCl7XG5cdCAgICAgICAgICAgIC8vIHRoaXMubWVzaExpc3RbMF0ucm90YXRpb24ueSArPSAwLjJcblx0ICAgICAgICAgICAgLy8gdGhpcy5tZXNoTGlzdFszXS5yb3RhdGlvbi55ICs9IDAuMlxuXHQgICAgICAgICAgICAvLyB0aGlzLm1lc2hMaXN0WzBdLnJvdGF0aW9uLnkgKz0gMC4yXG5cdCAgICAgICAgICAgIC8vIH1cblx0XG5cdCAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgc2NlbmUgdGhyb3VnaCB0aGUgbWFuYWdlci5cblx0ICAgICAgICAgICAgLy/ov5vooYxjYW1lcmHmm7TmlrDlkozlnLrmma/nu5jliLZcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSwgdGltZXN0YW1wKTtcblx0ICAgICAgICAgICAgLy8gcmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYSlcblx0XG5cdCAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJvblJlc2l6ZVwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZShlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdCAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xuXHQgICAgICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJzZXRTdGFnZURpbWVuc2lvbnNcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3RhZ2VEaW1lbnNpb25zKHN0YWdlKSB7XG5cdCAgICAgICAgICAgIC8vIE1ha2UgdGhlIHNreWJveCBmaXQgdGhlIHN0YWdlLlxuXHQgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLnNreWJveC5tYXRlcmlhbDtcblx0ICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5za3lib3gpO1xuXHRcblx0ICAgICAgICAgICAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxuXHQgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIHRoaXMuYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopO1xuXHQgICAgICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXG5cdCAgICAgICAgICAgIHRoaXMuc2t5Ym94LnBvc2l0aW9uLnkgPSB0aGlzLmJveFNpemUgLyAyO1xuXHQgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQbGFjZSB0aGUgY3ViZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY2VuZSwgYXQgdXNlciBoZWlnaHQuXG5cdCAgICAgICAgICAgIC8vICAgY3ViZS5wb3NpdGlvbi5zZXQoMCwgY29udHJvbHMudXNlckhlaWdodCwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJzZXR1cFN0YWdlXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwU3RhZ2UoKSB7XG5cdCAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKGZ1bmN0aW9uIChkaXNwbGF5cykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXlzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXkgPSBkaXNwbGF5c1swXTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YWdlRGltZW5zaW9ucyhzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gR2FtZTtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gR2FtZTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBNb3VzZSA9IGZ1bmN0aW9uIChfVEhSRUUkVmVjdG9yKSB7XG5cdCAgICBfaW5oZXJpdHMoTW91c2UsIF9USFJFRSRWZWN0b3IpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1vdXNlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlKTtcblx0XG5cdCAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vdXNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW91c2UpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIF90aGlzLnggPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgX3RoaXMueSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90aGlzLm9uTW91c2VDbGljay5iaW5kKF90aGlzKSwgZmFsc2UpO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKE1vdXNlLCBbe1xuXHQgICAgICAgIGtleTogXCJvbk1vdXNlQ2xpY2tcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Nb3VzZUNsaWNrKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBtb3VzZSBwb3NpdGlvbiBpbiBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlc1xuXHQgICAgICAgICAgICAvLyAoLTEgdG8gKzEpIGZvciBib3RoIGNvbXBvbmVudHNcblx0ICAgICAgICAgICAgdGhpcy54ID0gZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICogMiAtIDE7XG5cdCAgICAgICAgICAgIHRoaXMueSA9IC0oZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIE1vdXNlO1xuXHR9KFRIUkVFLlZlY3RvcjIpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTW91c2U7XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiaW1hZ2VzL3B1enpsZXMvY2FydG9vbiAoMSkuanBnXCI7XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIFZSUHV6emxlLmJ1bmRsZS5qc1xuICoqLyIsIiBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHRoaXNbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdO1xuIFx0dGhpc1tcIndlYnBhY2tIb3RVcGRhdGVcIl0gPSBcclxuIFx0ZnVuY3Rpb24gd2VicGFja0hvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHRob3RBZGRVcGRhdGVDaHVuayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbiBcdFx0aWYocGFyZW50SG90VXBkYXRlQ2FsbGJhY2spIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuIFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuIFx0XHRzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XHJcbiBcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNcIjtcclxuIFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoY2FsbGJhY2spIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnRcIikpO1xyXG4gXHRcdHRyeSB7XHJcbiBcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gXHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XHJcbiBcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gXHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gMTAwMDA7XHJcbiBcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XHJcbiBcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4gXHRcdH1cclxuIFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0aWYocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbiBcdFx0XHRpZihyZXF1ZXN0LnN0YXR1cyA9PT0gMCkge1xyXG4gXHRcdFx0XHQvLyB0aW1lb3V0XHJcbiBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIikpO1xyXG4gXHRcdFx0fSBlbHNlIGlmKHJlcXVlc3Quc3RhdHVzID09PSA0MDQpIHtcclxuIFx0XHRcdFx0Ly8gbm8gdXBkYXRlIGF2YWlsYWJsZVxyXG4gXHRcdFx0XHRjYWxsYmFjaygpO1xyXG4gXHRcdFx0fSBlbHNlIGlmKHJlcXVlc3Quc3RhdHVzICE9PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgIT09IDMwNCkge1xyXG4gXHRcdFx0XHQvLyBvdGhlciBmYWlsdXJlXHJcbiBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xyXG4gXHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0Ly8gc3VjY2Vzc1xyXG4gXHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdHZhciB1cGRhdGUgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuIFx0XHRcdFx0fSBjYXRjaChlKSB7XHJcbiBcdFx0XHRcdFx0Y2FsbGJhY2soZSk7XHJcbiBcdFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIHVwZGF0ZSk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0fTtcclxuIFx0fVxyXG5cbiBcdFxyXG4gXHRcclxuIFx0Ly8gQ29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvYmVmNDViMC9zcmMvc2hhcmVkL3V0aWxzL2NhbkRlZmluZVByb3BlcnR5LmpzXHJcbiBcdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xyXG4gXHR0cnkge1xyXG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgXCJ4XCIsIHtcclxuIFx0XHRcdGdldDogZnVuY3Rpb24oKSB7fVxyXG4gXHRcdH0pO1xyXG4gXHRcdGNhbkRlZmluZVByb3BlcnR5ID0gdHJ1ZTtcclxuIFx0fSBjYXRjaCh4KSB7XHJcbiBcdFx0Ly8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XHJcbiBcdH1cclxuIFx0XHJcbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcclxuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCIzZTYyOTkyN2UwNjBhYjdlZWY4NFwiOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xyXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0aWYoIW1lKSByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXztcclxuIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XHJcbiBcdFx0XHRpZihtZS5ob3QuYWN0aXZlKSB7XHJcbiBcdFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcclxuIFx0XHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPCAwKVxyXG4gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xyXG4gXHRcdFx0XHRcdGlmKG1lLmNoaWxkcmVuLmluZGV4T2YocmVxdWVzdCkgPCAwKVxyXG4gXHRcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcclxuIFx0XHRcdFx0fSBlbHNlIGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuIFx0XHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlcXVlc3QgKyBcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgKyBtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhyZXF1ZXN0KTtcclxuIFx0XHR9O1xyXG4gXHRcdGZvcih2YXIgbmFtZSBpbiBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkpIHtcclxuIFx0XHRcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuIFx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIG5hbWUsIChmdW5jdGlvbihuYW1lKSB7XHJcbiBcdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4gXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcbiBcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbiBcdFx0XHRcdFx0XHRcdH0sXHJcbiBcdFx0XHRcdFx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuIFx0XHRcdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XHJcbiBcdFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRcdH07XHJcbiBcdFx0XHRcdFx0fShuYW1lKSkpO1xyXG4gXHRcdFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0XHRcdGZuW25hbWVdID0gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gZW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicmVhZHlcIilcclxuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuIFx0XHRcdGhvdENodW5rc0xvYWRpbmcrKztcclxuIFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uZShjaHVua0lkLCBmdW5jdGlvbigpIHtcclxuIFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKG51bGwsIGZuKTtcclxuIFx0XHRcdFx0fSBmaW5hbGx5IHtcclxuIFx0XHRcdFx0XHRmaW5pc2hDaHVua0xvYWRpbmcoKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcclxuIFx0XHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xyXG4gXHRcdFx0XHRcdGhvdENodW5rc0xvYWRpbmctLTtcclxuIFx0XHRcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighaG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbiBcdFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdFx0aWYoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuIFx0XHRcdFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4gXHRcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fSk7XHJcbiBcdFx0fVxyXG4gXHRcdGlmKGNhbkRlZmluZVByb3BlcnR5KSB7XHJcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIFwiZVwiLCB7XHJcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdHZhbHVlOiBlbnN1cmVcclxuIFx0XHRcdH0pO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRmbi5lID0gZW5zdXJlO1xyXG4gXHRcdH1cclxuIFx0XHRyZXR1cm4gZm47XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIGhvdCA9IHtcclxuIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcclxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXHJcbiBcdFx0XHRfZGVjbGluZWREZXBlbmRlbmNpZXM6IHt9LFxyXG4gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXHJcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcclxuIFx0XHRcdF9kaXNwb3NlSGFuZGxlcnM6IFtdLFxyXG4gXHRcclxuIFx0XHRcdC8vIE1vZHVsZSBBUElcclxuIFx0XHRcdGFjdGl2ZTogdHJ1ZSxcclxuIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcclxuIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcclxuIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2s7XHJcbiBcdFx0XHRcdGVsc2VcclxuIFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjaztcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRkZWNsaW5lOiBmdW5jdGlvbihkZXApIHtcclxuIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdFx0XHRob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJudW1iZXJcIilcclxuIFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xyXG4gXHRcdFx0XHRlbHNlXHJcbiBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0ZGlzcG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdHJlbW92ZURpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdH0sXHJcbiBcdFxyXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcclxuIFx0XHRcdGNoZWNrOiBob3RDaGVjayxcclxuIFx0XHRcdGFwcGx5OiBob3RBcHBseSxcclxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHRpZighbCkgcmV0dXJuIGhvdFN0YXR1cztcclxuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRhZGRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XHJcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0cmVtb3ZlU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcclxuIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdFN0YXR1c0hhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHJcbiBcdFx0XHQvL2luaGVyaXQgZnJvbSBwcmV2aW91cyBkaXNwb3NlIGNhbGxcclxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxyXG4gXHRcdH07XHJcbiBcdFx0cmV0dXJuIGhvdDtcclxuIFx0fVxyXG4gXHRcclxuIFx0dmFyIGhvdFN0YXR1c0hhbmRsZXJzID0gW107XHJcbiBcdHZhciBob3RTdGF0dXMgPSBcImlkbGVcIjtcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdFNldFN0YXR1cyhuZXdTdGF0dXMpIHtcclxuIFx0XHRob3RTdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0aG90U3RhdHVzSGFuZGxlcnNbaV0uY2FsbChudWxsLCBuZXdTdGF0dXMpO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHQvLyB3aGlsZSBkb3dubG9hZGluZ1xyXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcclxuIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xyXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4gXHR2YXIgaG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuIFx0dmFyIGhvdENhbGxiYWNrO1xyXG4gXHRcclxuIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXHJcbiBcdHZhciBob3RVcGRhdGUsIGhvdFVwZGF0ZU5ld0hhc2g7XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XHJcbiBcdFx0dmFyIGlzTnVtYmVyID0gKCtpZCkgKyBcIlwiID09PSBpZDtcclxuIFx0XHRyZXR1cm4gaXNOdW1iZXIgPyAraWQgOiBpZDtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90Q2hlY2soYXBwbHksIGNhbGxiYWNrKSB7XHJcbiBcdFx0aWYoaG90U3RhdHVzICE9PSBcImlkbGVcIikgdGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XHJcbiBcdFx0aWYodHlwZW9mIGFwcGx5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuIFx0XHRcdGhvdEFwcGx5T25VcGRhdGUgPSBmYWxzZTtcclxuIFx0XHRcdGNhbGxiYWNrID0gYXBwbHk7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdGhvdEFwcGx5T25VcGRhdGUgPSBhcHBseTtcclxuIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4gXHRcdFx0fTtcclxuIFx0XHR9XHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiY2hlY2tcIik7XHJcbiBcdFx0aG90RG93bmxvYWRNYW5pZmVzdChmdW5jdGlvbihlcnIsIHVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcclxuIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgbnVsbCk7XHJcbiBcdFx0XHRcdHJldHVybjtcclxuIFx0XHRcdH1cclxuIFx0XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0aG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHVwZGF0ZS5jLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRob3RBdmFpbGlibGVGaWxlc01hcFt1cGRhdGUuY1tpXV0gPSB0cnVlO1xyXG4gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xyXG4gXHRcclxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XHJcbiBcdFx0XHRob3RDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gXHRcdFx0aG90VXBkYXRlID0ge307XHJcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XHJcbiBcdFx0XHR7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZS1ibG9ja3NcclxuIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cclxuIFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9KTtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGlmKCFob3RBdmFpbGlibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXHJcbiBcdFx0XHRyZXR1cm47XHJcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHRpZigtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XHJcbiBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKSB7XHJcbiBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXMrKztcclxuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xyXG4gXHRcdGhvdFNldFN0YXR1cyhcInJlYWR5XCIpO1xyXG4gXHRcdHZhciBjYWxsYmFjayA9IGhvdENhbGxiYWNrO1xyXG4gXHRcdGhvdENhbGxiYWNrID0gbnVsbDtcclxuIFx0XHRpZighY2FsbGJhY2spIHJldHVybjtcclxuIFx0XHRpZihob3RBcHBseU9uVXBkYXRlKSB7XHJcbiBcdFx0XHRob3RBcHBseShob3RBcHBseU9uVXBkYXRlLCBjYWxsYmFjayk7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbiBcdFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xyXG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuIFx0XHR9XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMsIGNhbGxiYWNrKSB7XHJcbiBcdFx0aWYoaG90U3RhdHVzICE9PSBcInJlYWR5XCIpIHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcclxuIFx0XHRpZih0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiBcdFx0XHRjYWxsYmFjayA9IG9wdGlvbnM7XHJcbiBcdFx0XHRvcHRpb25zID0ge307XHJcbiBcdFx0fSBlbHNlIGlmKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4gXHRcdFx0fTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbiBcdFx0XHR9O1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGUpIHtcclxuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbbW9kdWxlXTtcclxuIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4gXHRcclxuIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4gXHRcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHRpZighbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZClcclxuIFx0XHRcdFx0XHRjb250aW51ZTtcclxuIFx0XHRcdFx0aWYobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XHJcbiBcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICsgbW9kdWxlSWQpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGlmKG1vZHVsZUlkID09PSAwKSB7XHJcbiBcdFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcclxuIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuIFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgKyBtb2R1bGVJZCArIFwiIGluIFwiICsgcGFyZW50SWQpO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRpZihvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgPj0gMCkgY29udGludWU7XHJcbiBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdKVxyXG4gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcclxuIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XHJcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcclxuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaChwYXJlbnRJZCk7XHJcbiBcdFx0XHRcdFx0cXVldWUucHVzaChwYXJlbnRJZCk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHJcbiBcdFx0XHRyZXR1cm4gW291dGRhdGVkTW9kdWxlcywgb3V0ZGF0ZWREZXBlbmRlbmNpZXNdO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xyXG4gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4gXHRcdFx0XHRpZihhLmluZGV4T2YoaXRlbSkgPCAwKVxyXG4gXHRcdFx0XHRcdGEucHVzaChpdGVtKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbiBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxyXG4gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xyXG4gXHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbiBcdFx0XHRcdHZhciByZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aWYoIXJlc3VsdCkge1xyXG4gXHRcdFx0XHRcdGlmKG9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcclxuIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiKSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0aWYocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuIFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2socmVzdWx0KTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbiBcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgcmVzdWx0WzBdKTtcclxuIFx0XHRcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiByZXN1bHRbMV0pIHtcclxuIFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0WzFdLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXHJcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xyXG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHRbMV1bbW9kdWxlSWRdKTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cclxuIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0dmFyIG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xyXG4gXHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gJiYgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWQpXHJcbiBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcclxuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxyXG4gXHRcdFx0XHRcdGVycm9ySGFuZGxlcjogaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcclxuIFx0XHRcdFx0fSk7XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xyXG4gXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4gXHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuIFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4gXHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0aWYoIW1vZHVsZSkgY29udGludWU7XHJcbiBcdFxyXG4gXHRcdFx0dmFyIGRhdGEgPSB7fTtcclxuIFx0XHJcbiBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcclxuIFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XHJcbiBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdHZhciBjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcclxuIFx0XHRcdFx0Y2IoZGF0YSk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xyXG4gXHRcclxuIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXHJcbiBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xyXG4gXHRcclxuIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxyXG4gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcclxuIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXHJcbiBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcclxuIFx0XHRcdFx0aWYoIWNoaWxkKSBjb250aW51ZTtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSB7XHJcbiBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gcmVtb3ZlIG91dGRhdGVkIGRlcGVuZGVuY3kgZnJvbSBtb2R1bGUgY2hpbGRyZW5cclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcclxuIFx0XHRcdFx0XHR2YXIgaWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XHJcbiBcdFx0XHRcdFx0aWYoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xyXG4gXHRcclxuIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbiBcdFxyXG4gXHRcdC8vIGluc2VydCBuZXcgY29kZVxyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcclxuIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV07XHJcbiBcdFx0XHRcdFx0dmFyIGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XHJcbiBcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdGNhbGxiYWNrcy5wdXNoKGNiKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIGNiID0gY2FsbGJhY2tzW2ldO1xyXG4gXHRcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0XHRjYihvdXRkYXRlZERlcGVuZGVuY2llcyk7XHJcbiBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xyXG4gXHRcdFx0dmFyIG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XHJcbiBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbiBcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcclxuIFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbiBcdFx0XHRcdGlmKHR5cGVvZiBpdGVtLmVycm9ySGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiBcdFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JIYW5kbGVyKGVycik7XHJcbiBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9IGVsc2UgaWYoIWVycm9yKVxyXG4gXHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcclxuIFx0XHRpZihlcnJvcikge1xyXG4gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnJvcik7XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4gXHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbiBcdH1cclxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2UsXG4gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuIFx0XHRcdHBhcmVudHM6IGhvdEN1cnJlbnRQYXJlbnRzLFxuIFx0XHRcdGNoaWxkcmVuOiBbXVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvcHVibGljL1wiO1xuXG4gXHQvLyBfX3dlYnBhY2tfaGFzaF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKDApKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgM2U2Mjk5MjdlMDYwYWI3ZWVmODRcbiAqKi8iLCJpbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lLmpzXCJcclxubGV0IGdhbWUgPSBuZXcgR2FtZSgpXHJcblxyXG5jb25zdCBsb29wID0gKCk9PntcclxuICAgIGdhbWUucmVuZGVyKClcclxuICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxyXG59XHJcbmxvb3AoKVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qYXZhc2NyaXB0cy9pbmRleC5qc1xuICoqLyIsImltcG9ydCBNb3VzZSBmcm9tIFwiLi9tb3VzZS5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1le1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2FudGlhbGlhczogdHJ1ZX0pXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdGhlIGNhbnZhcyBlbGVtZW50IGNyZWF0ZWQgYnkgdGhlIHJlbmRlcmVyIHRvIGRvY3VtZW50IGJvZHkgZWxlbWVudC5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgdGhyZWUuanMgc2NlbmUuXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHRocmVlLmpzIGNhbWVyYS5cclxuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDApXHJcblxyXG4gICAgICAgIC8vIEFwcGx5IFZSIGhlYWRzZXQgcG9zaXRpb25hbCBkYXRhIHRvIGNhbWVyYS5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gbmV3IFRIUkVFLlZSQ29udHJvbHModGhpcy5jYW1lcmEpXHJcbiAgICAgICAgLy8gdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDVcclxuICAgICAgICAvL+ermeeri+Wnv+aAgVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMudXNlckhlaWdodCA9IDEwXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5zdGFuZGluZyA9IHRydWVcclxuICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBUSFJFRS5WUkVmZmVjdCh0aGlzLnJlbmRlcmVyKVxyXG4gICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodClcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgVlIgbWFuYWdlciBoZWxwZXIgdG8gZW50ZXIgYW5kIGV4aXQgVlIgbW9kZS5cclxuICAgICAgICAvL+aMiemSruWSjOWFqOWxj+aooeW8j+euoeeQhlxyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGhpZGVCdXR0b246IGZhbHNlLCAvLyBEZWZhdWx0OiBmYWxzZS5cclxuICAgICAgICAgICAgaXNVbmRpc3RvcnRlZDogZmFsc2UgLy8gRGVmYXVsdDogZmFsc2UuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBXZWJWUk1hbmFnZXIodGhpcy5yZW5kZXJlciwgdGhpcy5lZmZlY3QsIHBhcmFtcylcclxuXHJcbiAgICAgICAgLy8gcmF5Y2FzdGVyXHJcbiAgICAgICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKClcclxuICAgICAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlKClcclxuICAgICAgICAvL2JpbmQgdGhpc1xyXG4gICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkID0gdGhpcy5vblRleHR1cmVMb2FkZWQuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnNldHVwU3RhZ2UgPSB0aGlzLnNldHVwU3RhZ2UuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zID0gdGhpcy5zZXRTdGFnZURpbWVuc2lvbnMuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMucGxhY2VQaWVjZXMgPSB0aGlzLnBsYWNlUGllY2VzLmJpbmQodGhpcylcclxuICAgICAgICAvL1xyXG4gICAgICAgIHRoaXMubWVzaExpc3QgPSBbXVxyXG4gICAgICAgIHRoaXMubG9nRmxhZyA9IHRydWVcclxuICAgICAgICAvLyBBZGQgYSByZXBlYXRpbmcgZ3JpZCBhcyBhIHNreWJveC5cclxuICAgICAgICB0aGlzLmJveFNpemUgPSAyMFxyXG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKVxyXG4gICAgICAgIHRoaXMubG9hZGVyLmxvYWQoXCJwdWJsaWMvaW1hZ2VzL2JveC5wbmdcIiwgdGhpcy5vblRleHR1cmVMb2FkZWQpXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSlcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInZyZGlzcGxheXByZXNlbnRjaGFuZ2VcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSlcclxuICAgICAgICB0aGlzLmxhc3RSZW5kZXIgPSAwXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gbnVsbFxyXG4gICAgfVxyXG4gICAgb25UZXh0dXJlTG9hZGVkKHRleHR1cmUpIHtcclxuICAgICAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQodGhpcy5ib3hTaXplLCB0aGlzLmJveFNpemUpXHJcblxyXG4gICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKVxyXG4gICAgICAgIGxldCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIG1hcDogdGV4dHVyZSxcclxuICAgICAgICAgICAgY29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiLFxyXG4gICAgICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAvLyBBbGlnbiB0aGUgc2t5Ym94IHRvIHRoZSBmbG9vciAod2hpY2ggaXMgYXQgeT0wKS5cclxuICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcclxuICAgICAgICB0aGlzLnNreWJveC5wb3NpdGlvbi55ID0gdGhpcy5ib3hTaXplLzJcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveClcclxuXHJcbiAgICAgIC8vICAgdmFyIHBhbmVsR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyLCAxKVxyXG4gICAgICAvLyAgIHZhciBwYW5lbCA9IG5ldyBUSFJFRS5NZXNoKHBhbmVsR2VvbWV0cnksbWF0ZXJpYWwpXHJcbiAgICAgIC8vICAgcGFuZWwucG9zaXRpb24uc2V0KDAsMi41LC0xLjk5OSlcclxuICAgICAgLy8gLy8gQWRkIGN1YmUgbWVzaCB0byB5b3VyIHRocmVlLmpzIHNjZW5lXHJcbiAgICAgIC8vICAgdGhpcy5zY2VuZS5hZGQocGFuZWwpXHJcbiAgICAgICAgdGhpcy5wbGFjZVBpZWNlcygpXHJcblxyXG4gICAgICAvLyBGb3IgaGlnaCBlbmQgVlIgZGV2aWNlcyBsaWtlIFZpdmUgYW5kIE9jdWx1cywgdGFrZSBpbnRvIGFjY291bnQgdGhlIHN0YWdlXHJcbiAgICAgIC8vIHBhcmFtZXRlcnMgcHJvdmlkZWQuXHJcbiAgICAgIC8v5Zyo6auY56uv55qE6K6+5aSH5LiK77yM6KaB6ICD6JmR5Yiw6K6+5aSH5o+Q5L6b55qE5Zy65pmv5L+h5oGv55qE5pu05paw44CCXHJcbiAgICAgICAgdGhpcy5zZXR1cFN0YWdlKClcclxuICAgIH1cclxuICAgIHBsYWNlUGllY2VzKCl7XHJcblxyXG4gICAgICAgIHRoaXMuY29sdW1uTnVtYmVyID0gNFxyXG4gICAgICAgIHRoaXMucGllY2VOdW1iZXIgPSB0aGlzLmNvbHVtbk51bWJlcip0aGlzLmNvbHVtbk51bWJlclxyXG4gICAgICAgIHRoaXMuc2NhbGVkV2lkdGggPSAxNlxyXG4gICAgICAgIHRoaXMuc2NhbGVkSGVpZ2h0ID0gOVxyXG4gICAgICAgIHRoaXMuZnJlZVBpZWNlTnVtYmVyID0gdGhpcy5waWVjZU51bWJlcioxLzJcclxuICAgICAgICB0aGlzLmZyZWVQaWVjZUxpc3QgPSBbXVxyXG4gICAgICAgIHRoaXMucGxhbmVXaWR0aCA9IHRoaXMuc2NhbGVkV2lkdGgvdGhpcy5jb2x1bW5OdW1iZXJcclxuICAgICAgICB0aGlzLnBsYW5lSGVpZ2h0ID0gdGhpcy5zY2FsZWRIZWlnaHQvdGhpcy5jb2x1bW5OdW1iZXJcclxuICAgICAgICAvLyBsb2FkIGFuIGltYWdlXHJcbiAgICAgICAgbGV0IGltYWdlT2JqID0gbmV3IEltYWdlKClcclxuICAgICAgICBpbWFnZU9iai5zcmMgPSByZXF1aXJlKFwiLi4vLi4vcHVibGljL2ltYWdlcy9wdXp6bGVzL2NhcnRvb24gKDEpLmpwZ1wiKVxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXHJcbiAgICAgICAgbGV0IHdzID0gKGNhbnZhcy53aWR0aC8xLjUpL2ltYWdlT2JqLndpZHRoXHJcbiAgICAgICAgbGV0IGhzID0gKGNhbnZhcy5oZWlnaHQvMS41KS9pbWFnZU9iai5oZWlnaHRcclxuICAgICAgICB0aGlzLnNjYWxlID0gTWF0aC5taW4od3MsaHMpXHJcbiAgICAgICAgdGhpcy5waWVjZVdpZHRoID0gaW1hZ2VPYmoud2lkdGgvdGhpcy5jb2x1bW5OdW1iZXJcclxuICAgICAgICB0aGlzLnBpZWNlSGVpZ2h0ID0gaW1hZ2VPYmouaGVpZ2h0L3RoaXMuY29sdW1uTnVtYmVyXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5waWVjZVdpZHRoLHRoaXMucGllY2VIZWlnaHQpXHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgaW1hZ2VPYmoub25sb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMCxpbmRleD0wLHRleHR1cmUsbWF0ZXJpYWwsbWVzaDtpPHNlbGYuY29sdW1uTnVtYmVyO2krKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqPHNlbGYuY29sdW1uTnVtYmVyOyBqKyssaW5kZXgrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGV4dC5jbGVhclJlY3QoMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbnZhcyBjb250ZW50cyB3aWxsIGJlIHVzZWQgZm9yIGEgdGV4dHVyZVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGlzIGxvYWRlZCwgdGhpcyBmdW5jdGlvbiBleGVjdXRlc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW1nLnNyYylcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb250ZXh0LnNjYWxlKHNlbGYuc2NhbGUsc2VsZi5zY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZU9iaiwgaSpzZWxmLnBpZWNlV2lkdGgsaipzZWxmLnBpZWNlSGVpZ2h0LHNlbGYucGllY2VXaWR0aCxzZWxmLnBpZWNlSGVpZ2h0LDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRleHR1cmUgKSAvLyBjaGVja3MgaWYgdGV4dHVyZSBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHttYXA6IHRleHR1cmUsIHNpZGU6VEhSRUUuRG91YmxlU2lkZX0gKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShzZWxmLnBsYW5lV2lkdGgsIHNlbGYucGxhbmVIZWlnaHQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtzZWxmLmZyZWVQaWVjZU51bWJlcn0vJHsoc2VsZi5jb2x1bW5OdW1iZXIqc2VsZi5jb2x1bW5OdW1iZXIgLSBpbmRleCl9YClcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZG9tID0gTWF0aC5yYW5kb20oKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJhbmRvbSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyYW5kb20gPiBzZWxmLmZyZWVQaWVjZU51bWJlci8oc2VsZi5jb2x1bW5OdW1iZXIqc2VsZi5jb2x1bW5OdW1iZXIgLSBpbmRleCkmJnNlbGYuZnJlZVBpZWNlTnVtYmVyPjApXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5mcmVlUGllY2VMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBpZihyYW5kb20gPCBzZWxmLmZyZWVQaWVjZU51bWJlci8oc2VsZi5jb2x1bW5OdW1iZXIqc2VsZi5jb2x1bW5OdW1iZXIgLSBpbmRleCkmJnNlbGYuZnJlZVBpZWNlTnVtYmVyPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IC1zZWxmLmJveFNpemUvMitzZWxmLnBsYW5lV2lkdGgvMiArIE1hdGgucmFuZG9tKCkqKHNlbGYuYm94U2l6ZSAtIHNlbGYucGxhbmVXaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHogPSAtc2VsZi5ib3hTaXplLzIrc2VsZi5wbGFuZUhlaWdodC8yICsgTWF0aC5yYW5kb20oKSooc2VsZi5ib3hTaXplIC0gc2VsZi5wbGFuZUhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5yb3RhdGlvbi54ID0gTWF0aC5QSS8yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2gucG9zaXRpb24uc2V0KE1hdGgucm91bmQoeCksMC41LE1hdGgucm91bmQoeikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZnJlZVBpZWNlTnVtYmVyLS1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcmVlUGllY2VMaXN0LnB1c2gobWVzaC5pZClcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi5zZXQoaSpzZWxmLnBsYW5lV2lkdGgtc2VsZi5zY2FsZWRXaWR0aC8yK3NlbGYucGxhbmVXaWR0aC8yLCBzZWxmLnNjYWxlZEhlaWdodC1zZWxmLnBsYW5lSGVpZ2h0LzItaipzZWxmLnBsYW5lSGVpZ2h0LC0xMClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWVzaC5wb3NpdGlvbi5zZXQoMCwgMiwtOSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1lc2hMaXN0LnB1c2gobWVzaClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjZW5lLmFkZCggbWVzaCApXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHRoaXMuc2NlbmUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5mcmVlUGllY2VMaXN0KVxyXG4gICAgICAgICAgICBmb3IobGV0IG1lc2ggb2Ygc2VsZi5tZXNoTGlzdCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNoLmlkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVuZGVyKHRpbWVzdGFtcCl7XHJcbiAgICAgICAgLy8gdmFyIGRlbHRhID0gTWF0aC5taW4odGltZXN0YW1wIC0gdGhpcy5sYXN0UmVuZGVyLCA1MDApXHJcbiAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gdGltZXN0YW1wXHJcbiAgICAgICAgLy/lpITnkIbpvKDmoIfngrnlh7tcclxuICAgICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsdGhpcy5jYW1lcmEpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tb3VzZS54LHRoaXMubW91c2UueSlcclxuICAgICAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoIHRoaXMuc2NlbmUuY2hpbGRyZW4gKVxyXG4gICAgICAgIC8vIGZvciAoIHZhciBpID0gMDsgaSA8IGludGVyc2VjdHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIGlmKGludGVyc2VjdHNbIGkgXS5vYmplY3QuaWQgaW4gdGhpcy5tZXNoTGlzdClcclxuICAgICAgICAvLyAgICAgLy8gaW50ZXJzZWN0c1sgaSBdLm9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXQoIDB4ZmYwMDAwIClcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0c1tpXSlcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgdGhpcy5tb3VzZS54ID0gdGhpcy5tb3VzZS55ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXNoTGlzdClcclxuICAgICAgICAvLyBsZXQgaW50ZXJzZWN0TGlzdCA9IGludGVyc2VjdHMubWFwKF89Pl8ub2JqZWN0KVxyXG4gICAgICAgIC8vIGlmKHRoaXMubG9nRmxhZyAmJiBpbnRlcnNlY3RMaXN0Lmxlbmd0aCE9PTApe1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhpbnRlcnNlY3RMaXN0KVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZihpbnRlcnNlY3RzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgZm9yKGxldCBtZXNoIG9mIHRoaXMubWVzaExpc3Qpe1xyXG4gICAgICAgICAgICAgICAgaWYoKG1lc2guaWQgaW4gdGhpcy5mcmVlUGllY2VMaXN0KSYmbWVzaC5pZCE9aW50ZXJzZWN0c1swXS5vYmplY3QuaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1lc2gubWF0ZXJpYWwuY29sb3Iuc2V0KDB4ZmYwMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2gucm90YXRpb24ueCA9IE1hdGguUEkvMlxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaC5yb3RhdGlvbi54ID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1lc2gubWF0ZXJpYWwuY29sb3Iuc2V0KDB4ZmZmZmZmKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICAg56uL5pa55L2T55qE5peL6L2sXHJcbiAgICAgICAgLy8gICB0aGlzLmN1YmUucm90YXRpb24ueSArPSBkZWx0YSAqIDAuMDAwNjtcclxuXHJcbiAgICAgICAgICAvLyBVcGRhdGUgVlIgaGVhZHNldCBwb3NpdGlvbiBhbmQgYXBwbHkgdG8gY2FtZXJhLlxyXG4gICAgICAgICAgLy/mm7TmlrDojrflj5ZITUTnmoTkv6Hmga9cclxuICAgICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXNoTGlzdC5sZW5ndGgpXHJcbiAgICAgICAgLy8gaWYodGhpcy5tZXNoTGlzdC5sZW5ndGghPT0wKXtcclxuICAgICAgICAgICAgLy8gdGhpcy5tZXNoTGlzdFswXS5yb3RhdGlvbi55ICs9IDAuMlxyXG4gICAgICAgICAgICAvLyB0aGlzLm1lc2hMaXN0WzNdLnJvdGF0aW9uLnkgKz0gMC4yXHJcbiAgICAgICAgICAgIC8vIHRoaXMubWVzaExpc3RbMF0ucm90YXRpb24ueSArPSAwLjJcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgLy8gUmVuZGVyIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSBtYW5hZ2VyLlxyXG4gICAgICAgICAgLy/ov5vooYxjYW1lcmHmm7TmlrDlkozlnLrmma/nu5jliLZcclxuICAgICAgICB0aGlzLm1hbmFnZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhLCB0aW1lc3RhbXApXHJcbiAgICAgICAgICAvLyByZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhKVxyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIpXHJcbiAgICB9XHJcbiAgICBvblJlc2l6ZShlKSB7XHJcbiAgICAgICAgdGhpcy5lZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxyXG4gICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXHJcbiAgICB9XHJcbiAgICBzZXRTdGFnZURpbWVuc2lvbnMoc3RhZ2UpIHtcclxuICAgICAgLy8gTWFrZSB0aGUgc2t5Ym94IGZpdCB0aGUgc3RhZ2UuXHJcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gdGhpcy5za3lib3gubWF0ZXJpYWxcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNreWJveClcclxuXHJcbiAgICAgIC8vIFNpemUgdGhlIHNreWJveCBhY2NvcmRpbmcgdG8gdGhlIHNpemUgb2YgdGhlIGFjdHVhbCBzdGFnZS5cclxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIHRoaXMuYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopXHJcbiAgICAgICAgdGhpcy5za3lib3ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpXHJcblxyXG4gICAgICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXHJcbiAgICAgICAgdGhpcy5za3lib3gucG9zaXRpb24ueSA9IHRoaXMuYm94U2l6ZS8yXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5za3lib3gpXHJcblxyXG4gICAgICAvLyBQbGFjZSB0aGUgY3ViZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY2VuZSwgYXQgdXNlciBoZWlnaHQuXHJcbiAgICAvLyAgIGN1YmUucG9zaXRpb24uc2V0KDAsIGNvbnRyb2xzLnVzZXJIZWlnaHQsIDApO1xyXG4gICAgfVxyXG4gICAgc2V0dXBTdGFnZSgpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpc1xyXG4gICAgICAgIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbihmdW5jdGlvbihkaXNwbGF5cykge1xyXG4gICAgICAgICAgICBpZiAoZGlzcGxheXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5ID0gZGlzcGxheXNbMF1cclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRTdGFnZURpbWVuc2lvbnMoc2VsZi5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvamF2YXNjcmlwdHMvZ2FtZS5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdXNlIGV4dGVuZHMgVEhSRUUuVmVjdG9yMntcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcclxuICAgICAgICBzdXBlcihwcm9wcylcclxuICAgICAgICB0aGlzLnggPSB1bmRlZmluZWRcclxuICAgICAgICB0aGlzLnkgPSB1bmRlZmluZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCB0aGlzLm9uTW91c2VDbGljay5iaW5kKHRoaXMpLCBmYWxzZSApXHJcblxyXG4gICAgfVxyXG4gICAgb25Nb3VzZUNsaWNrKCBldmVudCApIHtcclxuICAgIFx0Ly8gY2FsY3VsYXRlIG1vdXNlIHBvc2l0aW9uIGluIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGVzXHJcbiAgICBcdC8vICgtMSB0byArMSkgZm9yIGJvdGggY29tcG9uZW50c1xyXG4gICAgICAgIHRoaXMueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMVxyXG4gICAgICAgIHRoaXMueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2phdmFzY3JpcHRzL21vdXNlLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3B1enpsZXMvY2FydG9vbiAoMSkuanBnXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3B1YmxpYy9pbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGdcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9