!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=h.p+""+e+"."+E+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=h.p+""+E+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(r){return e(r)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(t.responseText)}catch(i){return void e(i)}e(null,r)}}}function r(e){function t(e,t){"ready"===R&&o("prepare"),O++,h.e(e,function(){function n(){O--,"prepare"===R&&(_[e]||l(e),0===O&&0===T&&d())}try{t.call(null,r)}finally{n()}})}var n=j[e];if(!n)return h;var r=function(t){return n.hot.active?j[t]?(j[t].parents.indexOf(e)<0&&j[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):x=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),x=[]),h(t)};for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(p?Object.defineProperty(r,i,function(e){return{configurable:!0,enumerable:!0,get:function(){return h[e]},set:function(t){h[e]=t}}}(i)):r[i]=h[i]);return p?Object.defineProperty(r,"e",{enumerable:!0,value:t}):r.e=t,r}function i(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:a,apply:u,status:function(e){return e?void H.push(e):R},addStatusHandler:function(e){H.push(e)},removeStatusHandler:function(e){var t=H.indexOf(e);t>=0&&H.splice(t,1)},data:g[e]};return t}function o(e){R=e;for(var t=0;t<H.length;t++)H[t].call(null,e)}function s(e){var t=+e+""===e;return t?+e:e}function a(e,t){if("idle"!==R)throw new Error("check() is only allowed in idle status");"function"==typeof e?(m=!1,t=e):(m=e,t=t||function(e){if(e)throw e}),o("check"),n(function(e,n){if(e)return t(e);if(!n)return o("idle"),void t(null,null);P={},S={},_={};for(var r=0;r<n.c.length;r++)S[n.c[r]]=!0;b=n.h,o("prepare"),y=t,w={};var i=0;l(i),"prepare"===R&&0===O&&0===T&&d()})}function c(e,t){if(S[e]&&P[e]){P[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(w[n]=t[n]);0===--T&&0===O&&d()}}function l(e){S[e]?(P[e]=!0,T++,t(e)):_[e]=!0}function d(){o("ready");var e=y;if(y=null,e)if(m)u(m,e);else{var t=[];for(var n in w)Object.prototype.hasOwnProperty.call(w,n)&&t.push(s(n));e(null,t)}}function u(t,n){function r(e){for(var t=[e],n={},r=t.slice();r.length>0;){var o=r.pop(),e=j[o];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var s=0;s<e.parents.length;s++){var a=e.parents[s],c=j[a];if(c.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+a);t.indexOf(a)>=0||(c.hot._acceptedDependencies[o]?(n[a]||(n[a]=[]),i(n[a],[o])):(delete n[a],t.push(a),r.push(a)))}}}return[t,n]}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.indexOf(r)<0&&e.push(r)}}if("ready"!==R)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var a={},c=[],l={};for(var d in w)if(Object.prototype.hasOwnProperty.call(w,d)){var u=s(d),f=r(u);if(!f){if(t.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+u+" is not accepted"))}if(f instanceof Error)return o("abort"),n(f);l[u]=w[u],i(c,f[0]);for(var u in f[1])Object.prototype.hasOwnProperty.call(f[1],u)&&(a[u]||(a[u]=[]),i(a[u],f[1][u]))}for(var p=[],v=0;v<c.length;v++){var u=c[v];j[u]&&j[u].hot._selfAccepted&&p.push({module:u,errorHandler:j[u].hot._selfAccepted})}o("dispose");for(var y=c.slice();y.length>0;){var u=y.pop(),m=j[u];if(m){for(var H={},T=m.hot._disposeHandlers,O=0;O<T.length;O++){var _=T[O];_(H)}g[u]=H,m.hot.active=!1,delete j[u];for(var O=0;O<m.children.length;O++){var P=j[m.children[O]];if(P){var S=P.parents.indexOf(u);S>=0&&P.parents.splice(S,1)}}}}for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u))for(var m=j[u],k=a[u],O=0;O<k.length;O++){var M=k[O],S=m.children.indexOf(M);S>=0&&m.children.splice(S,1)}o("apply"),E=b;for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(e[u]=l[u]);var z=null;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){for(var m=j[u],k=a[u],D=[],v=0;v<k.length;v++){var M=k[v],_=m.hot._acceptedDependencies[M];D.indexOf(_)>=0||D.push(_)}for(var v=0;v<D.length;v++){var _=D[v];try{_(a)}catch(L){z||(z=L)}}}for(var v=0;v<p.length;v++){var C=p[v],u=C.module;x=[u];try{h(u)}catch(L){if("function"==typeof C.errorHandler)try{C.errorHandler(L)}catch(L){z||(z=L)}else z||(z=L)}}return z?(o("fail"),n(z)):(o("idle"),void n(null,c))}function h(t){if(j[t])return j[t].exports;var n=j[t]={exports:{},id:t,loaded:!1,hot:i(t),parents:x,children:[]};return e[t].call(n.exports,n,n.exports,r(t)),n.loaded=!0,n.exports}var f=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){c(e,t),f&&f(e,t)};var p=!1;try{Object.defineProperty({},"x",{get:function(){}}),p=!0}catch(v){}var y,w,b,m=!0,E="56098b9a0a5195f172a1",g={},x=[],H=[],R="idle",T=0,O=0,_={},P={},S={},j={};return h.m=e,h.c=j,h.p="/public/",h.h=function(){return E},r(0)(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),o=r(i),s=new o["default"],a=function(){s.render()};a()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=r(s),c=function(){function e(){i(this,e),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.controls=new THREE.VRControls(this.camera),this.controls.standing=!0,this.effect=new THREE.VREffect(this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight);var t={hideButton:!1,isUndistorted:!1};this.manager=new WebVRManager(this.renderer,this.effect,t),this.raycaster=new THREE.Raycaster,this.mouse=new a["default"],this.onTextureLoaded=this.onTextureLoaded.bind(this),this.onResize=this.onResize.bind(this),this.render=this.render.bind(this),this.setupStage=this.setupStage.bind(this),this.setStageDimensions=this.setStageDimensions.bind(this),this.placePieces=this.placePieces.bind(this),this.meshList=[],this.logFlag=!0,this.boxSize=20,this.loader=new THREE.TextureLoader,this.loader.load("public/images/box.png",this.onTextureLoaded),window.addEventListener("resize",this.onResize,!0),window.addEventListener("vrdisplaypresentchange",this.onResize,!0),this.lastRender=0,this.display=null}return o(e,[{key:"onTextureLoaded",value:function(e){e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.set(this.boxSize,this.boxSize);var t=new THREE.BoxGeometry(this.boxSize,this.boxSize,this.boxSize),n=new THREE.MeshBasicMaterial({map:e,color:"rgba(255,255,255,1)",side:THREE.BackSide});this.skybox=new THREE.Mesh(t,n),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox);var r=new THREE.PlaneGeometry(2,1),i=new THREE.Mesh(r,n);i.position.set(0,2.5,-1.999),this.scene.add(i),this.placePieces(),this.setupStage()}},{key:"placePieces",value:function(){this.columnNumber=4;var e=document.createElement("canvas"),t=e.getContext("2d");t.font="Bold 40px Arial",t.fillStyle="rgba(255,255,255,0.95)",t.fillText("Hello, world!",50,50);var r=new THREE.Texture(e);r.needsUpdate=!0;var i=new THREE.MeshBasicMaterial({map:r,side:THREE.DoubleSide}),o=new THREE.Mesh(new THREE.PlaneGeometry(10,5),i);o.position.set(0,2,9),this.scene.add(o);var s=new Image;s.src=n(3);var a=document.createElement("canvas"),c=a.getContext("2d"),l=a.width/1.5/s.width,d=a.height/1.5/s.height;this.scale=Math.min(l,d),this.pieceWidth=s.width/this.columnNumber,this.pieceHeight=s.height/this.columnNumber;var u=void 0,h=void 0,f=void 0,p=this;s.onload=function(){for(var e=0;e<p.columnNumber;e++)for(var t=0;t<p.columnNumber;t++)a=document.createElement("canvas"),c=a.getContext("2d"),u=new THREE.Texture(a),c.scale(p.scale,this.scale),c.drawImage(s,e*p.pieceWidth,t*p.pieceHeight,p.pieceWidth,p.pieceHeight,0,0,a.width,a.height),u&&(u.needsUpdate=!0),h=new THREE.MeshBasicMaterial({map:u,side:THREE.DoubleSide}),h.transparent=!1,f=new THREE.Mesh(new THREE.PlaneGeometry(3,3),h),f.position.set(3*e,3*p.columnNumber-3*t,-9),p.meshList.push(f.id),p.scene.add(f)}}},{key:"render",value:function(e){this.lastRender=e,this.raycaster.setFromCamera(this.mouse,this.camera);for(var t=this.raycaster.intersectObjects(this.scene.children,!1),n=0;n<t.length;n++)t[n].object.material.color.set(16711680);this.controls.update(),this.manager.render(this.scene,this.camera,e),requestAnimationFrame(this.render)}},{key:"onResize",value:function(e){this.effect.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"setStageDimensions",value:function(e){var t=this.skybox.material;this.scene.remove(this.skybox);var n=new THREE.BoxGeometry(e.sizeX,this.boxSize,e.sizeZ);this.skybox=new THREE.Mesh(n,t),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox)}},{key:"setupStage",value:function(){var e=this;navigator.getVRDisplays().then(function(t){t.length>0&&(e.display=t[0],e.display.stageParameters&&e.setStageDimensions(e.display.stageParameters))})}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e){n(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.addEventListener("click",i.onMouseClick.bind(i),!1),i}return i(t,e),o(t,[{key:"onMouseClick",value:function(e){this.x=e.clientX/window.innerWidth*2-1,this.y=2*-(e.clientY/window.innerHeight)+1}}]),t}(THREE.Vector2);t["default"]=s},function(e,t,n){e.exports=n.p+"images/puzzles/cartoon (1).jpg"}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vVlJQdXp6bGUuYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA1NjA5OGI5YTBhNTE5NWYxNzJhMSIsIndlYnBhY2s6Ly8vLi9zcmMvamF2YXNjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL21vdXNlLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9pbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGciXSwibmFtZXMiOlsibW9kdWxlcyIsImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJjaHVua0lkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJzcmMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsImhvdEN1cnJlbnRIYXNoIiwiYXBwZW5kQ2hpbGQiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiY2FsbGJhY2siLCJYTUxIdHRwUmVxdWVzdCIsIkVycm9yIiwicmVxdWVzdCIsInJlcXVlc3RQYXRoIiwib3BlbiIsInRpbWVvdXQiLCJzZW5kIiwiZXJyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInVwZGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImUiLCJob3RDcmVhdGVSZXF1aXJlIiwibW9kdWxlSWQiLCJlbnN1cmUiLCJob3RTdGF0dXMiLCJob3RTZXRTdGF0dXMiLCJob3RDaHVua3NMb2FkaW5nIiwiZmluaXNoQ2h1bmtMb2FkaW5nIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwiaG90RW5zdXJlVXBkYXRlQ2h1bmsiLCJob3RXYWl0aW5nRmlsZXMiLCJob3RVcGRhdGVEb3dubG9hZGVkIiwiY2FsbCIsImZuIiwibWUiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJob3RDdXJyZW50UGFyZW50cyIsImNvbnNvbGUiLCJ3YXJuIiwibmFtZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FuRGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsImhvdENyZWF0ZU1vZHVsZSIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkRlY2xpbmVkIiwiX2Rpc3Bvc2VIYW5kbGVycyIsImFjY2VwdCIsImRlcCIsImkiLCJsZW5ndGgiLCJkZWNsaW5lIiwiZGlzcG9zZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJpZHgiLCJzcGxpY2UiLCJjaGVjayIsImhvdENoZWNrIiwiYXBwbHkiLCJob3RBcHBseSIsImwiLCJob3RTdGF0dXNIYW5kbGVycyIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwiZGF0YSIsImhvdEN1cnJlbnRNb2R1bGVEYXRhIiwibmV3U3RhdHVzIiwidG9Nb2R1bGVJZCIsImlkIiwiaXNOdW1iZXIiLCJob3RBcHBseU9uVXBkYXRlIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJob3RBdmFpbGlibGVGaWxlc01hcCIsImMiLCJob3RVcGRhdGVOZXdIYXNoIiwiaCIsImhvdENhbGxiYWNrIiwiaG90VXBkYXRlIiwiaG90QWRkVXBkYXRlQ2h1bmsiLCJtb3JlTW9kdWxlcyIsIm91dGRhdGVkTW9kdWxlcyIsIm9wdGlvbnMiLCJnZXRBZmZlY3RlZFN0dWZmIiwibW9kdWxlIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsInNsaWNlIiwicG9wIiwicGFyZW50SWQiLCJwYXJlbnQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJyZXN1bHQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzIiwiZXJyb3JIYW5kbGVyIiwiZGlzcG9zZUhhbmRsZXJzIiwiaiIsImNiIiwiY2hpbGQiLCJtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyIsImRlcGVuZGVuY3kiLCJlcnJvciIsImNhbGxiYWNrcyIsImV4cG9ydHMiLCJsb2FkZWQiLCJwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayIsInRoaXMiLCJ4IiwibSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nYW1lIiwiX2dhbWUyIiwiZ2FtZSIsImxvb3AiLCJyZW5kZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX21vdXNlIiwiX21vdXNlMiIsIkdhbWUiLCJyZW5kZXJlciIsIlRIUkVFIiwiV2ViR0xSZW5kZXJlciIsImFudGlhbGlhcyIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYm9keSIsImRvbUVsZW1lbnQiLCJzY2VuZSIsIlNjZW5lIiwiY2FtZXJhIiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJjb250cm9scyIsIlZSQ29udHJvbHMiLCJzdGFuZGluZyIsImVmZmVjdCIsIlZSRWZmZWN0Iiwic2V0U2l6ZSIsInBhcmFtcyIsImhpZGVCdXR0b24iLCJpc1VuZGlzdG9ydGVkIiwibWFuYWdlciIsIldlYlZSTWFuYWdlciIsInJheWNhc3RlciIsIlJheWNhc3RlciIsIm1vdXNlIiwib25UZXh0dXJlTG9hZGVkIiwiYmluZCIsIm9uUmVzaXplIiwic2V0dXBTdGFnZSIsInNldFN0YWdlRGltZW5zaW9ucyIsInBsYWNlUGllY2VzIiwibWVzaExpc3QiLCJsb2dGbGFnIiwiYm94U2l6ZSIsImxvYWRlciIsIlRleHR1cmVMb2FkZXIiLCJsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxhc3RSZW5kZXIiLCJkaXNwbGF5IiwidGV4dHVyZSIsIndyYXBTIiwiUmVwZWF0V3JhcHBpbmciLCJ3cmFwVCIsInJlcGVhdCIsImdlb21ldHJ5IiwiQm94R2VvbWV0cnkiLCJtYXRlcmlhbCIsIk1lc2hCYXNpY01hdGVyaWFsIiwibWFwIiwiY29sb3IiLCJzaWRlIiwiQmFja1NpZGUiLCJza3lib3giLCJNZXNoIiwicG9zaXRpb24iLCJ5IiwiYWRkIiwicGFuZWxHZW9tZXRyeSIsIlBsYW5lR2VvbWV0cnkiLCJwYW5lbCIsImNvbHVtbk51bWJlciIsImNhbnZhczEiLCJjb250ZXh0MSIsImdldENvbnRleHQiLCJmb250IiwiZmlsbFN0eWxlIiwiZmlsbFRleHQiLCJ0ZXh0dXJlMSIsIlRleHR1cmUiLCJuZWVkc1VwZGF0ZSIsIm1hdGVyaWFsMSIsIkRvdWJsZVNpZGUiLCJtZXNoMSIsImltYWdlT2JqIiwiSW1hZ2UiLCJjYW52YXMiLCJjb250ZXh0Iiwid3MiLCJ3aWR0aCIsImhzIiwiaGVpZ2h0Iiwic2NhbGUiLCJNYXRoIiwibWluIiwicGllY2VXaWR0aCIsInBpZWNlSGVpZ2h0IiwibWVzaCIsInNlbGYiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJ0cmFuc3BhcmVudCIsInRpbWVzdGFtcCIsInNldEZyb21DYW1lcmEiLCJpbnRlcnNlY3RzIiwiaW50ZXJzZWN0T2JqZWN0cyIsIm9iamVjdCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJzdGFnZSIsInJlbW92ZSIsInNpemVYIiwic2l6ZVoiLCJuYXZpZ2F0b3IiLCJnZXRWUkRpc3BsYXlzIiwidGhlbiIsImRpc3BsYXlzIiwic3RhZ2VQYXJhbWV0ZXJzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJNb3VzZSIsIl9USFJFRSRWZWN0b3IiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwib25Nb3VzZUNsaWNrIiwiZXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsIlZlY3RvcjIiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDT25CLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsU0FBQUMscUJBQUEsV0FDQUMsRUFBQUYsU0FBQUcsY0FBQSxTQUNBRCxHQUFBRSxLQUFBLGtCQUNBRixFQUFBRyxRQUFBLFFBQ0FILEVBQUFJLElBQUFDLEVBQUFDLEVBQUEsR0FBQVYsRUFBQSxJQUFBVyxFQUFBLGlCQUNBVixFQUFBVyxZQUFBUixHQUdBLFFBQUFTLEdBQUFDLEdBQ0Esc0JBQUFDLGdCQUNBLE1BQUFELEdBQUEsR0FBQUUsT0FBQSxzQkFDQSxLQUNBLEdBQUFDLEdBQUEsR0FBQUYsZ0JBQ0FHLEVBQUFULEVBQUFDLEVBQUEsR0FBQUMsRUFBQSxrQkFDQU0sR0FBQUUsS0FBQSxNQUFBRCxHQUFBLEdBQ0FELEVBQUFHLFFBQUEsSUFDQUgsRUFBQUksS0FBQSxNQUNJLE1BQUFDLEdBQ0osTUFBQVIsR0FBQVEsR0FFQUwsRUFBQU0sbUJBQUEsV0FDQSxPQUFBTixFQUFBTyxXQUNBLE9BQUFQLEVBQUFRLE9BRUFYLEVBQUEsR0FBQUUsT0FBQSx1QkFBQUUsRUFBQSxvQkFDSyxVQUFBRCxFQUFBUSxPQUVMWCxRQUNLLFVBQUFHLEVBQUFRLFFBQUEsTUFBQVIsRUFBQVEsT0FFTFgsRUFBQSxHQUFBRSxPQUFBLHVCQUFBRSxFQUFBLGlCQUNLLENBRUwsSUFDQSxHQUFBUSxHQUFBQyxLQUFBQyxNQUFBWCxF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QXNKLEVBQUFELFdBQUFyTyxPQUFBeU8sZUFBQUgsSUFBQXBQLEtBQUE4RixLQUNSbUIsR0FEUSxPQUVkYyxRQUFPb0MsaUJBQWtCLFFBQVNtRixFQUFLRSxhQUFhaEcsS0FBbEI4RixJQUE4QixHQUZsREEsRUptNEJqQixNQXRCQVQsR0FBVU8sRUFBT0MsR0FZakJ2SSxFQUFhc0ksSUFDVGhJLElBQUssZUFDTDdGLE1BQU8sU0l0M0JFa08sR0FHVjNKLEtBQUtDLEVBQU0wSixFQUFNQyxRQUFVM0gsT0FBT1EsV0FBZSxFQUFJLEVBQ3JEekMsS0FBS3dGLEVBQStDLElBQXZDbUUsRUFBTUUsUUFBVTVILE9BQU9TLGFBQW9CLE1KMDNCcEQ0RyxHSXA0QnVCekgsTUFBTWlJLFFKdTRCeENqSyxjSXY0Qm9CeUosR0oyNEJmLFNBQVNqTCxFQUFRd0IsRUFBUzVILEdLMzRCaENvRyxFQUFBd0IsUUFBQTVILEVBQUFDLEVBQUEiLCJmaWxlIjoiVlJQdXp6bGUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHR2YXIgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2sgPSB0aGlzW1wid2VicGFja0hvdFVwZGF0ZVwiXTtcbi8qKioqKiovIFx0dGhpc1tcIndlYnBhY2tIb3RVcGRhdGVcIl0gPSBcclxuLyoqKioqKi8gXHRmdW5jdGlvbiB3ZWJwYWNrSG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4vKioqKioqLyBcdFx0aWYocGFyZW50SG90VXBkYXRlQ2FsbGJhY2spIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG4vKioqKioqLyBcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbi8qKioqKiovIFx0XHRzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbi8qKioqKiovIFx0XHRzY3JpcHQuY2hhcnNldCA9IFwidXRmLThcIjtcclxuLyoqKioqKi8gXHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzXCI7XHJcbi8qKioqKiovIFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoY2FsbGJhY2spIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFwiTm8gYnJvd3NlciBzdXBwb3J0XCIpKTtcclxuLyoqKioqKi8gXHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbi8qKioqKiovIFx0XHRcdHZhciByZXF1ZXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiO1xyXG4vKioqKioqLyBcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4vKioqKioqLyBcdFx0XHRyZXF1ZXN0LnRpbWVvdXQgPSAxMDAwMDtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC5zZW5kKG51bGwpO1xyXG4vKioqKioqLyBcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0aWYocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHQvLyB0aW1lb3V0XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgdGltZWQgb3V0LlwiKSk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gbm8gdXBkYXRlIGF2YWlsYWJsZVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKCk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHQvLyBvdGhlciBmYWlsdXJlXHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gc3VjY2Vzc1xyXG4vKioqKioqLyBcdFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgdXBkYXRlID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBjYXRjaChlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYWxsYmFjayhlKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgdXBkYXRlKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL2JlZjQ1YjAvc3JjL3NoYXJlZC91dGlscy9jYW5EZWZpbmVQcm9wZXJ0eS5qc1xyXG4vKioqKioqLyBcdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwieFwiLCB7XHJcbi8qKioqKiovIFx0XHRcdGdldDogZnVuY3Rpb24oKSB7fVxyXG4vKioqKioqLyBcdFx0fSk7XHJcbi8qKioqKiovIFx0XHRjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XHJcbi8qKioqKiovIFx0fSBjYXRjaCh4KSB7XHJcbi8qKioqKiovIFx0XHQvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0dmFyIGhvdEFwcGx5T25VcGRhdGUgPSB0cnVlO1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiNTYwOThiOWEwYTUxOTVmMTcyYTFcIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdGlmKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XHJcbi8qKioqKiovIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKG1lLmhvdC5hY3RpdmUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPCAwKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlcXVlc3QgKyBcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgKyBtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhyZXF1ZXN0KTtcclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG5hbWUgaW4gX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCAoZnVuY3Rpb24obmFtZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9KG5hbWUpKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZuW25hbWVdID0gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZ1bmN0aW9uIGVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicmVhZHlcIilcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRob3RDaHVua3NMb2FkaW5nKys7XHJcbi8qKioqKiovIFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uZShjaHVua0lkLCBmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChudWxsLCBmbik7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBmaW5hbGx5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIFwiZVwiLCB7XHJcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHR2YWx1ZTogZW5zdXJlXHJcbi8qKioqKiovIFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0Zm4uZSA9IGVuc3VyZTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcdHJldHVybiBmbjtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdHZhciBob3QgPSB7XHJcbi8qKioqKiovIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcclxuLyoqKioqKi8gXHRcdFx0X2FjY2VwdGVkRGVwZW5kZW5jaWVzOiB7fSxcclxuLyoqKioqKi8gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcclxuLyoqKioqKi8gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXHJcbi8qKioqKiovIFx0XHRcdF9zZWxmRGVjbGluZWQ6IGZhbHNlLFxyXG4vKioqKioqLyBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gTW9kdWxlIEFQSVxyXG4vKioqKioqLyBcdFx0XHRhY3RpdmU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IGRlcDtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwibnVtYmVyXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2VcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxyXG4vKioqKioqLyBcdFx0XHRjaGVjazogaG90Q2hlY2ssXHJcbi8qKioqKiovIFx0XHRcdGFwcGx5OiBob3RBcHBseSxcclxuLyoqKioqKi8gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIWwpIHJldHVybiBob3RTdGF0dXM7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxyXG4vKioqKioqLyBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gaG90O1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzID0gXCJpZGxlXCI7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG4vKioqKioqLyBcdFx0aG90U3RhdHVzID0gbmV3U3RhdHVzO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXHJcbi8qKioqKiovIFx0dmFyIGhvdFdhaXRpbmdGaWxlcyA9IDA7XHJcbi8qKioqKiovIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xyXG4vKioqKioqLyBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXHJcbi8qKioqKiovIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XHJcbi8qKioqKiovIFx0XHR2YXIgaXNOdW1iZXIgPSAoK2lkKSArIFwiXCIgPT09IGlkO1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5LCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0aWYoaG90U3RhdHVzICE9PSBcImlkbGVcIikgdGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XHJcbi8qKioqKiovIFx0XHRpZih0eXBlb2YgYXBwbHkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gYXBwbHk7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcclxuLyoqKioqKi8gXHRcdGhvdERvd25sb2FkTWFuaWZlc3QoZnVuY3Rpb24oZXJyLCB1cGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcclxuLyoqKioqKi8gXHRcdFx0aWYoIXVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgbnVsbCk7XHJcbi8qKioqKiovIFx0XHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdXBkYXRlLmMubGVuZ3RoOyBpKyspXHJcbi8qKioqKiovIFx0XHRcdFx0aG90QXZhaWxpYmxlRmlsZXNNYXBbdXBkYXRlLmNbaV1dID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRob3RDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4vKioqKioqLyBcdFx0XHRob3RVcGRhdGUgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIGNodW5rSWQgPSAwO1xyXG4vKioqKioqLyBcdFx0XHR7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZS1ibG9ja3NcclxuLyoqKioqKi8gXHRcdFx0XHQvKmdsb2JhbHMgY2h1bmtJZCAqL1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIgJiYgaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH0pO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RBZGRVcGRhdGVDaHVuayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcdGlmKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKSB7XHJcbi8qKioqKiovIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0aG90V2FpdGluZ0ZpbGVzKys7XHJcbi8qKioqKiovIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdFVwZGF0ZURvd25sb2FkZWQoKSB7XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJyZWFkeVwiKTtcclxuLyoqKioqKi8gXHRcdHZhciBjYWxsYmFjayA9IGhvdENhbGxiYWNrO1xyXG4vKioqKioqLyBcdFx0aG90Q2FsbGJhY2sgPSBudWxsO1xyXG4vKioqKioqLyBcdFx0aWYoIWNhbGxiYWNrKSByZXR1cm47XHJcbi8qKioqKiovIFx0XHRpZihob3RBcHBseU9uVXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdEFwcGx5KGhvdEFwcGx5T25VcGRhdGUsIGNhbGxiYWNrKTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucywgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJhcHBseSgpIGlzIG9ubHkgYWxsb3dlZCBpbiByZWFkeSBzdGF0dXNcIik7XHJcbi8qKioqKiovIFx0XHRpZih0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gb3B0aW9ucztcclxuLyoqKioqKi8gXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIGlmKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbbW9kdWxlXTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4vKioqKioqLyBcdFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm4gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgKyBtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZUlkID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgcGFyZW50ID0gaW5zdGFsbGVkTW9kdWxlc1twYXJlbnRJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArIG1vZHVsZUlkICsgXCIgaW4gXCIgKyBwYXJlbnRJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgPj0gMCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cXVldWUucHVzaChwYXJlbnRJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBbb3V0ZGF0ZWRNb2R1bGVzLCBvdXRkYXRlZERlcGVuZGVuY2llc107XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGEuaW5kZXhPZihpdGVtKSA8IDApXHJcbi8qKioqKiovIFx0XHRcdFx0XHRhLnB1c2goaXRlbSk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbi8qKioqKiovIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcclxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgcmVzdWx0ID0gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIXJlc3VsdCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0aWYocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3VsdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdFswXSk7XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiByZXN1bHRbMV0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHRbMV0sIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sIHJlc3VsdFsxXVttb2R1bGVJZF0pO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gU3RvcmUgc2VsZiBhY2NlcHRlZCBvdXRkYXRlZCBtb2R1bGVzIHRvIHJlcXVpcmUgdGhlbSBsYXRlciBieSB0aGUgbW9kdWxlIHN5c3RlbVxyXG4vKioqKioqLyBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XHJcbi8qKioqKiovIFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXHJcbi8qKioqKiovIFx0XHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XHJcbi8qKioqKiovIFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuLyoqKioqKi8gXHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbi8qKioqKiovIFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0aWYoIW1vZHVsZSkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHZhciBkYXRhID0ge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIENhbGwgZGlzcG9zZSBoYW5kbGVyc1xyXG4vKioqKioqLyBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xyXG4vKioqKioqLyBcdFx0XHRcdGNiKGRhdGEpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXHJcbi8qKioqKiovIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxyXG4vKioqKioqLyBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2hpbGQgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZS5jaGlsZHJlbltqXV07XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIWNoaWxkKSBjb250aW51ZTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgaWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBhcHBsaWVkVXBkYXRlW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcclxuLyoqKioqKi8gXHRcdHZhciBlcnJvciA9IG51bGw7XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihjYWxsYmFja3MuaW5kZXhPZihjYikgPj0gMCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBjYiA9IGNhbGxiYWNrc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiKG91dGRhdGVkRGVwZW5kZW5jaWVzKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlSWQgPSBpdGVtLm1vZHVsZTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHR9IGNhdGNoKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBpdGVtLmVycm9ySGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSBpZighZXJyb3IpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcclxuLyoqKioqKi8gXHRcdGlmKGVycm9yKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFNldFN0YXR1cyhcImZhaWxcIik7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnJvcik7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4vKioqKioqLyBcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4vKioqKioqLyBcdFx0XHRwYXJlbnRzOiBob3RDdXJyZW50UGFyZW50cyxcbi8qKioqKiovIFx0XHRcdGNoaWxkcmVuOiBbXVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvcHVibGljL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKDApKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2dhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9nYW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dhbWUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBnYW1lID0gbmV3IF9nYW1lMi5kZWZhdWx0KCk7XG5cdFxuXHR2YXIgbG9vcCA9IGZ1bmN0aW9uIGxvb3AoKSB7XG5cdCAgICBnYW1lLnJlbmRlcigpO1xuXHQgICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApXG5cdH07XG5cdGxvb3AoKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX21vdXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfbW91c2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW91c2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgR2FtZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEdhbWUoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWUpO1xuXHRcblx0ICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XG5cdCAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblx0XG5cdCAgICAgICAgLy8gQXBwZW5kIHRoZSBjYW52YXMgZWxlbWVudCBjcmVhdGVkIGJ5IHRoZSByZW5kZXJlciB0byBkb2N1bWVudCBib2R5IGVsZW1lbnQuXG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXHRcblx0ICAgICAgICAvLyBDcmVhdGUgYSB0aHJlZS5qcyBzY2VuZS5cblx0ICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cdFxuXHQgICAgICAgIC8vIENyZWF0ZSBhIHRocmVlLmpzIGNhbWVyYS5cblx0ICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDApO1xuXHRcblx0ICAgICAgICAvLyBBcHBseSBWUiBoZWFkc2V0IHBvc2l0aW9uYWwgZGF0YSB0byBjYW1lcmEuXG5cdCAgICAgICAgdGhpcy5jb250cm9scyA9IG5ldyBUSFJFRS5WUkNvbnRyb2xzKHRoaXMuY2FtZXJhKTtcblx0ICAgICAgICAvL+ermeeri+Wnv+aAgVxuXHQgICAgICAgIHRoaXMuY29udHJvbHMuc3RhbmRpbmcgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFRIUkVFLlZSRWZmZWN0KHRoaXMucmVuZGVyZXIpO1xuXHQgICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdFxuXHQgICAgICAgIC8vIENyZWF0ZSBhIFZSIG1hbmFnZXIgaGVscGVyIHRvIGVudGVyIGFuZCBleGl0IFZSIG1vZGUuXG5cdCAgICAgICAgLy/mjInpkq7lkozlhajlsY/mqKHlvI/nrqHnkIZcblx0ICAgICAgICB2YXIgcGFyYW1zID0ge1xuXHQgICAgICAgICAgICBoaWRlQnV0dG9uOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXG5cdCAgICAgICAgICAgIGlzVW5kaXN0b3J0ZWQ6IGZhbHNlIC8vIERlZmF1bHQ6IGZhbHNlLlxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFdlYlZSTWFuYWdlcih0aGlzLnJlbmRlcmVyLCB0aGlzLmVmZmVjdCwgcGFyYW1zKTtcblx0XG5cdCAgICAgICAgLy8gcmF5Y2FzdGVyXG5cdCAgICAgICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG5cdCAgICAgICAgdGhpcy5tb3VzZSA9IG5ldyBfbW91c2UyLmRlZmF1bHQoKTtcblx0ICAgICAgICAvL2JpbmQgdGhpc1xuXHQgICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkID0gdGhpcy5vblRleHR1cmVMb2FkZWQuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNldHVwU3RhZ2UgPSB0aGlzLnNldHVwU3RhZ2UuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNldFN0YWdlRGltZW5zaW9ucyA9IHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zLmJpbmQodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wbGFjZVBpZWNlcyA9IHRoaXMucGxhY2VQaWVjZXMuYmluZCh0aGlzKTtcblx0ICAgICAgICAvL1xuXHQgICAgICAgIHRoaXMubWVzaExpc3QgPSBbXTtcblx0ICAgICAgICB0aGlzLmxvZ0ZsYWcgPSB0cnVlO1xuXHQgICAgICAgIC8vIEFkZCBhIHJlcGVhdGluZyBncmlkIGFzIGEgc2t5Ym94LlxuXHQgICAgICAgIHRoaXMuYm94U2l6ZSA9IDIwO1xuXHQgICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcblx0ICAgICAgICB0aGlzLmxvYWRlci5sb2FkKFwicHVibGljL2ltYWdlcy9ib3gucG5nXCIsIHRoaXMub25UZXh0dXJlTG9hZGVkKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplLCB0cnVlKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInZyZGlzcGxheXByZXNlbnRjaGFuZ2VcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSk7XG5cdCAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gMDtcblx0ICAgICAgICB0aGlzLmRpc3BsYXkgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhHYW1lLCBbe1xuXHQgICAgICAgIGtleTogXCJvblRleHR1cmVMb2FkZWRcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25UZXh0dXJlTG9hZGVkKHRleHR1cmUpIHtcblx0ICAgICAgICAgICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuXHQgICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cdCAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnNldCh0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5ib3hTaXplLCB0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSk7XG5cdCAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG5cdCAgICAgICAgICAgICAgICBtYXA6IHRleHR1cmUsXG5cdCAgICAgICAgICAgICAgICBjb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDEpXCIsXG5cdCAgICAgICAgICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIC8vIEFsaWduIHRoZSBza3lib3ggdG8gdGhlIGZsb29yICh3aGljaCBpcyBhdCB5PTApLlxuXHQgICAgICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdCAgICAgICAgICAgIHRoaXMuc2t5Ym94LnBvc2l0aW9uLnkgPSB0aGlzLmJveFNpemUgLyAyO1xuXHQgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveCk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgcGFuZWxHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KDIsIDEpO1xuXHQgICAgICAgICAgICB2YXIgcGFuZWwgPSBuZXcgVEhSRUUuTWVzaChwYW5lbEdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdCAgICAgICAgICAgIHBhbmVsLnBvc2l0aW9uLnNldCgwLCAyLjUsIC0xLjk5OSk7XG5cdCAgICAgICAgICAgIC8vIEFkZCBjdWJlIG1lc2ggdG8geW91ciB0aHJlZS5qcyBzY2VuZVxuXHQgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChwYW5lbCk7XG5cdCAgICAgICAgICAgIHRoaXMucGxhY2VQaWVjZXMoKTtcblx0XG5cdCAgICAgICAgICAgIC8vIEZvciBoaWdoIGVuZCBWUiBkZXZpY2VzIGxpa2UgVml2ZSBhbmQgT2N1bHVzLCB0YWtlIGludG8gYWNjb3VudCB0aGUgc3RhZ2Vcblx0ICAgICAgICAgICAgLy8gcGFyYW1ldGVycyBwcm92aWRlZC5cblx0ICAgICAgICAgICAgLy/lnKjpq5jnq6/nmoTorr7lpIfkuIrvvIzopoHogIPomZHliLDorr7lpIfmj5DkvpvnmoTlnLrmma/kv6Hmga/nmoTmm7TmlrDjgIJcblx0ICAgICAgICAgICAgdGhpcy5zZXR1cFN0YWdlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJwbGFjZVBpZWNlc1wiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGFjZVBpZWNlcygpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuY29sdW1uTnVtYmVyID0gNDtcblx0XG5cdCAgICAgICAgICAgIHZhciBjYW52YXMxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0ICAgICAgICAgICAgdmFyIGNvbnRleHQxID0gY2FudmFzMS5nZXRDb250ZXh0KFwiMmRcIik7XG5cdCAgICAgICAgICAgIGNvbnRleHQxLmZvbnQgPSBcIkJvbGQgNDBweCBBcmlhbFwiO1xuXHQgICAgICAgICAgICBjb250ZXh0MS5maWxsU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsMC45NSlcIjtcblx0ICAgICAgICAgICAgY29udGV4dDEuZmlsbFRleHQoXCJIZWxsbywgd29ybGQhXCIsIDUwLCA1MCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBjYW52YXMgY29udGVudHMgd2lsbCBiZSB1c2VkIGZvciBhIHRleHR1cmVcblx0ICAgICAgICAgICAgdmFyIHRleHR1cmUxID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzMSk7XG5cdCAgICAgICAgICAgIHRleHR1cmUxLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICAgIHZhciBtYXRlcmlhbDEgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBtYXA6IHRleHR1cmUxLCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlIH0pO1xuXHQgICAgICAgICAgICAvLyBtYXRlcmlhbDEudHJhbnNwYXJlbnQgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgbWVzaDEgPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMCwgNSksIG1hdGVyaWFsMSk7XG5cdCAgICAgICAgICAgIG1lc2gxLnBvc2l0aW9uLnNldCgwLCAyLCA5KTtcblx0ICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaDEpO1xuXHRcblx0ICAgICAgICAgICAgLy8gbG9hZCBhbiBpbWFnZVxuXHQgICAgICAgICAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTtcblx0ICAgICAgICAgICAgaW1hZ2VPYmouc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0ICAgICAgICAgICAgLy8gdGhpcy5jb2x1bW5OdW1iZXIgPSAyXG5cdCAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHQgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cdCAgICAgICAgICAgIHZhciB3cyA9IGNhbnZhcy53aWR0aCAvIDEuNSAvIGltYWdlT2JqLndpZHRoO1xuXHQgICAgICAgICAgICB2YXIgaHMgPSBjYW52YXMuaGVpZ2h0IC8gMS41IC8gaW1hZ2VPYmouaGVpZ2h0O1xuXHQgICAgICAgICAgICB0aGlzLnNjYWxlID0gTWF0aC5taW4od3MsIGhzKTtcblx0ICAgICAgICAgICAgdGhpcy5waWVjZVdpZHRoID0gaW1hZ2VPYmoud2lkdGggLyB0aGlzLmNvbHVtbk51bWJlcjtcblx0ICAgICAgICAgICAgdGhpcy5waWVjZUhlaWdodCA9IGltYWdlT2JqLmhlaWdodCAvIHRoaXMuY29sdW1uTnVtYmVyO1xuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBpZWNlV2lkdGgsdGhpcy5waWVjZUhlaWdodClcblx0ICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB2b2lkIDAsXG5cdCAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHZvaWQgMCxcblx0ICAgICAgICAgICAgICAgIG1lc2ggPSB2b2lkIDAsXG5cdCAgICAgICAgICAgICAgICBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgaW1hZ2VPYmoub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbHVtbk51bWJlcjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxmLmNvbHVtbk51bWJlcjsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRleHQuY2xlYXJSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FudmFzIGNvbnRlbnRzIHdpbGwgYmUgdXNlZCBmb3IgYSB0ZXh0dXJlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGlzIGxvYWRlZCwgdGhpcyBmdW5jdGlvbiBleGVjdXRlc1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbWcuc3JjKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNjYWxlKHNlbGYuc2NhbGUsIHRoaXMuc2NhbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZU9iaiwgaSAqIHNlbGYucGllY2VXaWR0aCwgaiAqIHNlbGYucGllY2VIZWlnaHQsIHNlbGYucGllY2VXaWR0aCwgc2VsZi5waWVjZUhlaWdodCwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHR1cmUpIC8vIGNoZWNrcyBpZiB0ZXh0dXJlIGV4aXN0c1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IG1hcDogdGV4dHVyZSwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSB9KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgzLCAzKSwgbWF0ZXJpYWwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldChpICogMywgMyAqIHNlbGYuY29sdW1uTnVtYmVyIC0gaiAqIDMsIC05KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tZXNoTGlzdC5wdXNoKG1lc2guaWQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNjZW5lLmFkZChtZXNoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHRoaXMuc2NlbmUpXG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcih0aW1lc3RhbXApIHtcblx0ICAgICAgICAgICAgLy8gdmFyIGRlbHRhID0gTWF0aC5taW4odGltZXN0YW1wIC0gdGhpcy5sYXN0UmVuZGVyLCA1MDApXG5cdCAgICAgICAgICAgIHRoaXMubGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcblx0ICAgICAgICAgICAgLy/lpITnkIbpvKDmoIfngrnlh7tcblx0ICAgICAgICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmNhbWVyYSk7XG5cdCAgICAgICAgICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyh0aGlzLnNjZW5lLmNoaWxkcmVuLCBmYWxzZSk7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50ZXJzZWN0cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgLy8gaWYoaW50ZXJzZWN0c1sgaSBdLm9iamVjdC5pZCBpbiB0aGlzLm1lc2hMaXN0KVxuXHQgICAgICAgICAgICAgICAgaW50ZXJzZWN0c1tpXS5vYmplY3QubWF0ZXJpYWwuY29sb3Iuc2V0KDB4ZmYwMDAwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1lc2hMaXN0KVxuXHQgICAgICAgICAgICAvLyBsZXQgaW50ZXJzZWN0TGlzdCA9IGludGVyc2VjdHMubWFwKF89Pl8ub2JqZWN0KVxuXHQgICAgICAgICAgICAvLyBpZih0aGlzLmxvZ0ZsYWcgJiYgaW50ZXJzZWN0TGlzdC5sZW5ndGghPT0wKXtcblx0ICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGludGVyc2VjdExpc3QpXG5cdCAgICAgICAgICAgIC8vIH1cblx0ICAgICAgICAgICAgLy8gZm9yKGxldCBtZXNoIG9mIHRoaXMubWVzaExpc3Qpe1xuXHQgICAgICAgICAgICAvLyAgICAgaWYobWVzaCBpbiBpbnRlcnNlY3RMaXN0KXtcblx0ICAgICAgICAgICAgLy8gICAgICAgICBtZXNoLm1hdGVyaWFsLmNvbG9yLnNldCgweGZmMDAwMClcblx0ICAgICAgICAgICAgLy8gICAgIH1cblx0ICAgICAgICAgICAgLy8gfVxuXHQgICAgICAgICAgICAvLyAgIOeri+aWueS9k+eahOaXi+i9rFxuXHQgICAgICAgICAgICAvLyAgIHRoaXMuY3ViZS5yb3RhdGlvbi55ICs9IGRlbHRhICogMC4wMDA2O1xuXHRcblx0ICAgICAgICAgICAgLy8gVXBkYXRlIFZSIGhlYWRzZXQgcG9zaXRpb24gYW5kIGFwcGx5IHRvIGNhbWVyYS5cblx0ICAgICAgICAgICAgLy/mm7TmlrDojrflj5ZITUTnmoTkv6Hmga9cblx0ICAgICAgICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXNoTGlzdC5sZW5ndGgpXG5cdCAgICAgICAgICAgIC8vIGlmKHRoaXMubWVzaExpc3QubGVuZ3RoIT09MCl7XG5cdCAgICAgICAgICAgIC8vIHRoaXMubWVzaExpc3RbMF0ucm90YXRpb24ueSArPSAwLjJcblx0ICAgICAgICAgICAgLy8gdGhpcy5tZXNoTGlzdFszXS5yb3RhdGlvbi55ICs9IDAuMlxuXHQgICAgICAgICAgICAvLyB0aGlzLm1lc2hMaXN0WzBdLnJvdGF0aW9uLnkgKz0gMC4yXG5cdCAgICAgICAgICAgIC8vIH1cblx0XG5cdCAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgc2NlbmUgdGhyb3VnaCB0aGUgbWFuYWdlci5cblx0ICAgICAgICAgICAgLy/ov5vooYxjYW1lcmHmm7TmlrDlkozlnLrmma/nu5jliLZcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSwgdGltZXN0YW1wKTtcblx0ICAgICAgICAgICAgLy8gcmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYSlcblx0XG5cdCAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJvblJlc2l6ZVwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZShlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdCAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xuXHQgICAgICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJzZXRTdGFnZURpbWVuc2lvbnNcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3RhZ2VEaW1lbnNpb25zKHN0YWdlKSB7XG5cdCAgICAgICAgICAgIC8vIE1ha2UgdGhlIHNreWJveCBmaXQgdGhlIHN0YWdlLlxuXHQgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLnNreWJveC5tYXRlcmlhbDtcblx0ICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5za3lib3gpO1xuXHRcblx0ICAgICAgICAgICAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxuXHQgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIHRoaXMuYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopO1xuXHQgICAgICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXG5cdCAgICAgICAgICAgIHRoaXMuc2t5Ym94LnBvc2l0aW9uLnkgPSB0aGlzLmJveFNpemUgLyAyO1xuXHQgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQbGFjZSB0aGUgY3ViZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY2VuZSwgYXQgdXNlciBoZWlnaHQuXG5cdCAgICAgICAgICAgIC8vICAgY3ViZS5wb3NpdGlvbi5zZXQoMCwgY29udHJvbHMudXNlckhlaWdodCwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJzZXR1cFN0YWdlXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwU3RhZ2UoKSB7XG5cdCAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKGZ1bmN0aW9uIChkaXNwbGF5cykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXlzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXkgPSBkaXNwbGF5c1swXTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YWdlRGltZW5zaW9ucyhzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gR2FtZTtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gR2FtZTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBNb3VzZSA9IGZ1bmN0aW9uIChfVEhSRUUkVmVjdG9yKSB7XG5cdCAgICBfaW5oZXJpdHMoTW91c2UsIF9USFJFRSRWZWN0b3IpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1vdXNlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlKTtcblx0XG5cdCAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vdXNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW91c2UpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RoaXMub25Nb3VzZUNsaWNrLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoTW91c2UsIFt7XG5cdCAgICAgICAga2V5OiBcIm9uTW91c2VDbGlja1wiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1vdXNlQ2xpY2soZXZlbnQpIHtcblx0ICAgICAgICAgICAgLy8gY2FsY3VsYXRlIG1vdXNlIHBvc2l0aW9uIGluIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGVzXG5cdCAgICAgICAgICAgIC8vICgtMSB0byArMSkgZm9yIGJvdGggY29tcG9uZW50c1xuXHQgICAgICAgICAgICB0aGlzLnggPSBldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGggKiAyIC0gMTtcblx0ICAgICAgICAgICAgdGhpcy55ID0gLShldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0KSAqIDIgKyAxO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gTW91c2U7XG5cdH0oVEhSRUUuVmVjdG9yMik7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBNb3VzZTtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJpbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGdcIjtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogVlJQdXp6bGUuYnVuZGxlLmpzXG4gKiovIiwiIFx0dmFyIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrID0gdGhpc1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4gXHR0aGlzW1wid2VicGFja0hvdFVwZGF0ZVwiXSA9IFxyXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuIFx0XHRpZihwYXJlbnRIb3RVcGRhdGVDYWxsYmFjaykgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG4gXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gXHRcdHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuIFx0XHRzY3JpcHQuY2hhcnNldCA9IFwidXRmLThcIjtcclxuIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xyXG4gXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRNYW5pZmVzdChjYWxsYmFjaykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKVxyXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIk5vIGJyb3dzZXIgc3VwcG9ydFwiKSk7XHJcbiBcdFx0dHJ5IHtcclxuIFx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiBcdFx0XHR2YXIgcmVxdWVzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzb25cIjtcclxuIFx0XHRcdHJlcXVlc3Qub3BlbihcIkdFVFwiLCByZXF1ZXN0UGF0aCwgdHJ1ZSk7XHJcbiBcdFx0XHRyZXF1ZXN0LnRpbWVvdXQgPSAxMDAwMDtcclxuIFx0XHRcdHJlcXVlc3Quc2VuZChudWxsKTtcclxuIFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbiBcdFx0fVxyXG4gXHRcdHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiBcdFx0XHRpZihyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcclxuIFx0XHRcdGlmKHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XHJcbiBcdFx0XHRcdC8vIHRpbWVvdXRcclxuIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgdGltZWQgb3V0LlwiKSk7XHJcbiBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xyXG4gXHRcdFx0XHQvLyBubyB1cGRhdGUgYXZhaWxhYmxlXHJcbiBcdFx0XHRcdGNhbGxiYWNrKCk7XHJcbiBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgIT09IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyAhPT0gMzA0KSB7XHJcbiBcdFx0XHRcdC8vIG90aGVyIGZhaWx1cmVcclxuIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XHJcbiBcdFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0XHQvLyBzdWNjZXNzXHJcbiBcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gXHRcdFx0XHR9IGNhdGNoKGUpIHtcclxuIFx0XHRcdFx0XHRjYWxsYmFjayhlKTtcclxuIFx0XHRcdFx0XHRyZXR1cm47XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgdXBkYXRlKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9O1xyXG4gXHR9XHJcblxuIFx0XHJcbiBcdFxyXG4gXHQvLyBDb3BpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iZWY0NWIwL3NyYy9zaGFyZWQvdXRpbHMvY2FuRGVmaW5lUHJvcGVydHkuanNcclxuIFx0dmFyIGNhbkRlZmluZVByb3BlcnR5ID0gZmFsc2U7XHJcbiBcdHRyeSB7XHJcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInhcIiwge1xyXG4gXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHt9XHJcbiBcdFx0fSk7XHJcbiBcdFx0Y2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xyXG4gXHR9IGNhdGNoKHgpIHtcclxuIFx0XHQvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcclxuIFx0fVxyXG4gXHRcclxuIFx0dmFyIGhvdEFwcGx5T25VcGRhdGUgPSB0cnVlO1xyXG4gXHR2YXIgaG90Q3VycmVudEhhc2ggPSBcIjU2MDk4YjlhMGE1MTk1ZjE3MmExXCI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0dmFyIGhvdEN1cnJlbnRNb2R1bGVEYXRhID0ge307XHJcbiBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRpZighbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xyXG4gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcclxuIFx0XHRcdGlmKG1lLmhvdC5hY3RpdmUpIHtcclxuIFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XSkge1xyXG4gXHRcdFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA8IDApXHJcbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdFx0aWYobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA8IDApXHJcbiBcdFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xyXG4gXHRcdFx0XHR9IGVsc2UgaG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVxdWVzdCArIFwiKSBmcm9tIGRpc3Bvc2VkIG1vZHVsZSBcIiArIG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcclxuIFx0XHRcdH1cclxuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHJlcXVlc3QpO1xyXG4gXHRcdH07XHJcbiBcdFx0Zm9yKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChfX3dlYnBhY2tfcmVxdWlyZV9fLCBuYW1lKSkge1xyXG4gXHRcdFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4gXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgKGZ1bmN0aW9uKG5hbWUpIHtcclxuIFx0XHRcdFx0XHRcdHJldHVybiB7XHJcbiBcdFx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuIFx0XHRcdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuIFx0XHRcdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuIFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuIFx0XHRcdFx0XHRcdFx0fSxcclxuIFx0XHRcdFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gXHRcdFx0XHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcclxuIFx0XHRcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdFx0fTtcclxuIFx0XHRcdFx0XHR9KG5hbWUpKSk7XHJcbiBcdFx0XHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRcdFx0Zm5bbmFtZV0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHRmdW5jdGlvbiBlbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcclxuIFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJyZWFkeVwiKVxyXG4gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xyXG4gXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lKGNodW5rSWQsIGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobnVsbCwgZm4pO1xyXG4gXHRcdFx0XHR9IGZpbmFsbHkge1xyXG4gXHRcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFxyXG4gXHRcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XHJcbiBcdFx0XHRcdFx0aG90Q2h1bmtzTG9hZGluZy0tO1xyXG4gXHRcdFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuIFx0XHRcdFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0XHRpZihob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4gXHRcdFx0XHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9KTtcclxuIFx0XHR9XHJcbiBcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgXCJlXCIsIHtcclxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuIFx0XHRcdFx0dmFsdWU6IGVuc3VyZVxyXG4gXHRcdFx0fSk7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdGZuLmUgPSBlbnN1cmU7XHJcbiBcdFx0fVxyXG4gXHRcdHJldHVybiBmbjtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHR2YXIgaG90ID0ge1xyXG4gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxyXG4gXHRcdFx0X2FjY2VwdGVkRGVwZW5kZW5jaWVzOiB7fSxcclxuIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXHJcbiBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcclxuIFx0XHRcdF9zZWxmRGVjbGluZWQ6IGZhbHNlLFxyXG4gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXHJcbiBcdFxyXG4gXHRcdFx0Ly8gTW9kdWxlIEFQSVxyXG4gXHRcdFx0YWN0aXZlOiB0cnVlLFxyXG4gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSB0cnVlO1xyXG4gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIilcclxuIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IGRlcDtcclxuIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxyXG4gXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXHJcbiBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjaztcclxuIFx0XHRcdFx0ZWxzZVxyXG4gXHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwXSA9IGNhbGxiYWNrO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGRlY2xpbmU6IGZ1bmN0aW9uKGRlcCkge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcclxuIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm51bWJlclwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XHJcbiBcdFx0XHRcdGVsc2VcclxuIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRcdFx0aG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1tkZXBbaV1dID0gdHJ1ZTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdHZhciBpZHggPSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5pbmRleE9mKGNhbGxiYWNrKTtcclxuIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHJcbiBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxyXG4gXHRcdFx0Y2hlY2s6IGhvdENoZWNrLFxyXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxyXG4gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XHJcbiBcdFx0XHRcdGlmKCFsKSByZXR1cm4gaG90U3RhdHVzO1xyXG4gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XHJcbiBcdFx0XHRcdHZhciBpZHggPSBob3RTdGF0dXNIYW5kbGVycy5pbmRleE9mKGwpO1xyXG4gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcclxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxyXG4gXHRcdFx0ZGF0YTogaG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdXHJcbiBcdFx0fTtcclxuIFx0XHRyZXR1cm4gaG90O1xyXG4gXHR9XHJcbiBcdFxyXG4gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcclxuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcclxuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgaG90U3RhdHVzSGFuZGxlcnMubGVuZ3RoOyBpKyspXHJcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXHJcbiBcdHZhciBob3RXYWl0aW5nRmlsZXMgPSAwO1xyXG4gXHR2YXIgaG90Q2h1bmtzTG9hZGluZyA9IDA7XHJcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuIFx0dmFyIGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbiBcdHZhciBob3RBdmFpbGlibGVGaWxlc01hcCA9IHt9O1xyXG4gXHR2YXIgaG90Q2FsbGJhY2s7XHJcbiBcdFxyXG4gXHQvLyBUaGUgdXBkYXRlIGluZm9cclxuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIHRvTW9kdWxlSWQoaWQpIHtcclxuIFx0XHR2YXIgaXNOdW1iZXIgPSAoK2lkKSArIFwiXCIgPT09IGlkO1xyXG4gXHRcdHJldHVybiBpc051bWJlciA/ICtpZCA6IGlkO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RDaGVjayhhcHBseSwgY2FsbGJhY2spIHtcclxuIFx0XHRpZihob3RTdGF0dXMgIT09IFwiaWRsZVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJjaGVjaygpIGlzIG9ubHkgYWxsb3dlZCBpbiBpZGxlIHN0YXR1c1wiKTtcclxuIFx0XHRpZih0eXBlb2YgYXBwbHkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGZhbHNlO1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBhcHBseTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbiBcdFx0XHR9O1xyXG4gXHRcdH1cclxuIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcclxuIFx0XHRob3REb3dubG9hZE1hbmlmZXN0KGZ1bmN0aW9uKGVyciwgdXBkYXRlKSB7XHJcbiBcdFx0XHRpZihlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4gXHRcdFx0aWYoIXVwZGF0ZSkge1xyXG4gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4gXHRcdFx0XHRjYWxsYmFjayhudWxsLCBudWxsKTtcclxuIFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0fVxyXG4gXHRcclxuIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbiBcdFx0XHRob3RBdmFpbGlibGVGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbiBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdXBkYXRlLmMubGVuZ3RoOyBpKyspXHJcbiBcdFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwW3VwZGF0ZS5jW2ldXSA9IHRydWU7XHJcbiBcdFx0XHRob3RVcGRhdGVOZXdIYXNoID0gdXBkYXRlLmg7XHJcbiBcdFxyXG4gXHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuIFx0XHRcdGhvdENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcclxuIFx0XHRcdHZhciBjaHVua0lkID0gMDtcclxuIFx0XHRcdHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1sb25lLWJsb2Nrc1xyXG4gXHRcdFx0XHQvKmdsb2JhbHMgY2h1bmtJZCAqL1xyXG4gXHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuIFx0XHRcdH1cclxuIFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIgJiYgaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH0pO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RBZGRVcGRhdGVDaHVuayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdIHx8ICFob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSlcclxuIFx0XHRcdHJldHVybjtcclxuIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcdGlmKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcclxuIFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuIFx0XHR9XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcclxuIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xyXG4gXHRcdFx0aG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuIFx0XHR9XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdFVwZGF0ZURvd25sb2FkZWQoKSB7XHJcbiBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XHJcbiBcdFx0dmFyIGNhbGxiYWNrID0gaG90Q2FsbGJhY2s7XHJcbiBcdFx0aG90Q2FsbGJhY2sgPSBudWxsO1xyXG4gXHRcdGlmKCFjYWxsYmFjaykgcmV0dXJuO1xyXG4gXHRcdGlmKGhvdEFwcGx5T25VcGRhdGUpIHtcclxuIFx0XHRcdGhvdEFwcGx5KGhvdEFwcGx5T25VcGRhdGUsIGNhbGxiYWNrKTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xyXG4gXHRcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuIFx0XHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2godG9Nb2R1bGVJZChpZCkpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRjYWxsYmFjayhudWxsLCBvdXRkYXRlZE1vZHVsZXMpO1xyXG4gXHRcdH1cclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucywgY2FsbGJhY2spIHtcclxuIFx0XHRpZihob3RTdGF0dXMgIT09IFwicmVhZHlcIikgdGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xyXG4gXHRcdGlmKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcclxuIFx0XHRcdGNhbGxiYWNrID0gb3B0aW9ucztcclxuIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuIFx0XHR9IGVsc2UgaWYob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIikge1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbiBcdFx0XHR9O1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRvcHRpb25zID0ge307XHJcbiBcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycikge1xyXG4gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuIFx0XHRcdH07XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZSkge1xyXG4gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFttb2R1bGVdO1xyXG4gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbiBcdFxyXG4gXHRcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XHJcbiBcdFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdGlmKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4gXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRpZihtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcclxuIFx0XHRcdFx0XHRyZXR1cm4gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgKyBtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0aWYobW9kdWxlSWQgPT09IDApIHtcclxuIFx0XHRcdFx0XHRyZXR1cm47XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1vZHVsZS5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XHJcbiBcdFx0XHRcdFx0dmFyIHBhcmVudCA9IGluc3RhbGxlZE1vZHVsZXNbcGFyZW50SWRdO1xyXG4gXHRcdFx0XHRcdGlmKHBhcmVudC5ob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xyXG4gXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArIG1vZHVsZUlkICsgXCIgaW4gXCIgKyBwYXJlbnRJZCk7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdGlmKG91dGRhdGVkTW9kdWxlcy5pbmRleE9mKHBhcmVudElkKSA+PSAwKSBjb250aW51ZTtcclxuIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXHJcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xyXG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcclxuIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xyXG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcclxuIFx0XHRcdFx0XHRxdWV1ZS5wdXNoKHBhcmVudElkKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcclxuIFx0XHRcdHJldHVybiBbb3V0ZGF0ZWRNb2R1bGVzLCBvdXRkYXRlZERlcGVuZGVuY2llc107XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XHJcbiBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHR2YXIgaXRlbSA9IGJbaV07XHJcbiBcdFx0XHRcdGlmKGEuaW5kZXhPZihpdGVtKSA8IDApXHJcbiBcdFx0XHRcdFx0YS5wdXNoKGl0ZW0pO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gYXQgYmVnaW4gYWxsIHVwZGF0ZXMgbW9kdWxlcyBhcmUgb3V0ZGF0ZWRcclxuIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXHJcbiBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbiBcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xyXG4gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XHJcbiBcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcclxuIFx0XHRcdFx0dmFyIHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xyXG4gXHRcdFx0XHRpZighcmVzdWx0KSB7XHJcbiBcdFx0XHRcdFx0aWYob3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxyXG4gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbiBcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiYWJvcnRcIik7XHJcbiBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIpKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRpZihyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhyZXN1bHQpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHRbMF0pO1xyXG4gXHRcdFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIHJlc3VsdFsxXSkge1xyXG4gXHRcdFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHRbMV0sIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcclxuIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdID0gW107XHJcbiBcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sIHJlc3VsdFsxXVttb2R1bGVJZF0pO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gU3RvcmUgc2VsZiBhY2NlcHRlZCBvdXRkYXRlZCBtb2R1bGVzIHRvIHJlcXVpcmUgdGhlbSBsYXRlciBieSB0aGUgbW9kdWxlIHN5c3RlbVxyXG4gXHRcdHZhciBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHR2YXIgbW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XHJcbiBcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSAmJiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZClcclxuIFx0XHRcdFx0b3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLnB1c2goe1xyXG4gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXHJcbiBcdFx0XHRcdFx0ZXJyb3JIYW5kbGVyOiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZFxyXG4gXHRcdFx0XHR9KTtcclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIE5vdyBpbiBcImRpc3Bvc2VcIiBwaGFzZVxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XHJcbiBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XHJcbiBcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4gXHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbiBcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRpZighbW9kdWxlKSBjb250aW51ZTtcclxuIFx0XHJcbiBcdFx0XHR2YXIgZGF0YSA9IHt9O1xyXG4gXHRcclxuIFx0XHRcdC8vIENhbGwgZGlzcG9zZSBoYW5kbGVyc1xyXG4gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcclxuIFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkaXNwb3NlSGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcclxuIFx0XHRcdFx0dmFyIGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xyXG4gXHRcdFx0XHRjYihkYXRhKTtcclxuIFx0XHRcdH1cclxuIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XHJcbiBcdFxyXG4gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcclxuIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XHJcbiBcdFxyXG4gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXHJcbiBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFxyXG4gXHRcdFx0Ly8gcmVtb3ZlIFwicGFyZW50c1wiIHJlZmVyZW5jZXMgZnJvbSBhbGwgY2hpbGRyZW5cclxuIFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcclxuIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xyXG4gXHRcdFx0XHRpZighY2hpbGQpIGNvbnRpbnVlO1xyXG4gXHRcdFx0XHR2YXIgaWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aWYoaWR4ID49IDApIHtcclxuIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcclxuIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xyXG4gXHRcdFx0XHRcdHZhciBpZHggPSBtb2R1bGUuY2hpbGRyZW4uaW5kZXhPZihkZXBlbmRlbmN5KTtcclxuIFx0XHRcdFx0XHRpZihpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBOb3QgaW4gXCJhcHBseVwiIHBoYXNlXHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XHJcbiBcdFxyXG4gXHRcdGhvdEN1cnJlbnRIYXNoID0gaG90VXBkYXRlTmV3SGFzaDtcclxuIFx0XHJcbiBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXHJcbiBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBjYWxsIGFjY2VwdCBoYW5kbGVyc1xyXG4gXHRcdHZhciBlcnJvciA9IG51bGw7XHJcbiBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcclxuIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcclxuIFx0XHRcdFx0XHR2YXIgY2IgPSBtb2R1bGUuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBlbmRlbmN5XTtcclxuIFx0XHRcdFx0XHRpZihjYWxsYmFja3MuaW5kZXhPZihjYikgPj0gMCkgY29udGludWU7XHJcbiBcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goY2IpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0XHR2YXIgY2IgPSBjYWxsYmFja3NbaV07XHJcbiBcdFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHRcdGNiKG91dGRhdGVkRGVwZW5kZW5jaWVzKTtcclxuIFx0XHRcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXHJcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbaV07XHJcbiBcdFx0XHR2YXIgbW9kdWxlSWQgPSBpdGVtLm1vZHVsZTtcclxuIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuIFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpO1xyXG4gXHRcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdFx0aWYodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcclxuIFx0XHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcclxuIFx0XHRcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH0gZWxzZSBpZighZXJyb3IpXHJcbiBcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxyXG4gXHRcdGlmKGVycm9yKSB7XHJcbiBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xyXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XHJcbiBcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuIFx0fVxyXG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZSxcbiBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4gXHRcdFx0cGFyZW50czogaG90Q3VycmVudFBhcmVudHMsXG4gXHRcdFx0Y2hpbGRyZW46IFtdXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9wdWJsaWMvXCI7XG5cbiBcdC8vIF9fd2VicGFja19oYXNoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18uaCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaG90Q3VycmVudEhhc2g7IH07XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIGhvdENyZWF0ZVJlcXVpcmUoMCkoMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA1NjA5OGI5YTBhNTE5NWYxNzJhMVxuICoqLyIsImltcG9ydCBHYW1lIGZyb20gXCIuL2dhbWUuanNcIlxyXG5sZXQgZ2FtZSA9IG5ldyBHYW1lKClcclxuXHJcbmNvbnN0IGxvb3AgPSAoKT0+e1xyXG4gICAgZ2FtZS5yZW5kZXIoKVxyXG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApXHJcbn1cclxubG9vcCgpXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2phdmFzY3JpcHRzL2luZGV4LmpzXG4gKiovIiwiaW1wb3J0IE1vdXNlIGZyb20gXCIuL21vdXNlLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWV7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7YW50aWFsaWFzOiB0cnVlfSlcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pXHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgY2FudmFzIGVsZW1lbnQgY3JlYXRlZCBieSB0aGUgcmVuZGVyZXIgdG8gZG9jdW1lbnQgYm9keSBlbGVtZW50LlxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSB0aHJlZS5qcyBzY2VuZS5cclxuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKClcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgdGhyZWUuanMgY2FtZXJhLlxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwMClcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgVlIgaGVhZHNldCBwb3NpdGlvbmFsIGRhdGEgdG8gY2FtZXJhLlxyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgVEhSRUUuVlJDb250cm9scyh0aGlzLmNhbWVyYSlcclxuICAgICAgICAvL+ermeeri+Wnv+aAgVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuc3RhbmRpbmcgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgVEhSRUUuVlJFZmZlY3QodGhpcy5yZW5kZXJlcilcclxuICAgICAgICB0aGlzLmVmZmVjdC5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIFZSIG1hbmFnZXIgaGVscGVyIHRvIGVudGVyIGFuZCBleGl0IFZSIG1vZGUuXHJcbiAgICAgICAgLy/mjInpkq7lkozlhajlsY/mqKHlvI/nrqHnkIZcclxuICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBoaWRlQnV0dG9uOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXHJcbiAgICAgICAgICAgIGlzVW5kaXN0b3J0ZWQ6IGZhbHNlIC8vIERlZmF1bHQ6IGZhbHNlLlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgV2ViVlJNYW5hZ2VyKHRoaXMucmVuZGVyZXIsIHRoaXMuZWZmZWN0LCBwYXJhbXMpXHJcblxyXG4gICAgICAgIC8vIHJheWNhc3RlclxyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpXHJcbiAgICAgICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZSgpXHJcbiAgICAgICAgLy9iaW5kIHRoaXNcclxuICAgICAgICB0aGlzLm9uVGV4dHVyZUxvYWRlZCA9IHRoaXMub25UZXh0dXJlTG9hZGVkLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5zZXR1cFN0YWdlID0gdGhpcy5zZXR1cFN0YWdlLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnNldFN0YWdlRGltZW5zaW9ucyA9IHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnBsYWNlUGllY2VzID0gdGhpcy5wbGFjZVBpZWNlcy5iaW5kKHRoaXMpXHJcbiAgICAgICAgLy9cclxuICAgICAgICB0aGlzLm1lc2hMaXN0ID0gW11cclxuICAgICAgICB0aGlzLmxvZ0ZsYWcgPSB0cnVlXHJcbiAgICAgICAgLy8gQWRkIGEgcmVwZWF0aW5nIGdyaWQgYXMgYSBza3lib3guXHJcbiAgICAgICAgdGhpcy5ib3hTaXplID0gMjBcclxuICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKClcclxuICAgICAgICB0aGlzLmxvYWRlci5sb2FkKFwicHVibGljL2ltYWdlcy9ib3gucG5nXCIsIHRoaXMub25UZXh0dXJlTG9hZGVkKVxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMub25SZXNpemUsIHRydWUpXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ2cmRpc3BsYXlwcmVzZW50Y2hhbmdlXCIsIHRoaXMub25SZXNpemUsIHRydWUpXHJcbiAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gMFxyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IG51bGxcclxuICAgIH1cclxuICAgIG9uVGV4dHVyZUxvYWRlZCh0ZXh0dXJlKSB7XHJcbiAgICAgICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXHJcbiAgICAgICAgdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXHJcbiAgICAgICAgdGV4dHVyZS5yZXBlYXQuc2V0KHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKVxyXG5cclxuICAgICAgICBsZXQgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5ib3hTaXplLCB0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSlcclxuICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICBtYXA6IHRleHR1cmUsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcInJnYmEoMjU1LDI1NSwyNTUsMSlcIixcclxuICAgICAgICAgICAgc2lkZTogVEhSRUUuQmFja1NpZGVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgLy8gQWxpZ24gdGhlIHNreWJveCB0byB0aGUgZmxvb3IgKHdoaWNoIGlzIGF0IHk9MCkuXHJcbiAgICAgICAgdGhpcy5za3lib3ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpXHJcbiAgICAgICAgdGhpcy5za3lib3gucG9zaXRpb24ueSA9IHRoaXMuYm94U2l6ZS8yXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5za3lib3gpXHJcblxyXG4gICAgICAgIHZhciBwYW5lbEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMiwgMSlcclxuICAgICAgICB2YXIgcGFuZWwgPSBuZXcgVEhSRUUuTWVzaChwYW5lbEdlb21ldHJ5LG1hdGVyaWFsKVxyXG4gICAgICAgIHBhbmVsLnBvc2l0aW9uLnNldCgwLDIuNSwtMS45OTkpXHJcbiAgICAgIC8vIEFkZCBjdWJlIG1lc2ggdG8geW91ciB0aHJlZS5qcyBzY2VuZVxyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHBhbmVsKVxyXG4gICAgICAgIHRoaXMucGxhY2VQaWVjZXMoKVxyXG5cclxuICAgICAgLy8gRm9yIGhpZ2ggZW5kIFZSIGRldmljZXMgbGlrZSBWaXZlIGFuZCBPY3VsdXMsIHRha2UgaW50byBhY2NvdW50IHRoZSBzdGFnZVxyXG4gICAgICAvLyBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxyXG4gICAgICAvL+WcqOmrmOerr+eahOiuvuWkh+S4iu+8jOimgeiAg+iZkeWIsOiuvuWkh+aPkOS+m+eahOWcuuaZr+S/oeaBr+eahOabtOaWsOOAglxyXG4gICAgICAgIHRoaXMuc2V0dXBTdGFnZSgpXHJcbiAgICB9XHJcbiAgICBwbGFjZVBpZWNlcygpe1xyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbk51bWJlciA9IDRcclxuXHJcbiAgICAgICAgdmFyIGNhbnZhczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXHJcbiAgICAgICAgdmFyIGNvbnRleHQxID0gY2FudmFzMS5nZXRDb250ZXh0KFwiMmRcIilcclxuICAgICAgICBjb250ZXh0MS5mb250ID0gXCJCb2xkIDQwcHggQXJpYWxcIlxyXG4gICAgICAgIGNvbnRleHQxLmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwwLjk1KVwiXHJcbiAgICAgICAgY29udGV4dDEuZmlsbFRleHQoXCJIZWxsbywgd29ybGQhXCIsIDUwLCA1MClcclxuXHJcbiAgICAgICAgLy8gY2FudmFzIGNvbnRlbnRzIHdpbGwgYmUgdXNlZCBmb3IgYSB0ZXh0dXJlXHJcbiAgICAgICAgdmFyIHRleHR1cmUxID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzMSlcclxuICAgICAgICB0ZXh0dXJlMS5uZWVkc1VwZGF0ZSA9IHRydWVcclxuXHJcbiAgICAgICAgdmFyIG1hdGVyaWFsMSA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge21hcDogdGV4dHVyZTEsIHNpZGU6VEhSRUUuRG91YmxlU2lkZSB9IClcclxuICAgICAgICAvLyBtYXRlcmlhbDEudHJhbnNwYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgIHZhciBtZXNoMSA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMCwgNSksXHJcbiAgICAgICAgICAgIG1hdGVyaWFsMVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIG1lc2gxLnBvc2l0aW9uLnNldCgwLDIsOSlcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCggbWVzaDEgKVxyXG5cclxuICAgICAgICAvLyBsb2FkIGFuIGltYWdlXHJcbiAgICAgICAgbGV0IGltYWdlT2JqID0gbmV3IEltYWdlKClcclxuICAgICAgICBpbWFnZU9iai5zcmMgPSByZXF1aXJlKFwiLi4vLi4vcHVibGljL2ltYWdlcy9wdXp6bGVzL2NhcnRvb24gKDEpLmpwZ1wiKVxyXG4gICAgICAgIC8vIHRoaXMuY29sdW1uTnVtYmVyID0gMlxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXHJcbiAgICAgICAgbGV0IHdzID0gKGNhbnZhcy53aWR0aC8xLjUpL2ltYWdlT2JqLndpZHRoXHJcbiAgICAgICAgbGV0IGhzID0gKGNhbnZhcy5oZWlnaHQvMS41KS9pbWFnZU9iai5oZWlnaHRcclxuICAgICAgICB0aGlzLnNjYWxlID0gTWF0aC5taW4od3MsaHMpXHJcbiAgICAgICAgdGhpcy5waWVjZVdpZHRoID0gaW1hZ2VPYmoud2lkdGgvdGhpcy5jb2x1bW5OdW1iZXJcclxuICAgICAgICB0aGlzLnBpZWNlSGVpZ2h0ID0gaW1hZ2VPYmouaGVpZ2h0L3RoaXMuY29sdW1uTnVtYmVyXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5waWVjZVdpZHRoLHRoaXMucGllY2VIZWlnaHQpXHJcbiAgICAgICAgbGV0IHRleHR1cmUsbWF0ZXJpYWwsbWVzaCxzZWxmID0gdGhpc1xyXG4gICAgICAgIGltYWdlT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGk8c2VsZi5jb2x1bW5OdW1iZXI7aSsrKXtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGo8c2VsZi5jb2x1bW5OdW1iZXI7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGV4dC5jbGVhclJlY3QoMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbnZhcyBjb250ZW50cyB3aWxsIGJlIHVzZWQgZm9yIGEgdGV4dHVyZVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGlzIGxvYWRlZCwgdGhpcyBmdW5jdGlvbiBleGVjdXRlc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW1nLnNyYylcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNjYWxlKHNlbGYuc2NhbGUsdGhpcy5zY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZU9iaiwgaSpzZWxmLnBpZWNlV2lkdGgsaipzZWxmLnBpZWNlSGVpZ2h0LHNlbGYucGllY2VXaWR0aCxzZWxmLnBpZWNlSGVpZ2h0LDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRleHR1cmUgKSAvLyBjaGVja3MgaWYgdGV4dHVyZSBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHttYXA6IHRleHR1cmUsIHNpZGU6VEhSRUUuRG91YmxlU2lkZX0gKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgzLCAzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi5zZXQoaSozLCAzKnNlbGYuY29sdW1uTnVtYmVyLWoqMywtOSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1lc2hMaXN0LnB1c2gobWVzaC5pZClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjZW5lLmFkZCggbWVzaCApXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHRoaXMuc2NlbmUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZW5kZXIodGltZXN0YW1wKXtcclxuICAgICAgICAvLyB2YXIgZGVsdGEgPSBNYXRoLm1pbih0aW1lc3RhbXAgLSB0aGlzLmxhc3RSZW5kZXIsIDUwMClcclxuICAgICAgICB0aGlzLmxhc3RSZW5kZXIgPSB0aW1lc3RhbXBcclxuICAgICAgICAvL+WkhOeQhum8oOagh+eCueWHu1xyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSx0aGlzLmNhbWVyYSlcclxuICAgICAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoIHRoaXMuc2NlbmUuY2hpbGRyZW4gLGZhbHNlKVxyXG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGludGVyc2VjdHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgIC8vIGlmKGludGVyc2VjdHNbIGkgXS5vYmplY3QuaWQgaW4gdGhpcy5tZXNoTGlzdClcclxuICAgICAgICAgICAgICAgIGludGVyc2VjdHNbIGkgXS5vYmplY3QubWF0ZXJpYWwuY29sb3Iuc2V0KCAweGZmMDAwMCApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWVzaExpc3QpXHJcbiAgICAgICAgLy8gbGV0IGludGVyc2VjdExpc3QgPSBpbnRlcnNlY3RzLm1hcChfPT5fLm9iamVjdClcclxuICAgICAgICAvLyBpZih0aGlzLmxvZ0ZsYWcgJiYgaW50ZXJzZWN0TGlzdC5sZW5ndGghPT0wKXtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0TGlzdClcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZm9yKGxldCBtZXNoIG9mIHRoaXMubWVzaExpc3Qpe1xyXG4gICAgICAgIC8vICAgICBpZihtZXNoIGluIGludGVyc2VjdExpc3Qpe1xyXG4gICAgICAgIC8vICAgICAgICAgbWVzaC5tYXRlcmlhbC5jb2xvci5zZXQoMHhmZjAwMDApXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gICDnq4vmlrnkvZPnmoTml4vovaxcclxuICAgICAgICAvLyAgIHRoaXMuY3ViZS5yb3RhdGlvbi55ICs9IGRlbHRhICogMC4wMDA2O1xyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSBWUiBoZWFkc2V0IHBvc2l0aW9uIGFuZCBhcHBseSB0byBjYW1lcmEuXHJcbiAgICAgICAgICAvL+abtOaWsOiOt+WPlkhNROeahOS/oeaBr1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKClcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1lc2hMaXN0Lmxlbmd0aClcclxuICAgICAgICAvLyBpZih0aGlzLm1lc2hMaXN0Lmxlbmd0aCE9PTApe1xyXG4gICAgICAgICAgICAvLyB0aGlzLm1lc2hMaXN0WzBdLnJvdGF0aW9uLnkgKz0gMC4yXHJcbiAgICAgICAgICAgIC8vIHRoaXMubWVzaExpc3RbM10ucm90YXRpb24ueSArPSAwLjJcclxuICAgICAgICAgICAgLy8gdGhpcy5tZXNoTGlzdFswXS5yb3RhdGlvbi55ICs9IDAuMlxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAvLyBSZW5kZXIgdGhlIHNjZW5lIHRocm91Z2ggdGhlIG1hbmFnZXIuXHJcbiAgICAgICAgICAvL+i/m+ihjGNhbWVyYeabtOaWsOWSjOWcuuaZr+e7mOWItlxyXG4gICAgICAgIHRoaXMubWFuYWdlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRpbWVzdGFtcClcclxuICAgICAgICAgIC8vIHJlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpXHJcblxyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcilcclxuICAgIH1cclxuICAgIG9uUmVzaXplKGUpIHtcclxuICAgICAgICB0aGlzLmVmZmVjdC5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpXHJcbiAgICAgICAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KClcclxuICAgIH1cclxuICAgIHNldFN0YWdlRGltZW5zaW9ucyhzdGFnZSkge1xyXG4gICAgICAvLyBNYWtlIHRoZSBza3lib3ggZml0IHRoZSBzdGFnZS5cclxuICAgICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLnNreWJveC5tYXRlcmlhbFxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuc2t5Ym94KVxyXG5cclxuICAgICAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxyXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShzdGFnZS5zaXplWCwgdGhpcy5ib3hTaXplLCBzdGFnZS5zaXplWilcclxuICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcclxuXHJcbiAgICAgIC8vIFBsYWNlIGl0IG9uIHRoZSBmbG9vci5cclxuICAgICAgICB0aGlzLnNreWJveC5wb3NpdGlvbi55ID0gdGhpcy5ib3hTaXplLzJcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveClcclxuXHJcbiAgICAgIC8vIFBsYWNlIHRoZSBjdWJlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHNjZW5lLCBhdCB1c2VyIGhlaWdodC5cclxuICAgIC8vICAgY3ViZS5wb3NpdGlvbi5zZXQoMCwgY29udHJvbHMudXNlckhlaWdodCwgMCk7XHJcbiAgICB9XHJcbiAgICBzZXR1cFN0YWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKGZ1bmN0aW9uKGRpc3BsYXlzKSB7XHJcbiAgICAgICAgICAgIGlmIChkaXNwbGF5cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXkgPSBkaXNwbGF5c1swXVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuZGlzcGxheS5zdGFnZVBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YWdlRGltZW5zaW9ucyhzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qYXZhc2NyaXB0cy9nYW1lLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW91c2UgZXh0ZW5kcyBUSFJFRS5WZWN0b3Iye1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgICAgIHN1cGVyKHByb3BzKVxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsIHRoaXMub25Nb3VzZUNsaWNrLmJpbmQodGhpcyksIGZhbHNlIClcclxuXHJcbiAgICB9XHJcbiAgICBvbk1vdXNlQ2xpY2soIGV2ZW50ICkge1xyXG4gICAgXHQvLyBjYWxjdWxhdGUgbW91c2UgcG9zaXRpb24gaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZXNcclxuICAgIFx0Ly8gKC0xIHRvICsxKSBmb3IgYm90aCBjb21wb25lbnRzXHJcbiAgICAgICAgdGhpcy54ID0gKCBldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGggKSAqIDIgLSAxXHJcbiAgICAgICAgdGhpcy55ID0gLSAoIGV2ZW50LmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQgKSAqIDIgKyAxXHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvamF2YXNjcmlwdHMvbW91c2UuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGdcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vcHVibGljL2ltYWdlcy9wdXp6bGVzL2NhcnRvb24gKDEpLmpwZ1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=