!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=u.p+""+e+"."+m+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=u.p+""+m+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(i){return e(i)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var i=JSON.parse(t.responseText)}catch(r){return void e(r)}e(null,i)}}}function i(e){function t(e,t){"ready"===R&&s("prepare"),O++,u.e(e,function(){function n(){O--,"prepare"===R&&(_[e]||d(e),0===O&&0===T&&l())}try{t.call(null,i)}finally{n()}})}var n=k[e];if(!n)return u;var i=function(t){return n.hot.active?k[t]?(k[t].parents.indexOf(e)<0&&k[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):x=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),x=[]),u(t)};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&(p?Object.defineProperty(i,r,function(e){return{configurable:!0,enumerable:!0,get:function(){return u[e]},set:function(t){u[e]=t}}}(r)):i[r]=u[r]);return p?Object.defineProperty(i,"e",{enumerable:!0,value:t}):i.e=t,i}function r(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._acceptedDependencies[e[i]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:o,apply:h,status:function(e){return e?void H.push(e):R},addStatusHandler:function(e){H.push(e)},removeStatusHandler:function(e){var t=H.indexOf(e);t>=0&&H.splice(t,1)},data:E[e]};return t}function s(e){R=e;for(var t=0;t<H.length;t++)H[t].call(null,e)}function a(e){var t=+e+""===e;return t?+e:e}function o(e,t){if("idle"!==R)throw new Error("check() is only allowed in idle status");"function"==typeof e?(b=!1,t=e):(b=e,t=t||function(e){if(e)throw e}),s("check"),n(function(e,n){if(e)return t(e);if(!n)return s("idle"),void t(null,null);S={},P={},_={};for(var i=0;i<n.c.length;i++)P[n.c[i]]=!0;g=n.h,s("prepare"),w=t,y={};var r=0;d(r),"prepare"===R&&0===O&&0===T&&l()})}function c(e,t){if(P[e]&&S[e]){S[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0===--T&&0===O&&l()}}function d(e){P[e]?(S[e]=!0,T++,t(e)):_[e]=!0}function l(){s("ready");var e=w;if(w=null,e)if(b)h(b,e);else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(a(n));e(null,t)}}function h(t,n){function i(e){for(var t=[e],n={},i=t.slice();i.length>0;){var s=i.pop(),e=k[s];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+s);if(0===s)return;for(var a=0;a<e.parents.length;a++){var o=e.parents[a],c=k[o];if(c.hot._declinedDependencies[s])return new Error("Aborted because of declined dependency: "+s+" in "+o);t.indexOf(o)>=0||(c.hot._acceptedDependencies[s]?(n[o]||(n[o]=[]),r(n[o],[s])):(delete n[o],t.push(o),i.push(o)))}}}return[t,n]}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}}if("ready"!==R)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var o={},c=[],d={};for(var l in y)if(Object.prototype.hasOwnProperty.call(y,l)){var h=a(l),f=i(h);if(!f){if(t.ignoreUnaccepted)continue;return s("abort"),n(new Error("Aborted because "+h+" is not accepted"))}if(f instanceof Error)return s("abort"),n(f);d[h]=y[h],r(c,f[0]);for(var h in f[1])Object.prototype.hasOwnProperty.call(f[1],h)&&(o[h]||(o[h]=[]),r(o[h],f[1][h]))}for(var p=[],v=0;v<c.length;v++){var h=c[v];k[h]&&k[h].hot._selfAccepted&&p.push({module:h,errorHandler:k[h].hot._selfAccepted})}s("dispose");for(var w=c.slice();w.length>0;){var h=w.pop(),b=k[h];if(b){for(var H={},T=b.hot._disposeHandlers,O=0;O<T.length;O++){var _=T[O];_(H)}E[h]=H,b.hot.active=!1,delete k[h];for(var O=0;O<b.children.length;O++){var S=k[b.children[O]];if(S){var P=S.parents.indexOf(h);P>=0&&S.parents.splice(P,1)}}}}for(var h in o)if(Object.prototype.hasOwnProperty.call(o,h))for(var b=k[h],M=o[h],O=0;O<M.length;O++){var j=M[O],P=b.children.indexOf(j);P>=0&&b.children.splice(P,1)}s("apply"),m=g;for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(e[h]=d[h]);var z=null;for(var h in o)if(Object.prototype.hasOwnProperty.call(o,h)){for(var b=k[h],M=o[h],D=[],v=0;v<M.length;v++){var j=M[v],_=b.hot._acceptedDependencies[j];D.indexOf(_)>=0||D.push(_)}for(var v=0;v<D.length;v++){var _=D[v];try{_(o)}catch(W){z||(z=W)}}}for(var v=0;v<p.length;v++){var A=p[v],h=A.module;x=[h];try{u(h)}catch(W){if("function"==typeof A.errorHandler)try{A.errorHandler(W)}catch(W){z||(z=W)}else z||(z=W)}}return z?(s("fail"),n(z)):(s("idle"),void n(null,c))}function u(t){if(k[t])return k[t].exports;var n=k[t]={exports:{},id:t,loaded:!1,hot:r(t),parents:x,children:[]};return e[t].call(n.exports,n,n.exports,i(t)),n.loaded=!0,n.exports}var f=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){c(e,t),f&&f(e,t)};var p=!1;try{Object.defineProperty({},"x",{get:function(){}}),p=!0}catch(v){}var w,y,g,b=!0,m="fa07c683ab7f537c1954",E={},x=[],H=[],R="idle",T=0,O=0,_={},S={},P={},k={};return u.m=e,u.c=k,u.p="/public/",u.h=function(){return m},i(0)(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),s=i(r),a=new s["default"],o=function(){a.render()};o()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),o=(i(a),function(){function e(){r(this,e),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.controls=new THREE.VRControls(this.camera),this.controls.standing=!0,this.effect=new THREE.VREffect(this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight);var t={hideButton:!1,isUndistorted:!1};this.manager=new WebVRManager(this.renderer,this.effect,t),this.onTextureLoaded=this.onTextureLoaded.bind(this),this.onResize=this.onResize.bind(this),this.render=this.render.bind(this),this.setupStage=this.setupStage.bind(this),this.setStageDimensions=this.setStageDimensions.bind(this),this.placePieces=this.placePieces.bind(this),this.boxSize=20,this.loader=new THREE.TextureLoader,this.loader.load("public/images/box.png",this.onTextureLoaded),window.addEventListener("resize",this.onResize,!0),window.addEventListener("vrdisplaypresentchange",this.onResize,!0),this.lastRender=0,this.display=null}return s(e,[{key:"onTextureLoaded",value:function(e){e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.set(this.boxSize,this.boxSize);var t=new THREE.BoxGeometry(this.boxSize,this.boxSize,this.boxSize),n=new THREE.MeshBasicMaterial({map:e,color:"rgba(255,255,255,1)",side:THREE.BackSide});this.skybox=new THREE.Mesh(t,n),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox);var i=new THREE.PlaneGeometry(2,1),r=new THREE.Mesh(i,n);r.position.set(0,2.5,-1.999),this.scene.add(r),this.placePieces(),this.setupStage()}},{key:"placePieces",value:function(){this.img=document.getElementById("img1"),this.imgWidth=this.img.width,this.imgHeight=this.img.height,this.columnNumber=4,this.pieceWidth=this.pieceHeight=this.imgWidth/this.columnNumber,this.rowNumber=this.imgHeight/this.pieceWidth;var e=document.createElement("canvas"),t=e.getContext("2d");t.font="Bold 40px Arial",t.fillStyle="rgba(255,255,255,0.95)",t.fillText("Hello, world!",50,50);var i=new THREE.Texture(e);i.needsUpdate=!0;var r=new THREE.MeshBasicMaterial({map:i,side:THREE.DoubleSide}),s=new THREE.Mesh(new THREE.PlaneGeometry(10,5),r);s.position.set(0,2,9),this.scene.add(s);var a=document.createElement("canvas"),o=a.getContext("2d"),c=new THREE.Texture(a),d=new Image;d.src=n(3),console.log(a.width,a.height),console.log(this.img.src);var l=a.width/1.5/d.width,h=a.height/1.5/d.height;this.scale=Math.min(l,h),o.scale(this.scale,this.scale),d.onload=function(){o.drawImage(d,d.width,d.height),c&&(c.needsUpdate=!0)};var u=new THREE.MeshBasicMaterial({map:c,side:THREE.DoubleSide});u.transparent=!0;var f=new THREE.Mesh(new THREE.PlaneGeometry(20,20),u);f.position.set(0,8,-9.9),this.scene.add(f)}},{key:"render",value:function(e){this.lastRender=e,this.controls.update(),this.manager.render(this.scene,this.camera,e),requestAnimationFrame(this.render)}},{key:"onResize",value:function(e){this.effect.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"setStageDimensions",value:function(e){var t=this.skybox.material;this.scene.remove(this.skybox);var n=new THREE.BoxGeometry(e.sizeX,this.boxSize,e.sizeZ);this.skybox=new THREE.Mesh(n,t),this.skybox.position.y=this.boxSize/2,this.scene.add(this.skybox)}},{key:"setupStage",value:function(){var e=this;navigator.getVRDisplays().then(function(t){t.length>0&&(e.display=t[0],e.display.stageParameters&&e.setStageDimensions(e.display.stageParameters))})}}]),e}());t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i,r,s,a,o){n(this,e),this.img=t,this.x=i,this.y=r,this.width=s,this.height=a,this.canvas=o,this.canvas.width=400,this.canvas.height=300,this.context=this.canvas.getContext("2d")}return i(e,[{key:"draw",value:function(){console.log(this.img,this.x,this.y,this.width,this.height,0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="rgba(255,255,255,1)",this.context.fillRect(0,0,400,300)}}]),e}();t["default"]=r},function(e,t,n){e.exports=n.p+"images/puzzles/cartoon (1).jpg"}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vVlJQdXp6bGUuYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmYTA3YzY4M2FiN2Y1MzdjMTk1NCIsIndlYnBhY2s6Ly8vLi9zcmMvamF2YXNjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2phdmFzY3JpcHRzL3BpZWNlLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9pbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGciXSwibmFtZXMiOlsibW9kdWxlcyIsImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJjaHVua0lkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJzcmMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsImhvdEN1cnJlbnRIYXNoIiwiYXBwZW5kQ2hpbGQiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiY2FsbGJhY2siLCJYTUxIdHRwUmVxdWVzdCIsIkVycm9yIiwicmVxdWVzdCIsInJlcXVlc3RQYXRoIiwib3BlbiIsInRpbWVvdXQiLCJzZW5kIiwiZXJyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInVwZGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImUiLCJob3RDcmVhdGVSZXF1aXJlIiwibW9kdWxlSWQiLCJlbnN1cmUiLCJob3RTdGF0dXMiLCJob3RTZXRTdGF0dXMiLCJob3RDaHVua3NMb2FkaW5nIiwiZmluaXNoQ2h1bmtMb2FkaW5nIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwiaG90RW5zdXJlVXBkYXRlQ2h1bmsiLCJob3RXYWl0aW5nRmlsZXMiLCJob3RVcGRhdGVEb3dubG9hZGVkIiwiY2FsbCIsImZuIiwibWUiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJob3RDdXJyZW50UGFyZW50cyIsImNvbnNvbGUiLCJ3YXJuIiwibmFtZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FuRGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsImhvdENyZWF0ZU1vZHVsZSIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkRlY2xpbmVkIiwiX2Rpc3Bvc2VIYW5kbGVycyIsImFjY2VwdCIsImRlcCIsImkiLCJsZW5ndGgiLCJkZWNsaW5lIiwiZGlzcG9zZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJpZHgiLCJzcGxpY2UiLCJjaGVjayIsImhvdENoZWNrIiwiYXBwbHkiLCJob3RBcHBseSIsImwiLCJob3RTdGF0dXNIYW5kbGVycyIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwiZGF0YSIsImhvdEN1cnJlbnRNb2R1bGVEYXRhIiwibmV3U3RhdHVzIiwidG9Nb2R1bGVJZCIsImlkIiwiaXNOdW1iZXIiLCJob3RBcHBseU9uVXBkYXRlIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJob3RBdmFpbGlibGVGaWxlc01hcCIsImMiLCJob3RVcGRhdGVOZXdIYXNoIiwiaCIsImhvdENhbGxiYWNrIiwiaG90VXBkYXRlIiwiaG90QWRkVXBkYXRlQ2h1bmsiLCJtb3JlTW9kdWxlcyIsIm91dGRhdGVkTW9kdWxlcyIsIm9wdGlvbnMiLCJnZXRBZmZlY3RlZFN0dWZmIiwibW9kdWxlIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsInNsaWNlIiwicG9wIiwicGFyZW50SWQiLCJwYXJlbnQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJyZXN1bHQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzIiwiZXJyb3JIYW5kbGVyIiwiZGlzcG9zZUhhbmRsZXJzIiwiaiIsImNiIiwiY2hpbGQiLCJtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyIsImRlcGVuZGVuY3kiLCJlcnJvciIsImNhbGxiYWNrcyIsImV4cG9ydHMiLCJsb2FkZWQiLCJwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayIsInRoaXMiLCJ4IiwibSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nYW1lIiwiX2dhbWUyIiwiZ2FtZSIsImxvb3AiLCJyZW5kZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3BpZWNlIiwiR2FtZSIsInJlbmRlcmVyIiwiVEhSRUUiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0UGl4ZWxSYXRpbyIsIndpbmRvdyIsImRldmljZVBpeGVsUmF0aW8iLCJib2R5IiwiZG9tRWxlbWVudCIsInNjZW5lIiwiU2NlbmUiLCJjYW1lcmEiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImNvbnRyb2xzIiwiVlJDb250cm9scyIsInN0YW5kaW5nIiwiZWZmZWN0IiwiVlJFZmZlY3QiLCJzZXRTaXplIiwicGFyYW1zIiwiaGlkZUJ1dHRvbiIsImlzVW5kaXN0b3J0ZWQiLCJtYW5hZ2VyIiwiV2ViVlJNYW5hZ2VyIiwib25UZXh0dXJlTG9hZGVkIiwiYmluZCIsIm9uUmVzaXplIiwic2V0dXBTdGFnZSIsInNldFN0YWdlRGltZW5zaW9ucyIsInBsYWNlUGllY2VzIiwiYm94U2l6ZSIsImxvYWRlciIsIlRleHR1cmVMb2FkZXIiLCJsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxhc3RSZW5kZXIiLCJkaXNwbGF5IiwidGV4dHVyZSIsIndyYXBTIiwiUmVwZWF0V3JhcHBpbmciLCJ3cmFwVCIsInJlcGVhdCIsImdlb21ldHJ5IiwiQm94R2VvbWV0cnkiLCJtYXRlcmlhbCIsIk1lc2hCYXNpY01hdGVyaWFsIiwibWFwIiwiY29sb3IiLCJzaWRlIiwiQmFja1NpZGUiLCJza3lib3giLCJNZXNoIiwicG9zaXRpb24iLCJ5IiwiYWRkIiwicGFuZWxHZW9tZXRyeSIsIlBsYW5lR2VvbWV0cnkiLCJwYW5lbCIsImltZyIsImdldEVsZW1lbnRCeUlkIiwiaW1nV2lkdGgiLCJ3aWR0aCIsImltZ0hlaWdodCIsImhlaWdodCIsImNvbHVtbk51bWJlciIsInBpZWNlV2lkdGgiLCJwaWVjZUhlaWdodCIsInJvd051bWJlciIsImNhbnZhczEiLCJjb250ZXh0MSIsImdldENvbnRleHQiLCJmb250IiwiZmlsbFN0eWxlIiwiZmlsbFRleHQiLCJ0ZXh0dXJlMSIsIlRleHR1cmUiLCJuZWVkc1VwZGF0ZSIsIm1hdGVyaWFsMSIsIkRvdWJsZVNpZGUiLCJtZXNoMSIsImNhbnZhczIiLCJjb250ZXh0MiIsInRleHR1cmUyIiwiaW1hZ2VPYmoiLCJJbWFnZSIsImxvZyIsIndzIiwiaHMiLCJzY2FsZSIsIk1hdGgiLCJtaW4iLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJtYXRlcmlhbDIiLCJ0cmFuc3BhcmVudCIsIm1lc2gyIiwidGltZXN0YW1wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYXNwZWN0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsInN0YWdlIiwicmVtb3ZlIiwic2l6ZVgiLCJzaXplWiIsInNlbGYiLCJuYXZpZ2F0b3IiLCJnZXRWUkRpc3BsYXlzIiwidGhlbiIsImRpc3BsYXlzIiwic3RhZ2VQYXJhbWV0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LEtBQUs0SSxPQUFPbEQsTUFBUSxJQUNwQjFGLEtBQUs0SSxPQUFPaEQsT0FBUyxJQUNyQjVGLEtBQUs2SSxRQUFVN0ksS0FBSzRJLE9BQU96QyxXQUFXLE1KbytCekMsTUFWQW5GLEdBQWEySCxJQUNUckgsSUFBSyxPQUNMN0YsTUFBTyxXSXo5QlJaLFFBQVFxTSxJQUFJbEgsS0FBS3VGLElBQUl2RixLQUFLQyxFQUFFRCxLQUFLa0YsRUFBRWxGLEtBQUswRixNQUFNMUYsS0FBSzRGLE9BQU8sRUFBRSxFQUFFNUYsS0FBSzRJLE9BQU9sRCxNQUFNMUYsS0FBSzRJLE9BQU9oRCxRQUU1RjVGLEtBQUs2SSxRQUFReEMsVUFBWSxzQkFDekJyRyxLQUFLNkksUUFBUUMsU0FBUyxFQUFFLEVBQUUsSUFBSSxTSjg5QjFCSCxJQUdYOUksY0lqL0JvQjhJLEdKcS9CZixTQUFTdEssRUFBUXdCLEVBQVM1SCxHS3IvQmhDb0csRUFBQXdCLFFBQUE1SCxFQUFBQyxFQUFBIiwiZmlsZSI6IlZSUHV6emxlLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0dmFyIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrID0gdGhpc1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4vKioqKioqLyBcdHRoaXNbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gXHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gd2VicGFja0hvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuLyoqKioqKi8gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuLyoqKioqKi8gXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XHJcbi8qKioqKiovIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xyXG4vKioqKioqLyBcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KGNhbGxiYWNrKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIk5vIGJyb3dzZXIgc3VwcG9ydFwiKSk7XHJcbi8qKioqKiovIFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgcmVxdWVzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzb25cIjtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC5vcGVuKFwiR0VUXCIsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gMTAwMDA7XHJcbi8qKioqKiovIFx0XHRcdHJlcXVlc3Quc2VuZChudWxsKTtcclxuLyoqKioqKi8gXHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0cmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdGlmKHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gdGltZW91dFxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIikpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xyXG4vKioqKioqLyBcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcclxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFjaygpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgIT09IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyAhPT0gMzA0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gb3RoZXIgZmFpbHVyZVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdC8vIHN1Y2Nlc3NcclxuLyoqKioqKi8gXHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gY2F0Y2goZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2soZSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIHVwZGF0ZSk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqL1xuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHQvLyBDb3BpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iZWY0NWIwL3NyYy9zaGFyZWQvdXRpbHMvY2FuRGVmaW5lUHJvcGVydHkuanNcclxuLyoqKioqKi8gXHR2YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBmYWxzZTtcclxuLyoqKioqKi8gXHR0cnkge1xyXG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInhcIiwge1xyXG4vKioqKioqLyBcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge31cclxuLyoqKioqKi8gXHRcdH0pO1xyXG4vKioqKioqLyBcdFx0Y2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xyXG4vKioqKioqLyBcdH0gY2F0Y2goeCkge1xyXG4vKioqKioqLyBcdFx0Ly8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudEhhc2ggPSBcImZhMDdjNjgzYWI3ZjUzN2MxOTU0XCI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRpZighbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xyXG4vKioqKioqLyBcdFx0dmFyIGZuID0gZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihtZS5ob3QuYWN0aXZlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA8IDApXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1lLmNoaWxkcmVuLnB1c2gocmVxdWVzdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBlbHNlIGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0XHRjb25zb2xlLndhcm4oXCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyByZXF1ZXN0ICsgXCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICsgbW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XHJcbi8qKioqKiovIFx0XHR9O1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgKGZ1bmN0aW9uKG5hbWUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fShuYW1lKSkpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmbltuYW1lXSA9IF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBlbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoaG90U3RhdHVzID09PSBcInJlYWR5XCIpXHJcbi8qKioqKiovIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xyXG4vKioqKioqLyBcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCwgZnVuY3Rpb24oKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobnVsbCwgZm4pO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZmluYWxseSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmaW5pc2hDaHVua0xvYWRpbmcoKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Q2h1bmtzTG9hZGluZy0tO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighaG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBcImVcIiwge1xyXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdFx0dmFsdWU6IGVuc3VyZVxyXG4vKioqKioqLyBcdFx0XHR9KTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdGZuLmUgPSBlbnN1cmU7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gZm47XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaG90ID0ge1xyXG4vKioqKioqLyBcdFx0XHQvLyBwcml2YXRlIHN0dWZmXHJcbi8qKioqKiovIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9zZWxmQWNjZXB0ZWQ6IGZhbHNlLFxyXG4vKioqKioqLyBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcclxuLyoqKioqKi8gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIE1vZHVsZSBBUElcclxuLyoqKioqKi8gXHRcdFx0YWN0aXZlOiB0cnVlLFxyXG4vKioqKioqLyBcdFx0XHRhY2NlcHQ6IGZ1bmN0aW9uKGRlcCwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJmdW5jdGlvblwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGRlY2xpbmU6IGZ1bmN0aW9uKGRlcCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcIm51bWJlclwiKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1tkZXBdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlXHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcclxuLyoqKioqKi8gXHRcdFx0Y2hlY2s6IGhvdENoZWNrLFxyXG4vKioqKioqLyBcdFx0XHRhcHBseTogaG90QXBwbHksXHJcbi8qKioqKiovIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFsKSByZXR1cm4gaG90U3RhdHVzO1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGhvdFN0YXR1c0hhbmRsZXJzLmluZGV4T2YobCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdFN0YXR1c0hhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvL2luaGVyaXQgZnJvbSBwcmV2aW91cyBkaXNwb3NlIGNhbGxcclxuLyoqKioqKi8gXHRcdFx0ZGF0YTogaG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdXHJcbi8qKioqKiovIFx0XHR9O1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGhvdDtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0dmFyIGhvdFN0YXR1c0hhbmRsZXJzID0gW107XHJcbi8qKioqKiovIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdFNldFN0YXR1cyhuZXdTdGF0dXMpIHtcclxuLyoqKioqKi8gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcclxuLyoqKioqKi8gXHRcdFx0aG90U3RhdHVzSGFuZGxlcnNbaV0uY2FsbChudWxsLCBuZXdTdGF0dXMpO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHQvLyB3aGlsZSBkb3dubG9hZGluZ1xyXG4vKioqKioqLyBcdHZhciBob3RXYWl0aW5nRmlsZXMgPSAwO1xyXG4vKioqKioqLyBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcclxuLyoqKioqKi8gXHR2YXIgaG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0dmFyIGhvdENhbGxiYWNrO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIFRoZSB1cGRhdGUgaW5mb1xyXG4vKioqKioqLyBcdHZhciBob3RVcGRhdGUsIGhvdFVwZGF0ZU5ld0hhc2g7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xyXG4vKioqKioqLyBcdFx0dmFyIGlzTnVtYmVyID0gKCtpZCkgKyBcIlwiID09PSBpZDtcclxuLyoqKioqKi8gXHRcdHJldHVybiBpc051bWJlciA/ICtpZCA6IGlkO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RDaGVjayhhcHBseSwgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIGFwcGx5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuLyoqKioqKi8gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IGFwcGx5O1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4vKioqKioqLyBcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiY2hlY2tcIik7XHJcbi8qKioqKiovIFx0XHRob3REb3dubG9hZE1hbmlmZXN0KGZ1bmN0aW9uKGVyciwgdXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbi8qKioqKiovIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIG51bGwpO1xyXG4vKioqKioqLyBcdFx0XHRcdHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRob3RBdmFpbGlibGVGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHVwZGF0ZS5jLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwW3VwZGF0ZS5jW2ldXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHRcdHZhciBjaHVua0lkID0gMDtcclxuLyoqKioqKi8gXHRcdFx0eyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmUtYmxvY2tzXHJcbi8qKioqKiovIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cclxuLyoqKioqKi8gXHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9KTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdIHx8ICFob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSlcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRpZigtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xyXG4vKioqKioqLyBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xyXG4vKioqKioqLyBcdFx0XHRob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XHJcbi8qKioqKiovIFx0XHR2YXIgY2FsbGJhY2sgPSBob3RDYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdGhvdENhbGxiYWNrID0gbnVsbDtcclxuLyoqKioqKi8gXHRcdGlmKCFjYWxsYmFjaykgcmV0dXJuO1xyXG4vKioqKioqLyBcdFx0aWYoaG90QXBwbHlPblVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseShob3RBcHBseU9uVXBkYXRlLCBjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaCh0b01vZHVsZUlkKGlkKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMsIGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRpZihob3RTdGF0dXMgIT09IFwicmVhZHlcIikgdGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRjYWxsYmFjayA9IG9wdGlvbnM7XHJcbi8qKioqKiovIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSBpZihvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRvcHRpb25zID0ge307XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZSkge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW21vZHVsZV07XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuLyoqKioqKi8gXHRcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZighbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZS5ob3QuX3NlbGZEZWNsaW5lZCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICsgbW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRpZihtb2R1bGVJZCA9PT0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudCA9IGluc3RhbGxlZE1vZHVsZXNbcGFyZW50SWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgKyBtb2R1bGVJZCArIFwiIGluIFwiICsgcGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHF1ZXVlLnB1c2gocGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gW291dGRhdGVkTW9kdWxlcywgb3V0ZGF0ZWREZXBlbmRlbmNpZXNdO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBpdGVtID0gYltpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihhLmluZGV4T2YoaXRlbSkgPCAwKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0YS5wdXNoKGl0ZW0pO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxyXG4vKioqKioqLyBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbi8qKioqKiovIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFyZXN1bHQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKG9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhyZXN1bHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHRbMF0pO1xyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gcmVzdWx0WzFdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0WzFdLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHRbMV1bbW9kdWxlSWRdKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cclxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBvdXRkYXRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSAmJiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZXJyb3JIYW5kbGVyOiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZFxyXG4vKioqKioqLyBcdFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xyXG4vKioqKioqLyBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XHJcbi8qKioqKiovIFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdGlmKCFtb2R1bGUpIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHR2YXIgZGF0YSA9IHt9O1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcclxuLyoqKioqKi8gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRpc3Bvc2VIYW5kbGVycy5sZW5ndGg7IGorKykge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcclxuLyoqKioqKi8gXHRcdFx0XHRjYihkYXRhKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxyXG4vKioqKioqLyBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcclxuLyoqKioqKi8gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFjaGlsZCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNoaWxkLnBhcmVudHMuc3BsaWNlKGlkeCwgMSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIE5vdCBpbiBcImFwcGx5XCIgcGhhc2VcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0aG90Q3VycmVudEhhc2ggPSBob3RVcGRhdGVOZXdIYXNoO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIGFwcGxpZWRVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXHJcbi8qKioqKiovIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goY2IpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgY2IgPSBjYWxsYmFja3NbaV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjYihvdXRkYXRlZERlcGVuZGVuY2llcyk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9IGNhdGNoKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XHJcbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZih0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaWYoIWVycm9yKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXHJcbi8qKioqKiovIFx0XHRpZihlcnJvcikge1xyXG4vKioqKioqLyBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuLyoqKioqKi8gXHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuLyoqKioqKi8gXHRcdFx0cGFyZW50czogaG90Q3VycmVudFBhcmVudHMsXG4vKioqKioqLyBcdFx0XHRjaGlsZHJlbjogW11cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL3B1YmxpYy9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19oYXNoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKSgwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9nYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfZ2FtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nYW1lKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgZ2FtZSA9IG5ldyBfZ2FtZTIuZGVmYXVsdCgpOyAvLyBpbXBvcnQgVEhSRUUgZnJvbSBcInRocmVlXCJcblx0Ly8gaW1wb3J0IHsgVlJDb250cm9scyxWUkVmZmVjdCB9IGZyb20gXCJ0aHJlZVwiXG5cdC8vIGltcG9ydCBcIndlYnZyLXBvbHlmaWxsXCJcblx0Ly8gaW1wb3J0IFdlYlZSTWFuYWdlciBmcm9tIFwid2VidnItYm9pbGVycGxhdGVcIlxuXHQvLyBTZXR1cCB0aHJlZS5qcyBXZWJHTCByZW5kZXJlci4gTm90ZTogQW50aWFsaWFzaW5nIGlzIGEgYmlnIHBlcmZvcm1hbmNlIGhpdC5cblx0Ly8gT25seSBlbmFibGUgaXQgaWYgeW91IGFjdHVhbGx5IG5lZWQgdG8uXG5cdC8vIHZhciByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHthbnRpYWxpYXM6IHRydWV9KTtcblx0Ly8gcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cdC8vXG5cdC8vIC8vIEFwcGVuZCB0aGUgY2FudmFzIGVsZW1lbnQgY3JlYXRlZCBieSB0aGUgcmVuZGVyZXIgdG8gZG9jdW1lbnQgYm9keSBlbGVtZW50LlxuXHQvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXHQvL1xuXHQvLyAvLyBDcmVhdGUgYSB0aHJlZS5qcyBzY2VuZS5cblx0Ly8gdmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cdC8vXG5cdC8vIC8vIENyZWF0ZSBhIHRocmVlLmpzIGNhbWVyYS5cblx0Ly8gdmFyIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDApO1xuXHQvL1xuXHQvLyAvLyBBcHBseSBWUiBoZWFkc2V0IHBvc2l0aW9uYWwgZGF0YSB0byBjYW1lcmEuXG5cdC8vIHZhciBjb250cm9scyA9IG5ldyBUSFJFRS5WUkNvbnRyb2xzKGNhbWVyYSk7XG5cdC8vIC8v56uZ56uL5ae/5oCBXG5cdC8vIGNvbnRyb2xzLnN0YW5kaW5nID0gdHJ1ZTtcblx0Ly9cblx0Ly8gLy8gQXBwbHkgVlIgc3RlcmVvIHJlbmRlcmluZyB0byByZW5kZXJlci5cblx0Ly8gdmFyIGVmZmVjdCA9IG5ldyBUSFJFRS5WUkVmZmVjdChyZW5kZXJlcik7XG5cdC8vIGVmZmVjdC5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuXHQvL1xuXHQvLyAvLyBDcmVhdGUgYSBWUiBtYW5hZ2VyIGhlbHBlciB0byBlbnRlciBhbmQgZXhpdCBWUiBtb2RlLlxuXHQvLyAvL+aMiemSruWSjOWFqOWxj+aooeW8j+euoeeQhlxuXHQvLyB2YXIgcGFyYW1zID0ge1xuXHQvLyAgIGhpZGVCdXR0b246IGZhbHNlLCAvLyBEZWZhdWx0OiBmYWxzZS5cblx0Ly8gICBpc1VuZGlzdG9ydGVkOiBmYWxzZSAvLyBEZWZhdWx0OiBmYWxzZS5cblx0Ly8gfTtcblx0Ly8gdmFyIG1hbmFnZXIgPSBuZXcgV2ViVlJNYW5hZ2VyKHJlbmRlcmVyLCBlZmZlY3QsIHBhcmFtcyk7XG5cdC8vXG5cdC8vXG5cdC8vIC8vIEFkZCBhIHJlcGVhdGluZyBncmlkIGFzIGEgc2t5Ym94LlxuXHQvLyB2YXIgYm94U2l6ZSA9IDQ7XG5cdC8vIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xuXHQvLyBsb2FkZXIubG9hZCgncHVibGljL2ltYWdlcy9ib3gucG5nJywgb25UZXh0dXJlTG9hZGVkKTtcblx0XG5cdC8vIGZ1bmN0aW9uIG9uVGV4dHVyZUxvYWRlZCh0ZXh0dXJlKSB7XG5cdC8vICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuXHQvLyAgIHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcblx0Ly8gICB0ZXh0dXJlLnJlcGVhdC5zZXQoYm94U2l6ZSwgYm94U2l6ZSk7XG5cdC8vXG5cdC8vICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KGJveFNpemUsIGJveFNpemUsIGJveFNpemUpO1xuXHQvLyAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG5cdC8vICAgICBtYXA6IHRleHR1cmUsXG5cdC8vICAgICBjb2xvcjogMHgwMUJFMDAsXG5cdC8vICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxuXHQvLyAgIH0pO1xuXHQvL1xuXHQvLyAgIC8vIEFsaWduIHRoZSBza3lib3ggdG8gdGhlIGZsb29yICh3aGljaCBpcyBhdCB5PTApLlxuXHQvLyAgIHZhciBza3lib3ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHQvLyAgIHNreWJveC5wb3NpdGlvbi55ID0gYm94U2l6ZS8yO1xuXHQvLyAgIHNjZW5lLmFkZChza3lib3gpO1xuXHQvL1xuXHQvLyAgIC8vIEZvciBoaWdoIGVuZCBWUiBkZXZpY2VzIGxpa2UgVml2ZSBhbmQgT2N1bHVzLCB0YWtlIGludG8gYWNjb3VudCB0aGUgc3RhZ2Vcblx0Ly8gICAvLyBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxuXHQvLyAgIC8v5Zyo6auY56uv55qE6K6+5aSH5LiK77yM6KaB6ICD6JmR5Yiw6K6+5aSH5o+Q5L6b55qE5Zy65pmv5L+h5oGv55qE5pu05paw44CCXG5cdC8vICAgc2V0dXBTdGFnZSgpO1xuXHQvLyB9XG5cdC8vXG5cdC8vIC8vIENyZWF0ZSAzRCBvYmplY3RzLlxuXHQvLyB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4yLCAwLjIsIDAuMik7XG5cdC8vIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwoKTtcblx0Ly8gdmFyIGN1YmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHQvL1xuXHQvLyAvLyBQb3NpdGlvbiBjdWJlIG1lc2ggdG8gYmUgcmlnaHQgaW4gZnJvbnQgb2YgeW91LlxuXHQvLyBjdWJlLnBvc2l0aW9uLnNldCgwLCBjb250cm9scy51c2VySGVpZ2h0LCAtMSk7XG5cdC8vIC8vIGN1YmUucG9zaXRpb24uc2V0KDAsIDIsIC0xKTtcblx0Ly8gdmFyIHBhbmVsR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyLCAxKTtcblx0Ly8gdmFyIHBhbmVsID0gbmV3IFRIUkVFLk1lc2gocGFuZWxHZW9tZXRyeSxtYXRlcmlhbCk7XG5cdC8vIHBhbmVsLnBvc2l0aW9uLnNldCgwLDIuNSwtMS45OTkpXG5cdC8vIC8vIEFkZCBjdWJlIG1lc2ggdG8geW91ciB0aHJlZS5qcyBzY2VuZVxuXHQvLyBzY2VuZS5hZGQocGFuZWwpO1xuXHRcblx0Ly8gS2ljayBvZmYgYW5pbWF0aW9uIGxvb3Bcblx0Ly8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXHRcblx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplLCB0cnVlKTtcblx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLCBvblJlc2l6ZSwgdHJ1ZSk7XG5cdFxuXHQvLyBSZXF1ZXN0IGFuaW1hdGlvbiBmcmFtZSBsb29wIGZ1bmN0aW9uXG5cdC8vIHZhciBsYXN0UmVuZGVyID0gMDtcblx0XG5cdC8vIGZ1bmN0aW9uIGFuaW1hdGUodGltZXN0YW1wKSB7XG5cdC8vICAgdmFyIGRlbHRhID0gTWF0aC5taW4odGltZXN0YW1wIC0gbGFzdFJlbmRlciwgNTAwKTtcblx0Ly8gICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xuXHQvL1xuXHQvLyAgIC8v56uL5pa55L2T55qE5peL6L2sXG5cdC8vICAgY3ViZS5yb3RhdGlvbi55ICs9IGRlbHRhICogMC4wMDA2O1xuXHQvL1xuXHQvLyAgIC8vIFVwZGF0ZSBWUiBoZWFkc2V0IHBvc2l0aW9uIGFuZCBhcHBseSB0byBjYW1lcmEuXG5cdC8vICAgLy/mm7TmlrDojrflj5ZITUTnmoTkv6Hmga9cblx0Ly8gICBjb250cm9scy51cGRhdGUoKTtcblx0Ly9cblx0Ly9cblx0Ly8gICAvLyBSZW5kZXIgdGhlIHNjZW5lIHRocm91Z2ggdGhlIG1hbmFnZXIuXG5cdC8vICAgLy/ov5vooYxjYW1lcmHmm7TmlrDlkozlnLrmma/nu5jliLZcblx0Ly8gICBtYW5hZ2VyLnJlbmRlcihzY2VuZSwgY2FtZXJhLCB0aW1lc3RhbXApO1xuXHQvLyAgIC8vIHJlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpXG5cdC8vXG5cdC8vICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXHQvLyB9XG5cdC8vXG5cdC8vIGZ1bmN0aW9uIG9uUmVzaXplKGUpIHtcblx0Ly8gICBlZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcblx0Ly8gICBjYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdC8vICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcblx0Ly8gfVxuXHQvL1xuXHQvLyB2YXIgZGlzcGxheTtcblx0Ly9cblx0Ly8gLy8gR2V0IHRoZSBITUQsIGFuZCBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggc29tZXRoaW5nIHRoYXQgc3BlY2lmaWVzXG5cdC8vIC8vIHN0YWdlUGFyYW1ldGVycywgcmVhcnJhbmdlIHRoZSBzY2VuZS5cblx0Ly8gZnVuY3Rpb24gc2V0dXBTdGFnZSgpIHtcblx0Ly8gICBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cygpLnRoZW4oZnVuY3Rpb24oZGlzcGxheXMpIHtcblx0Ly8gICAgIGlmIChkaXNwbGF5cy5sZW5ndGggPiAwKSB7XG5cdC8vICAgICAgIGRpc3BsYXkgPSBkaXNwbGF5c1swXTtcblx0Ly8gICAgICAgaWYgKGRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKSB7XG5cdC8vICAgICAgICAgc2V0U3RhZ2VEaW1lbnNpb25zKGRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKTtcblx0Ly8gICAgICAgfVxuXHQvLyAgICAgfVxuXHQvLyAgIH0pO1xuXHQvLyB9XG5cdC8vXG5cdC8vIGZ1bmN0aW9uIHNldFN0YWdlRGltZW5zaW9ucyhzdGFnZSkge1xuXHQvLyAgIC8vIE1ha2UgdGhlIHNreWJveCBmaXQgdGhlIHN0YWdlLlxuXHQvLyAgIHZhciBtYXRlcmlhbCA9IHNreWJveC5tYXRlcmlhbDtcblx0Ly8gICBzY2VuZS5yZW1vdmUoc2t5Ym94KTtcblx0Ly9cblx0Ly8gICAvLyBTaXplIHRoZSBza3lib3ggYWNjb3JkaW5nIHRvIHRoZSBzaXplIG9mIHRoZSBhY3R1YWwgc3RhZ2UuXG5cdC8vICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHN0YWdlLnNpemVYLCBib3hTaXplLCBzdGFnZS5zaXplWik7XG5cdC8vICAgc2t5Ym94ID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0Ly9cblx0Ly8gICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXG5cdC8vICAgc2t5Ym94LnBvc2l0aW9uLnkgPSBib3hTaXplLzI7XG5cdC8vICAgc2NlbmUuYWRkKHNreWJveCk7XG5cdC8vXG5cdC8vICAgLy8gUGxhY2UgdGhlIGN1YmUgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2NlbmUsIGF0IHVzZXIgaGVpZ2h0LlxuXHQvLyAgIGN1YmUucG9zaXRpb24uc2V0KDAsIGNvbnRyb2xzLnVzZXJIZWlnaHQsIDApO1xuXHQvLyB9XG5cdFxuXHRcblx0dmFyIGxvb3AgPSBmdW5jdGlvbiBsb29wKCkge1xuXHQgICAgZ2FtZS5yZW5kZXIoKTtcblx0ICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxuXHR9O1xuXHRsb29wKCk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfcGllY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9waWVjZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9waWVjZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZ1bmN0aW9uIEdhbWUoKSB7XG5cdCAgICAgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2FtZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGNhbnZhcyBlbGVtZW50IGNyZWF0ZWQgYnkgdGhlIHJlbmRlcmVyIHRvIGRvY3VtZW50IGJvZHkgZWxlbWVudC5cblx0ICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSB0aHJlZS5qcyBzY2VuZS5cblx0ICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSB0aHJlZS5qcyBjYW1lcmEuXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDApO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEFwcGx5IFZSIGhlYWRzZXQgcG9zaXRpb25hbCBkYXRhIHRvIGNhbWVyYS5cblx0ICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgVEhSRUUuVlJDb250cm9scyh0aGlzLmNhbWVyYSk7XG5cdCAgICAgICAgICAgICAgICAvL+ermeeri+Wnv+aAgVxuXHQgICAgICAgICAgICAgICAgdGhpcy5jb250cm9scy5zdGFuZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBUSFJFRS5WUkVmZmVjdCh0aGlzLnJlbmRlcmVyKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgVlIgbWFuYWdlciBoZWxwZXIgdG8gZW50ZXIgYW5kIGV4aXQgVlIgbW9kZS5cblx0ICAgICAgICAgICAgICAgIC8v5oyJ6ZKu5ZKM5YWo5bGP5qih5byP566h55CGXG5cdCAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBoaWRlQnV0dG9uOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5kaXN0b3J0ZWQ6IGZhbHNlIC8vIERlZmF1bHQ6IGZhbHNlLlxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBXZWJWUk1hbmFnZXIodGhpcy5yZW5kZXJlciwgdGhpcy5lZmZlY3QsIHBhcmFtcyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy9iaW5kIHRoaXNcblx0ICAgICAgICAgICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkID0gdGhpcy5vblRleHR1cmVMb2FkZWQuYmluZCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnNldHVwU3RhZ2UgPSB0aGlzLnNldHVwU3RhZ2UuYmluZCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zID0gdGhpcy5zZXRTdGFnZURpbWVuc2lvbnMuYmluZCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMucGxhY2VQaWVjZXMgPSB0aGlzLnBsYWNlUGllY2VzLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAvL1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEFkZCBhIHJlcGVhdGluZyBncmlkIGFzIGEgc2t5Ym94LlxuXHQgICAgICAgICAgICAgICAgdGhpcy5ib3hTaXplID0gMjA7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxvYWRlci5sb2FkKFwicHVibGljL2ltYWdlcy9ib3gucG5nXCIsIHRoaXMub25UZXh0dXJlTG9hZGVkKTtcblx0ICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMub25SZXNpemUsIHRydWUpO1xuXHQgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ2cmRpc3BsYXlwcmVzZW50Y2hhbmdlXCIsIHRoaXMub25SZXNpemUsIHRydWUpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gMDtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoR2FtZSwgW3tcblx0ICAgICAgICAgICAgICAgIGtleTogXCJvblRleHR1cmVMb2FkZWRcIixcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblRleHR1cmVMb2FkZWQodGV4dHVyZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5yZXBlYXQuc2V0KHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHRleHR1cmUsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkJhY2tTaWRlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxpZ24gdGhlIHNreWJveCB0byB0aGUgZmxvb3IgKHdoaWNoIGlzIGF0IHk9MCkuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2t5Ym94ID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5za3lib3gucG9zaXRpb24ueSA9IHRoaXMuYm94U2l6ZSAvIDI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuc2t5Ym94KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYW5lbEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMiwgMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYW5lbCA9IG5ldyBUSFJFRS5NZXNoKHBhbmVsR2VvbWV0cnksIG1hdGVyaWFsKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwucG9zaXRpb24uc2V0KDAsIDIuNSwgLTEuOTk5KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGN1YmUgbWVzaCB0byB5b3VyIHRocmVlLmpzIHNjZW5lXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKHBhbmVsKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZVBpZWNlcygpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGhpZ2ggZW5kIFZSIGRldmljZXMgbGlrZSBWaXZlIGFuZCBPY3VsdXMsIHRha2UgaW50byBhY2NvdW50IHRoZSBzdGFnZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvL+WcqOmrmOerr+eahOiuvuWkh+S4iu+8jOimgeiAg+iZkeWIsOiuvuWkh+aPkOS+m+eahOWcuuaZr+S/oeaBr+eahOabtOaWsOOAglxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwU3RhZ2UoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6IFwicGxhY2VQaWVjZXNcIixcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGFjZVBpZWNlcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZzFcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2lkdGggPSB0aGlzLmltZy53aWR0aDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdIZWlnaHQgPSB0aGlzLmltZy5oZWlnaHQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTnVtYmVyID0gNDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waWVjZVdpZHRoID0gdGhpcy5waWVjZUhlaWdodCA9IHRoaXMuaW1nV2lkdGggLyB0aGlzLmNvbHVtbk51bWJlcjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dOdW1iZXIgPSB0aGlzLmltZ0hlaWdodCAvIHRoaXMucGllY2VXaWR0aDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQxID0gY2FudmFzMS5nZXRDb250ZXh0KFwiMmRcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQxLmZvbnQgPSBcIkJvbGQgNDBweCBBcmlhbFwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0MS5maWxsU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsMC45NSlcIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDEuZmlsbFRleHQoXCJIZWxsbywgd29ybGQhXCIsIDUwLCA1MCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYW52YXMgY29udGVudHMgd2lsbCBiZSB1c2VkIGZvciBhIHRleHR1cmVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmUxID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUxLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbDEgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBtYXA6IHRleHR1cmUxLCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRlcmlhbDEudHJhbnNwYXJlbnQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaDEgPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMCwgNSksIG1hdGVyaWFsMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1lc2gxLnBvc2l0aW9uLnNldCgwLCAyLCA5KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaDEpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhczIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dDIgPSBjYW52YXMyLmdldENvbnRleHQoXCIyZFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FudmFzIGNvbnRlbnRzIHdpbGwgYmUgdXNlZCBmb3IgYSB0ZXh0dXJlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlMiA9IG5ldyBUSFJFRS5UZXh0dXJlKGNhbnZhczIpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBhbiBpbWFnZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VPYmouc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHRoZSBpbWFnZSBpcyBsb2FkZWQsIHRoaXMgZnVuY3Rpb24gZXhlY3V0ZXNcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2FudmFzMi53aWR0aCwgY2FudmFzMi5oZWlnaHQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmltZy5zcmMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3MgPSBjYW52YXMyLndpZHRoIC8gMS41IC8gaW1hZ2VPYmoud2lkdGg7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocyA9IGNhbnZhczIuaGVpZ2h0IC8gMS41IC8gaW1hZ2VPYmouaGVpZ2h0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjYWxlID0gTWF0aC5taW4od3MsIGhzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDIuc2NhbGUodGhpcy5zY2FsZSwgdGhpcy5zY2FsZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZU9iai5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDIuZHJhd0ltYWdlKGltYWdlT2JqLCBpbWFnZU9iai53aWR0aCwgaW1hZ2VPYmouaGVpZ2h0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dHVyZTIpIC8vIGNoZWNrcyBpZiB0ZXh0dXJlIGV4aXN0c1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTIubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwyID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgbWFwOiB0ZXh0dXJlMiwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSB9KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwyLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNhbnZhczIud2lkdGgsIGNhbnZhczIuaGVpZ2h0KVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaDIgPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyMCwgMjApLCBtYXRlcmlhbDIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBtZXNoMi5wb3NpdGlvbi5zZXQoMCwgOCwgLTkuOSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKG1lc2gyKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKHRpbWVzdGFtcCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZGVsdGEgPSBNYXRoLm1pbih0aW1lc3RhbXAgLSB0aGlzLmxhc3RSZW5kZXIsIDUwMClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gdGltZXN0YW1wO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy/nq4vmlrnkvZPnmoTml4vovaxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0aGlzLmN1YmUucm90YXRpb24ueSArPSBkZWx0YSAqIDAuMDAwNjtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBWUiBoZWFkc2V0IHBvc2l0aW9uIGFuZCBhcHBseSB0byBjYW1lcmEuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8v5pu05paw6I635Y+WSE1E55qE5L+h5oGvXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgdGhlIHNjZW5lIHRocm91Z2ggdGhlIG1hbmFnZXIuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+b6KGMY2FtZXJh5pu05paw5ZKM5Zy65pmv57uY5Yi2XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRpbWVzdGFtcCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpXG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgIGtleTogXCJvblJlc2l6ZVwiLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6IFwic2V0U3RhZ2VEaW1lbnNpb25zXCIsXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3RhZ2VEaW1lbnNpb25zKHN0YWdlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgdGhlIHNreWJveCBmaXQgdGhlIHN0YWdlLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLnNreWJveC5tYXRlcmlhbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5za3lib3gpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIHRoaXMuYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2t5Ym94LnBvc2l0aW9uLnkgPSB0aGlzLmJveFNpemUgLyAyO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGFjZSB0aGUgY3ViZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY2VuZSwgYXQgdXNlciBoZWlnaHQuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3ViZS5wb3NpdGlvbi5zZXQoMCwgY29udHJvbHMudXNlckhlaWdodCwgMCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAga2V5OiBcInNldHVwU3RhZ2VcIixcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cFN0YWdlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbihmdW5jdGlvbiAoZGlzcGxheXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5ID0gZGlzcGxheXNbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YWdlRGltZW5zaW9ucyhzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH1dKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIEdhbWU7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEdhbWU7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBQaWVjZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFBpZWNlKGltZywgeCwgeSwgd2lkdGgsIGhlaWdodCwgY2FudmFzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpZWNlKTtcblx0XG5cdCAgICAgICAgdGhpcy5pbWcgPSBpbWc7XG5cdCAgICAgICAgdGhpcy54ID0geDtcblx0ICAgICAgICB0aGlzLnkgPSB5O1xuXHQgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcblx0ICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcblx0ICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcblx0ICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDQwMDtcblx0ICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSAzMDA7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhQaWVjZSwgW3tcblx0ICAgICAgICBrZXk6IFwiZHJhd1wiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KCkge1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmltZywgdGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblx0ICAgICAgICAgICAgLy8gdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZyx0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsMCwwLHRoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodClcblx0ICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiO1xuXHQgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgNDAwLCAzMDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gUGllY2U7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBpZWNlO1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcImltYWdlcy9wdXp6bGVzL2NhcnRvb24gKDEpLmpwZ1wiO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBWUlB1enpsZS5idW5kbGUuanNcbiAqKi8iLCIgXHR2YXIgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2sgPSB0aGlzW1wid2VicGFja0hvdFVwZGF0ZVwiXTtcbiBcdHRoaXNbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gXHJcbiBcdGZ1bmN0aW9uIHdlYnBhY2tIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiBcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiBcdFx0c2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gXHRcdHNjcmlwdC5jaGFyc2V0ID0gXCJ1dGYtOFwiO1xyXG4gXHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzXCI7XHJcbiBcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KGNhbGxiYWNrKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHRpZih0eXBlb2YgWE1MSHR0cFJlcXVlc3QgPT09IFwidW5kZWZpbmVkXCIpXHJcbiBcdFx0XHRyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFwiTm8gYnJvd3NlciBzdXBwb3J0XCIpKTtcclxuIFx0XHR0cnkge1xyXG4gXHRcdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuIFx0XHRcdHZhciByZXF1ZXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiO1xyXG4gXHRcdFx0cmVxdWVzdC5vcGVuKFwiR0VUXCIsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuIFx0XHRcdHJlcXVlc3QudGltZW91dCA9IDEwMDAwO1xyXG4gXHRcdFx0cmVxdWVzdC5zZW5kKG51bGwpO1xyXG4gXHRcdH0gY2F0Y2goZXJyKSB7XHJcbiBcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyKTtcclxuIFx0XHR9XHJcbiBcdFx0cmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuIFx0XHRcdGlmKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xyXG4gXHRcdFx0aWYocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcclxuIFx0XHRcdFx0Ly8gdGltZW91dFxyXG4gXHRcdFx0XHRjYWxsYmFjayhuZXcgRXJyb3IoXCJNYW5pZmVzdCByZXF1ZXN0IHRvIFwiICsgcmVxdWVzdFBhdGggKyBcIiB0aW1lZCBvdXQuXCIpKTtcclxuIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XHJcbiBcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcclxuIFx0XHRcdFx0Y2FsbGJhY2soKTtcclxuIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcclxuIFx0XHRcdFx0Ly8gb3RoZXIgZmFpbHVyZVxyXG4gXHRcdFx0XHRjYWxsYmFjayhuZXcgRXJyb3IoXCJNYW5pZmVzdCByZXF1ZXN0IHRvIFwiICsgcmVxdWVzdFBhdGggKyBcIiBmYWlsZWQuXCIpKTtcclxuIFx0XHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRcdC8vIHN1Y2Nlc3NcclxuIFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHR2YXIgdXBkYXRlID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiBcdFx0XHRcdH0gY2F0Y2goZSkge1xyXG4gXHRcdFx0XHRcdGNhbGxiYWNrKGUpO1xyXG4gXHRcdFx0XHRcdHJldHVybjtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRjYWxsYmFjayhudWxsLCB1cGRhdGUpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH07XHJcbiBcdH1cclxuXG4gXHRcclxuIFx0XHJcbiBcdC8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL2JlZjQ1YjAvc3JjL3NoYXJlZC91dGlscy9jYW5EZWZpbmVQcm9wZXJ0eS5qc1xyXG4gXHR2YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBmYWxzZTtcclxuIFx0dHJ5IHtcclxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwieFwiLCB7XHJcbiBcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge31cclxuIFx0XHR9KTtcclxuIFx0XHRjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XHJcbiBcdH0gY2F0Y2goeCkge1xyXG4gXHRcdC8vIElFIHdpbGwgZmFpbCBvbiBkZWZpbmVQcm9wZXJ0eVxyXG4gXHR9XHJcbiBcdFxyXG4gXHR2YXIgaG90QXBwbHlPblVwZGF0ZSA9IHRydWU7XHJcbiBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiZmEwN2M2ODNhYjdmNTM3YzE5NTRcIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcclxuIFx0dmFyIGhvdEN1cnJlbnRQYXJlbnRzID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdHZhciBtZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdGlmKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XHJcbiBcdFx0dmFyIGZuID0gZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4gXHRcdFx0aWYobWUuaG90LmFjdGl2ZSkge1xyXG4gXHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XHJcbiBcdFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpIDwgMClcclxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5wdXNoKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0XHRpZihtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpIDwgMClcclxuIFx0XHRcdFx0XHRcdG1lLmNoaWxkcmVuLnB1c2gocmVxdWVzdCk7XHJcbiBcdFx0XHRcdH0gZWxzZSBob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbiBcdFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0XHRjb25zb2xlLndhcm4oXCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyByZXF1ZXN0ICsgXCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICsgbW9kdWxlSWQpO1xyXG4gXHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFtdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XHJcbiBcdFx0fTtcclxuIFx0XHRmb3IodmFyIG5hbWUgaW4gX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpKSB7XHJcbiBcdFx0XHRcdGlmKGNhbkRlZmluZVByb3BlcnR5KSB7XHJcbiBcdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCAoZnVuY3Rpb24obmFtZSkge1xyXG4gXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuIFx0XHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxyXG4gXHRcdFx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG4gXHRcdFx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0XHRcdFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdO1xyXG4gXHRcdFx0XHRcdFx0XHR9LFxyXG4gXHRcdFx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiBcdFx0XHRcdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXSA9IHZhbHVlO1xyXG4gXHRcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0XHR9O1xyXG4gXHRcdFx0XHRcdH0obmFtZSkpKTtcclxuIFx0XHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0XHRmbltuYW1lXSA9IF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdGZ1bmN0aW9uIGVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xyXG4gXHRcdFx0aWYoaG90U3RhdHVzID09PSBcInJlYWR5XCIpXHJcbiBcdFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XHJcbiBcdFx0XHRob3RDaHVua3NMb2FkaW5nKys7XHJcbiBcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCwgZnVuY3Rpb24oKSB7XHJcbiBcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChudWxsLCBmbik7XHJcbiBcdFx0XHRcdH0gZmluYWxseSB7XHJcbiBcdFx0XHRcdFx0ZmluaXNoQ2h1bmtMb2FkaW5nKCk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHJcbiBcdFx0XHRcdGZ1bmN0aW9uIGZpbmlzaENodW5rTG9hZGluZygpIHtcclxuIFx0XHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XHJcbiBcdFx0XHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xyXG4gXHRcdFx0XHRcdFx0aWYoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xyXG4gXHRcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuIFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRcdGlmKGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbiBcdFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuIFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH0pO1xyXG4gXHRcdH1cclxuIFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBcImVcIiwge1xyXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG4gXHRcdFx0XHR2YWx1ZTogZW5zdXJlXHJcbiBcdFx0XHR9KTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0Zm4uZSA9IGVuc3VyZTtcclxuIFx0XHR9XHJcbiBcdFx0cmV0dXJuIGZuO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdHZhciBob3QgPSB7XHJcbiBcdFx0XHQvLyBwcml2YXRlIHN0dWZmXHJcbiBcdFx0XHRfYWNjZXB0ZWREZXBlbmRlbmNpZXM6IHt9LFxyXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcclxuIFx0XHRcdF9zZWxmQWNjZXB0ZWQ6IGZhbHNlLFxyXG4gXHRcdFx0X3NlbGZEZWNsaW5lZDogZmFsc2UsXHJcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcclxuIFx0XHJcbiBcdFx0XHQvLyBNb2R1bGUgQVBJXHJcbiBcdFx0XHRhY3RpdmU6IHRydWUsXHJcbiBcdFx0XHRhY2NlcHQ6IGZ1bmN0aW9uKGRlcCwgY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJmdW5jdGlvblwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gZGVwO1xyXG4gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXHJcbiBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuIFx0XHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IGNhbGxiYWNrO1xyXG4gXHRcdFx0XHRlbHNlXHJcbiBcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2s7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XHJcbiBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmRGVjbGluZWQgPSB0cnVlO1xyXG4gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwibnVtYmVyXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1tkZXBdID0gdHJ1ZTtcclxuIFx0XHRcdFx0ZWxzZVxyXG4gXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXHJcbiBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90Ll9kaXNwb3NlSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcclxuIFx0XHRcdC8vIE1hbmFnZW1lbnQgQVBJXHJcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXHJcbiBcdFx0XHRhcHBseTogaG90QXBwbHksXHJcbiBcdFx0XHRzdGF0dXM6IGZ1bmN0aW9uKGwpIHtcclxuIFx0XHRcdFx0aWYoIWwpIHJldHVybiBob3RTdGF0dXM7XHJcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdFN0YXR1c0hhbmRsZXJzLmluZGV4T2YobCk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3RTdGF0dXNIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdH0sXHJcbiBcdFxyXG4gXHRcdFx0Ly9pbmhlcml0IGZyb20gcHJldmlvdXMgZGlzcG9zZSBjYWxsXHJcbiBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cclxuIFx0XHR9O1xyXG4gXHRcdHJldHVybiBob3Q7XHJcbiBcdH1cclxuIFx0XHJcbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xyXG4gXHR2YXIgaG90U3RhdHVzID0gXCJpZGxlXCI7XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XHJcbiBcdFx0aG90U3RhdHVzID0gbmV3U3RhdHVzO1xyXG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcclxuIFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzW2ldLmNhbGwobnVsbCwgbmV3U3RhdHVzKTtcclxuIFx0fVxyXG4gXHRcclxuIFx0Ly8gd2hpbGUgZG93bmxvYWRpbmdcclxuIFx0dmFyIGhvdFdhaXRpbmdGaWxlcyA9IDA7XHJcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcclxuIFx0dmFyIGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4gXHR2YXIgaG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcclxuIFx0dmFyIGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbiBcdHZhciBob3RDYWxsYmFjaztcclxuIFx0XHJcbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xyXG4gXHR2YXIgaG90VXBkYXRlLCBob3RVcGRhdGVOZXdIYXNoO1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xyXG4gXHRcdHZhciBpc051bWJlciA9ICgraWQpICsgXCJcIiA9PT0gaWQ7XHJcbiBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5LCBjYWxsYmFjaykge1xyXG4gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xyXG4gXHRcdGlmKHR5cGVvZiBhcHBseSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gZmFsc2U7XHJcbiBcdFx0XHRjYWxsYmFjayA9IGFwcGx5O1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XHJcbiBcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycikge1xyXG4gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuIFx0XHRcdH07XHJcbiBcdFx0fVxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImNoZWNrXCIpO1xyXG4gXHRcdGhvdERvd25sb2FkTWFuaWZlc3QoZnVuY3Rpb24oZXJyLCB1cGRhdGUpIHtcclxuIFx0XHRcdGlmKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbiBcdFx0XHRpZighdXBkYXRlKSB7XHJcbiBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XHJcbiBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIG51bGwpO1xyXG4gXHRcdFx0XHRyZXR1cm47XHJcbiBcdFx0XHR9XHJcbiBcdFxyXG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcclxuIFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuIFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB1cGRhdGUuYy5sZW5ndGg7IGkrKylcclxuIFx0XHRcdFx0aG90QXZhaWxpYmxlRmlsZXNNYXBbdXBkYXRlLmNbaV1dID0gdHJ1ZTtcclxuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcclxuIFx0XHJcbiBcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4gXHRcdFx0aG90Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuIFx0XHRcdGhvdFVwZGF0ZSA9IHt9O1xyXG4gXHRcdFx0dmFyIGNodW5rSWQgPSAwO1xyXG4gXHRcdFx0eyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmUtYmxvY2tzXHJcbiBcdFx0XHRcdC8qZ2xvYmFscyBjaHVua0lkICovXHJcbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIiAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4gXHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0fSk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxyXG4gXHRcdFx0cmV0dXJuO1xyXG4gXHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdID0gZmFsc2U7XHJcbiBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFx0aWYoLS1ob3RXYWl0aW5nRmlsZXMgPT09IDAgJiYgaG90Q2h1bmtzTG9hZGluZyA9PT0gMCkge1xyXG4gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4gXHRcdH1cclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xyXG4gXHRcdGlmKCFob3RBdmFpbGlibGVGaWxlc01hcFtjaHVua0lkXSkge1xyXG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzKys7XHJcbiBcdFx0XHRob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdH1cclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJyZWFkeVwiKTtcclxuIFx0XHR2YXIgY2FsbGJhY2sgPSBob3RDYWxsYmFjaztcclxuIFx0XHRob3RDYWxsYmFjayA9IG51bGw7XHJcbiBcdFx0aWYoIWNhbGxiYWNrKSByZXR1cm47XHJcbiBcdFx0aWYoaG90QXBwbHlPblVwZGF0ZSkge1xyXG4gXHRcdFx0aG90QXBwbHkoaG90QXBwbHlPblVwZGF0ZSwgY2FsbGJhY2spO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4gXHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaCh0b01vZHVsZUlkKGlkKSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RBcHBseShvcHRpb25zLCBjYWxsYmFjaykge1xyXG4gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJhcHBseSgpIGlzIG9ubHkgYWxsb3dlZCBpbiByZWFkeSBzdGF0dXNcIik7XHJcbiBcdFx0aWYodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBvcHRpb25zO1xyXG4gXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG4gXHRcdH0gZWxzZSBpZihvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XHJcbiBcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycikge1xyXG4gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuIFx0XHRcdH07XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4gXHRcdFx0fTtcclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlKSB7XHJcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW21vZHVsZV07XHJcbiBcdFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcclxuIFx0XHJcbiBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuIFx0XHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0aWYoIW1vZHVsZSB8fCBtb2R1bGUuaG90Ll9zZWxmQWNjZXB0ZWQpXHJcbiBcdFx0XHRcdFx0Y29udGludWU7XHJcbiBcdFx0XHRcdGlmKG1vZHVsZS5ob3QuX3NlbGZEZWNsaW5lZCkge1xyXG4gXHRcdFx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArIG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRpZihtb2R1bGVJZCA9PT0gMCkge1xyXG4gXHRcdFx0XHRcdHJldHVybjtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0XHR2YXIgcGFyZW50SWQgPSBtb2R1bGUucGFyZW50c1tpXTtcclxuIFx0XHRcdFx0XHR2YXIgcGFyZW50ID0gaW5zdGFsbGVkTW9kdWxlc1twYXJlbnRJZF07XHJcbiBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbiBcdFx0XHRcdFx0XHRyZXR1cm4gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIG9mIGRlY2xpbmVkIGRlcGVuZGVuY3k6IFwiICsgbW9kdWxlSWQgKyBcIiBpbiBcIiArIHBhcmVudElkKTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0aWYob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpID49IDApIGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdGlmKHBhcmVudC5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xyXG4gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcclxuIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XHJcbiBcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0sIFttb2R1bGVJZF0pO1xyXG4gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF07XHJcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xyXG4gXHRcdFx0XHRcdHF1ZXVlLnB1c2gocGFyZW50SWQpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFxyXG4gXHRcdFx0cmV0dXJuIFtvdXRkYXRlZE1vZHVsZXMsIG91dGRhdGVkRGVwZW5kZW5jaWVzXTtcclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdGZ1bmN0aW9uIGFkZEFsbFRvU2V0KGEsIGIpIHtcclxuIFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdHZhciBpdGVtID0gYltpXTtcclxuIFx0XHRcdFx0aWYoYS5pbmRleE9mKGl0ZW0pIDwgMClcclxuIFx0XHRcdFx0XHRhLnB1c2goaXRlbSk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxyXG4gXHRcdC8vIHRoZSBcIm91dGRhdGVkXCIgc3RhdHVzIGNhbiBwcm9wYWdhdGUgdG8gcGFyZW50cyBpZiB0aGV5IGRvbid0IGFjY2VwdCB0aGUgY2hpbGRyZW5cclxuIFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcclxuIFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0dmFyIGFwcGxpZWRVcGRhdGUgPSB7fTtcclxuIFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHRvTW9kdWxlSWQoaWQpO1xyXG4gXHRcdFx0XHR2YXIgcmVzdWx0ID0gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdGlmKCFyZXN1bHQpIHtcclxuIFx0XHRcdFx0XHRpZihvcHRpb25zLmlnbm9yZVVuYWNjZXB0ZWQpXHJcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuIFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIFwiICsgbW9kdWxlSWQgKyBcIiBpcyBub3QgYWNjZXB0ZWRcIikpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGlmKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiBcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiYWJvcnRcIik7XHJcbiBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3VsdCk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSBob3RVcGRhdGVbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdFswXSk7XHJcbiBcdFx0XHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gcmVzdWx0WzFdKSB7XHJcbiBcdFx0XHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdFsxXSwgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxyXG4gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcclxuIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSwgcmVzdWx0WzFdW21vZHVsZUlkXSk7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBTdG9yZSBzZWxmIGFjY2VwdGVkIG91dGRhdGVkIG1vZHVsZXMgdG8gcmVxdWlyZSB0aGVtIGxhdGVyIGJ5IHRoZSBtb2R1bGUgc3lzdGVtXHJcbiBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xyXG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBvdXRkYXRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdHZhciBtb2R1bGVJZCA9IG91dGRhdGVkTW9kdWxlc1tpXTtcclxuIFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XHJcbiBcdFx0XHRcdFx0bW9kdWxlOiBtb2R1bGVJZCxcclxuIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXHJcbiBcdFx0XHRcdH0pO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiZGlzcG9zZVwiKTtcclxuIFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuIFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiBcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcclxuIFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdGlmKCFtb2R1bGUpIGNvbnRpbnVlO1xyXG4gXHRcclxuIFx0XHRcdHZhciBkYXRhID0ge307XHJcbiBcdFxyXG4gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXHJcbiBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xyXG4gXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRpc3Bvc2VIYW5kbGVycy5sZW5ndGg7IGorKykge1xyXG4gXHRcdFx0XHR2YXIgY2IgPSBkaXNwb3NlSGFuZGxlcnNbal07XHJcbiBcdFx0XHRcdGNiKGRhdGEpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdFx0aG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdID0gZGF0YTtcclxuIFx0XHJcbiBcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxyXG4gXHRcdFx0bW9kdWxlLmhvdC5hY3RpdmUgPSBmYWxzZTtcclxuIFx0XHJcbiBcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcclxuIFx0XHRcdGRlbGV0ZSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHJcbiBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxyXG4gXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IG1vZHVsZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xyXG4gXHRcdFx0XHR2YXIgY2hpbGQgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZS5jaGlsZHJlbltqXV07XHJcbiBcdFx0XHRcdGlmKCFjaGlsZCkgY29udGludWU7XHJcbiBcdFx0XHRcdHZhciBpZHggPSBjaGlsZC5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpO1xyXG4gXHRcdFx0XHRpZihpZHggPj0gMCkge1xyXG4gXHRcdFx0XHRcdGNoaWxkLnBhcmVudHMuc3BsaWNlKGlkeCwgMSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXHJcbiBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xyXG4gXHRcdFx0XHRcdHZhciBkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XHJcbiBcdFx0XHRcdFx0dmFyIGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xyXG4gXHRcdFx0XHRcdGlmKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIE5vdCBpbiBcImFwcGx5XCIgcGhhc2VcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJhcHBseVwiKTtcclxuIFx0XHJcbiBcdFx0aG90Q3VycmVudEhhc2ggPSBob3RVcGRhdGVOZXdIYXNoO1xyXG4gXHRcclxuIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIGFwcGxpZWRVcGRhdGUpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcHBsaWVkVXBkYXRlLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBhcHBsaWVkVXBkYXRlW21vZHVsZUlkXTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXHJcbiBcdFx0dmFyIGVycm9yID0gbnVsbDtcclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xyXG4gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xyXG4gXHRcdFx0XHRcdHZhciBjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xyXG4gXHRcdFx0XHRcdGlmKGNhbGxiYWNrcy5pbmRleE9mKGNiKSA+PSAwKSBjb250aW51ZTtcclxuIFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBjYiA9IGNhbGxiYWNrc1tpXTtcclxuIFx0XHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdFx0Y2Iob3V0ZGF0ZWREZXBlbmRlbmNpZXMpO1xyXG4gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbiBcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTG9hZCBzZWxmIGFjY2VwdGVkIG1vZHVsZXNcclxuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcclxuIFx0XHRcdHZhciBtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xyXG4gXHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4gXHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XHJcbiBcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gXHRcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xyXG4gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbiBcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fSBlbHNlIGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXHJcbiBcdFx0aWYoZXJyb3IpIHtcclxuIFx0XHRcdGhvdFNldFN0YXR1cyhcImZhaWxcIik7XHJcbiBcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuIFx0XHRjYWxsYmFjayhudWxsLCBvdXRkYXRlZE1vZHVsZXMpO1xyXG4gXHR9XHJcblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlLFxuIFx0XHRcdGhvdDogaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSxcbiBcdFx0XHRwYXJlbnRzOiBob3RDdXJyZW50UGFyZW50cyxcbiBcdFx0XHRjaGlsZHJlbjogW11cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkpO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL3B1YmxpYy9cIjtcblxuIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKSgwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGZhMDdjNjgzYWI3ZjUzN2MxOTU0XG4gKiovIiwiLy8gaW1wb3J0IFRIUkVFIGZyb20gXCJ0aHJlZVwiXHJcbi8vIGltcG9ydCB7IFZSQ29udHJvbHMsVlJFZmZlY3QgfSBmcm9tIFwidGhyZWVcIlxyXG4vLyBpbXBvcnQgXCJ3ZWJ2ci1wb2x5ZmlsbFwiXHJcbi8vIGltcG9ydCBXZWJWUk1hbmFnZXIgZnJvbSBcIndlYnZyLWJvaWxlcnBsYXRlXCJcclxuLy8gU2V0dXAgdGhyZWUuanMgV2ViR0wgcmVuZGVyZXIuIE5vdGU6IEFudGlhbGlhc2luZyBpcyBhIGJpZyBwZXJmb3JtYW5jZSBoaXQuXHJcbi8vIE9ubHkgZW5hYmxlIGl0IGlmIHlvdSBhY3R1YWxseSBuZWVkIHRvLlxyXG4vLyB2YXIgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7YW50aWFsaWFzOiB0cnVlfSk7XHJcbi8vIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xyXG4vL1xyXG4vLyAvLyBBcHBlbmQgdGhlIGNhbnZhcyBlbGVtZW50IGNyZWF0ZWQgYnkgdGhlIHJlbmRlcmVyIHRvIGRvY3VtZW50IGJvZHkgZWxlbWVudC5cclxuLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcclxuLy9cclxuLy8gLy8gQ3JlYXRlIGEgdGhyZWUuanMgc2NlbmUuXHJcbi8vIHZhciBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4vL1xyXG4vLyAvLyBDcmVhdGUgYSB0aHJlZS5qcyBjYW1lcmEuXHJcbi8vIHZhciBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDAwKTtcclxuLy9cclxuLy8gLy8gQXBwbHkgVlIgaGVhZHNldCBwb3NpdGlvbmFsIGRhdGEgdG8gY2FtZXJhLlxyXG4vLyB2YXIgY29udHJvbHMgPSBuZXcgVEhSRUUuVlJDb250cm9scyhjYW1lcmEpO1xyXG4vLyAvL+ermeeri+Wnv+aAgVxyXG4vLyBjb250cm9scy5zdGFuZGluZyA9IHRydWU7XHJcbi8vXHJcbi8vIC8vIEFwcGx5IFZSIHN0ZXJlbyByZW5kZXJpbmcgdG8gcmVuZGVyZXIuXHJcbi8vIHZhciBlZmZlY3QgPSBuZXcgVEhSRUUuVlJFZmZlY3QocmVuZGVyZXIpO1xyXG4vLyBlZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuLy9cclxuLy8gLy8gQ3JlYXRlIGEgVlIgbWFuYWdlciBoZWxwZXIgdG8gZW50ZXIgYW5kIGV4aXQgVlIgbW9kZS5cclxuLy8gLy/mjInpkq7lkozlhajlsY/mqKHlvI/nrqHnkIZcclxuLy8gdmFyIHBhcmFtcyA9IHtcclxuLy8gICBoaWRlQnV0dG9uOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXHJcbi8vICAgaXNVbmRpc3RvcnRlZDogZmFsc2UgLy8gRGVmYXVsdDogZmFsc2UuXHJcbi8vIH07XHJcbi8vIHZhciBtYW5hZ2VyID0gbmV3IFdlYlZSTWFuYWdlcihyZW5kZXJlciwgZWZmZWN0LCBwYXJhbXMpO1xyXG4vL1xyXG4vL1xyXG4vLyAvLyBBZGQgYSByZXBlYXRpbmcgZ3JpZCBhcyBhIHNreWJveC5cclxuLy8gdmFyIGJveFNpemUgPSA0O1xyXG4vLyB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuLy8gbG9hZGVyLmxvYWQoJ3B1YmxpYy9pbWFnZXMvYm94LnBuZycsIG9uVGV4dHVyZUxvYWRlZCk7XHJcblxyXG4vLyBmdW5jdGlvbiBvblRleHR1cmVMb2FkZWQodGV4dHVyZSkge1xyXG4vLyAgIHRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuLy8gICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbi8vICAgdGV4dHVyZS5yZXBlYXQuc2V0KGJveFNpemUsIGJveFNpemUpO1xyXG4vL1xyXG4vLyAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShib3hTaXplLCBib3hTaXplLCBib3hTaXplKTtcclxuLy8gICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xyXG4vLyAgICAgbWFwOiB0ZXh0dXJlLFxyXG4vLyAgICAgY29sb3I6IDB4MDFCRTAwLFxyXG4vLyAgICAgc2lkZTogVEhSRUUuQmFja1NpZGVcclxuLy8gICB9KTtcclxuLy9cclxuLy8gICAvLyBBbGlnbiB0aGUgc2t5Ym94IHRvIHRoZSBmbG9vciAod2hpY2ggaXMgYXQgeT0wKS5cclxuLy8gICB2YXIgc2t5Ym94ID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuLy8gICBza3lib3gucG9zaXRpb24ueSA9IGJveFNpemUvMjtcclxuLy8gICBzY2VuZS5hZGQoc2t5Ym94KTtcclxuLy9cclxuLy8gICAvLyBGb3IgaGlnaCBlbmQgVlIgZGV2aWNlcyBsaWtlIFZpdmUgYW5kIE9jdWx1cywgdGFrZSBpbnRvIGFjY291bnQgdGhlIHN0YWdlXHJcbi8vICAgLy8gcGFyYW1ldGVycyBwcm92aWRlZC5cclxuLy8gICAvL+WcqOmrmOerr+eahOiuvuWkh+S4iu+8jOimgeiAg+iZkeWIsOiuvuWkh+aPkOS+m+eahOWcuuaZr+S/oeaBr+eahOabtOaWsOOAglxyXG4vLyAgIHNldHVwU3RhZ2UoKTtcclxuLy8gfVxyXG4vL1xyXG4vLyAvLyBDcmVhdGUgM0Qgb2JqZWN0cy5cclxuLy8gdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMiwgMC4yLCAwLjIpO1xyXG4vLyB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsKCk7XHJcbi8vIHZhciBjdWJlID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuLy9cclxuLy8gLy8gUG9zaXRpb24gY3ViZSBtZXNoIHRvIGJlIHJpZ2h0IGluIGZyb250IG9mIHlvdS5cclxuLy8gY3ViZS5wb3NpdGlvbi5zZXQoMCwgY29udHJvbHMudXNlckhlaWdodCwgLTEpO1xyXG4vLyAvLyBjdWJlLnBvc2l0aW9uLnNldCgwLCAyLCAtMSk7XHJcbi8vIHZhciBwYW5lbEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMiwgMSk7XHJcbi8vIHZhciBwYW5lbCA9IG5ldyBUSFJFRS5NZXNoKHBhbmVsR2VvbWV0cnksbWF0ZXJpYWwpO1xyXG4vLyBwYW5lbC5wb3NpdGlvbi5zZXQoMCwyLjUsLTEuOTk5KVxyXG4vLyAvLyBBZGQgY3ViZSBtZXNoIHRvIHlvdXIgdGhyZWUuanMgc2NlbmVcclxuLy8gc2NlbmUuYWRkKHBhbmVsKTtcclxuXHJcbi8vIEtpY2sgb2ZmIGFuaW1hdGlvbiBsb29wXHJcbi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuXHJcbi8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSwgdHJ1ZSk7XHJcbi8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgb25SZXNpemUsIHRydWUpO1xyXG5cclxuLy8gUmVxdWVzdCBhbmltYXRpb24gZnJhbWUgbG9vcCBmdW5jdGlvblxyXG4vLyB2YXIgbGFzdFJlbmRlciA9IDA7XHJcblxyXG4vLyBmdW5jdGlvbiBhbmltYXRlKHRpbWVzdGFtcCkge1xyXG4vLyAgIHZhciBkZWx0YSA9IE1hdGgubWluKHRpbWVzdGFtcCAtIGxhc3RSZW5kZXIsIDUwMCk7XHJcbi8vICAgbGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcclxuLy9cclxuLy8gICAvL+eri+aWueS9k+eahOaXi+i9rFxyXG4vLyAgIGN1YmUucm90YXRpb24ueSArPSBkZWx0YSAqIDAuMDAwNjtcclxuLy9cclxuLy8gICAvLyBVcGRhdGUgVlIgaGVhZHNldCBwb3NpdGlvbiBhbmQgYXBwbHkgdG8gY2FtZXJhLlxyXG4vLyAgIC8v5pu05paw6I635Y+WSE1E55qE5L+h5oGvXHJcbi8vICAgY29udHJvbHMudXBkYXRlKCk7XHJcbi8vXHJcbi8vXHJcbi8vICAgLy8gUmVuZGVyIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSBtYW5hZ2VyLlxyXG4vLyAgIC8v6L+b6KGMY2FtZXJh5pu05paw5ZKM5Zy65pmv57uY5Yi2XHJcbi8vICAgbWFuYWdlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdGltZXN0YW1wKTtcclxuLy8gICAvLyByZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhKVxyXG4vL1xyXG4vLyAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuLy8gfVxyXG4vL1xyXG4vLyBmdW5jdGlvbiBvblJlc2l6ZShlKSB7XHJcbi8vICAgZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbi8vICAgY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4vLyAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbi8vIH1cclxuLy9cclxuLy8gdmFyIGRpc3BsYXk7XHJcbi8vXHJcbi8vIC8vIEdldCB0aGUgSE1ELCBhbmQgaWYgd2UncmUgZGVhbGluZyB3aXRoIHNvbWV0aGluZyB0aGF0IHNwZWNpZmllc1xyXG4vLyAvLyBzdGFnZVBhcmFtZXRlcnMsIHJlYXJyYW5nZSB0aGUgc2NlbmUuXHJcbi8vIGZ1bmN0aW9uIHNldHVwU3RhZ2UoKSB7XHJcbi8vICAgbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKGZ1bmN0aW9uKGRpc3BsYXlzKSB7XHJcbi8vICAgICBpZiAoZGlzcGxheXMubGVuZ3RoID4gMCkge1xyXG4vLyAgICAgICBkaXNwbGF5ID0gZGlzcGxheXNbMF07XHJcbi8vICAgICAgIGlmIChkaXNwbGF5LnN0YWdlUGFyYW1ldGVycykge1xyXG4vLyAgICAgICAgIHNldFN0YWdlRGltZW5zaW9ucyhkaXNwbGF5LnN0YWdlUGFyYW1ldGVycyk7XHJcbi8vICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICB9KTtcclxuLy8gfVxyXG4vL1xyXG4vLyBmdW5jdGlvbiBzZXRTdGFnZURpbWVuc2lvbnMoc3RhZ2UpIHtcclxuLy8gICAvLyBNYWtlIHRoZSBza3lib3ggZml0IHRoZSBzdGFnZS5cclxuLy8gICB2YXIgbWF0ZXJpYWwgPSBza3lib3gubWF0ZXJpYWw7XHJcbi8vICAgc2NlbmUucmVtb3ZlKHNreWJveCk7XHJcbi8vXHJcbi8vICAgLy8gU2l6ZSB0aGUgc2t5Ym94IGFjY29yZGluZyB0byB0aGUgc2l6ZSBvZiB0aGUgYWN0dWFsIHN0YWdlLlxyXG4vLyAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShzdGFnZS5zaXplWCwgYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopO1xyXG4vLyAgIHNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbi8vXHJcbi8vICAgLy8gUGxhY2UgaXQgb24gdGhlIGZsb29yLlxyXG4vLyAgIHNreWJveC5wb3NpdGlvbi55ID0gYm94U2l6ZS8yO1xyXG4vLyAgIHNjZW5lLmFkZChza3lib3gpO1xyXG4vL1xyXG4vLyAgIC8vIFBsYWNlIHRoZSBjdWJlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHNjZW5lLCBhdCB1c2VyIGhlaWdodC5cclxuLy8gICBjdWJlLnBvc2l0aW9uLnNldCgwLCBjb250cm9scy51c2VySGVpZ2h0LCAwKTtcclxuLy8gfVxyXG5pbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lLmpzXCJcclxubGV0IGdhbWUgPSBuZXcgR2FtZSgpXHJcblxyXG5jb25zdCBsb29wID0gKCk9PntcclxuICAgIGdhbWUucmVuZGVyKClcclxuICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxyXG59XHJcbmxvb3AoKVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qYXZhc2NyaXB0cy9pbmRleC5qc1xuICoqLyIsImltcG9ydCBQaWVjZSBmcm9tIFwiLi9waWVjZS5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1le1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2FudGlhbGlhczogdHJ1ZX0pXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdGhlIGNhbnZhcyBlbGVtZW50IGNyZWF0ZWQgYnkgdGhlIHJlbmRlcmVyIHRvIGRvY3VtZW50IGJvZHkgZWxlbWVudC5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgdGhyZWUuanMgc2NlbmUuXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHRocmVlLmpzIGNhbWVyYS5cclxuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDApXHJcblxyXG4gICAgICAgIC8vIEFwcGx5IFZSIGhlYWRzZXQgcG9zaXRpb25hbCBkYXRhIHRvIGNhbWVyYS5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gbmV3IFRIUkVFLlZSQ29udHJvbHModGhpcy5jYW1lcmEpXHJcbiAgICAgICAgLy/nq5nnq4vlp7/mgIFcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLnN0YW5kaW5nID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFRIUkVFLlZSRWZmZWN0KHRoaXMucmVuZGVyZXIpXHJcbiAgICAgICAgdGhpcy5lZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBWUiBtYW5hZ2VyIGhlbHBlciB0byBlbnRlciBhbmQgZXhpdCBWUiBtb2RlLlxyXG4gICAgICAgIC8v5oyJ6ZKu5ZKM5YWo5bGP5qih5byP566h55CGXHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgaGlkZUJ1dHRvbjogZmFsc2UsIC8vIERlZmF1bHQ6IGZhbHNlLlxyXG4gICAgICAgICAgICBpc1VuZGlzdG9ydGVkOiBmYWxzZSAvLyBEZWZhdWx0OiBmYWxzZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFdlYlZSTWFuYWdlcih0aGlzLnJlbmRlcmVyLCB0aGlzLmVmZmVjdCwgcGFyYW1zKVxyXG5cclxuICAgICAgICAvL2JpbmQgdGhpc1xyXG4gICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkID0gdGhpcy5vblRleHR1cmVMb2FkZWQuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnNldHVwU3RhZ2UgPSB0aGlzLnNldHVwU3RhZ2UuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMuc2V0U3RhZ2VEaW1lbnNpb25zID0gdGhpcy5zZXRTdGFnZURpbWVuc2lvbnMuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMucGxhY2VQaWVjZXMgPSB0aGlzLnBsYWNlUGllY2VzLmJpbmQodGhpcylcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICAvLyBBZGQgYSByZXBlYXRpbmcgZ3JpZCBhcyBhIHNreWJveC5cclxuICAgICAgICB0aGlzLmJveFNpemUgPSAyMFxyXG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKVxyXG4gICAgICAgIHRoaXMubG9hZGVyLmxvYWQoXCJwdWJsaWMvaW1hZ2VzL2JveC5wbmdcIiwgdGhpcy5vblRleHR1cmVMb2FkZWQpXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSlcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInZyZGlzcGxheXByZXNlbnRjaGFuZ2VcIiwgdGhpcy5vblJlc2l6ZSwgdHJ1ZSlcclxuICAgICAgICB0aGlzLmxhc3RSZW5kZXIgPSAwXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gbnVsbFxyXG4gICAgfVxyXG4gICAgb25UZXh0dXJlTG9hZGVkKHRleHR1cmUpIHtcclxuICAgICAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQodGhpcy5ib3hTaXplLCB0aGlzLmJveFNpemUpXHJcblxyXG4gICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKVxyXG4gICAgICAgIGxldCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIG1hcDogdGV4dHVyZSxcclxuICAgICAgICAgICAgY29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiLFxyXG4gICAgICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAvLyBBbGlnbiB0aGUgc2t5Ym94IHRvIHRoZSBmbG9vciAod2hpY2ggaXMgYXQgeT0wKS5cclxuICAgICAgICB0aGlzLnNreWJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcclxuICAgICAgICB0aGlzLnNreWJveC5wb3NpdGlvbi55ID0gdGhpcy5ib3hTaXplLzJcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNreWJveClcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyLCAxKVxyXG4gICAgICAgIHZhciBwYW5lbCA9IG5ldyBUSFJFRS5NZXNoKHBhbmVsR2VvbWV0cnksbWF0ZXJpYWwpXHJcbiAgICAgICAgcGFuZWwucG9zaXRpb24uc2V0KDAsMi41LC0xLjk5OSlcclxuICAgICAgLy8gQWRkIGN1YmUgbWVzaCB0byB5b3VyIHRocmVlLmpzIHNjZW5lXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQocGFuZWwpXHJcbiAgICAgICAgdGhpcy5wbGFjZVBpZWNlcygpXHJcblxyXG4gICAgICAvLyBGb3IgaGlnaCBlbmQgVlIgZGV2aWNlcyBsaWtlIFZpdmUgYW5kIE9jdWx1cywgdGFrZSBpbnRvIGFjY291bnQgdGhlIHN0YWdlXHJcbiAgICAgIC8vIHBhcmFtZXRlcnMgcHJvdmlkZWQuXHJcbiAgICAgIC8v5Zyo6auY56uv55qE6K6+5aSH5LiK77yM6KaB6ICD6JmR5Yiw6K6+5aSH5o+Q5L6b55qE5Zy65pmv5L+h5oGv55qE5pu05paw44CCXHJcbiAgICAgICAgdGhpcy5zZXR1cFN0YWdlKClcclxuICAgIH1cclxuICAgIHBsYWNlUGllY2VzKCl7XHJcbiAgICAgICAgdGhpcy5pbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZzFcIilcclxuICAgICAgICB0aGlzLmltZ1dpZHRoID0gdGhpcy5pbWcud2lkdGhcclxuICAgICAgICB0aGlzLmltZ0hlaWdodCA9IHRoaXMuaW1nLmhlaWdodFxyXG4gICAgICAgIHRoaXMuY29sdW1uTnVtYmVyID0gNFxyXG4gICAgICAgIHRoaXMucGllY2VXaWR0aCA9IHRoaXMucGllY2VIZWlnaHQgPSB0aGlzLmltZ1dpZHRoL3RoaXMuY29sdW1uTnVtYmVyXHJcbiAgICAgICAgdGhpcy5yb3dOdW1iZXIgPSB0aGlzLmltZ0hlaWdodC90aGlzLnBpZWNlV2lkdGhcclxuXHJcbiAgICAgICAgdmFyIGNhbnZhczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXHJcbiAgICAgICAgdmFyIGNvbnRleHQxID0gY2FudmFzMS5nZXRDb250ZXh0KFwiMmRcIilcclxuICAgICAgICBjb250ZXh0MS5mb250ID0gXCJCb2xkIDQwcHggQXJpYWxcIlxyXG4gICAgICAgIGNvbnRleHQxLmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwwLjk1KVwiXHJcbiAgICAgICAgY29udGV4dDEuZmlsbFRleHQoXCJIZWxsbywgd29ybGQhXCIsIDUwLCA1MClcclxuXHJcbiAgICAgICAgLy8gY2FudmFzIGNvbnRlbnRzIHdpbGwgYmUgdXNlZCBmb3IgYSB0ZXh0dXJlXHJcbiAgICAgICAgdmFyIHRleHR1cmUxID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzMSlcclxuICAgICAgICB0ZXh0dXJlMS5uZWVkc1VwZGF0ZSA9IHRydWVcclxuXHJcbiAgICAgICAgdmFyIG1hdGVyaWFsMSA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge21hcDogdGV4dHVyZTEsIHNpZGU6VEhSRUUuRG91YmxlU2lkZSB9IClcclxuICAgICAgICAvLyBtYXRlcmlhbDEudHJhbnNwYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgIHZhciBtZXNoMSA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMCwgNSksXHJcbiAgICAgICAgICAgIG1hdGVyaWFsMVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIG1lc2gxLnBvc2l0aW9uLnNldCgwLDIsOSlcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCggbWVzaDEgKVxyXG5cclxuICAgICAgICB2YXIgY2FudmFzMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcclxuICAgICAgICB2YXIgY29udGV4dDIgPSBjYW52YXMyLmdldENvbnRleHQoXCIyZFwiKVxyXG4gICAgICAgIC8vIGNhbnZhcyBjb250ZW50cyB3aWxsIGJlIHVzZWQgZm9yIGEgdGV4dHVyZVxyXG4gICAgICAgIHZhciB0ZXh0dXJlMiA9IG5ldyBUSFJFRS5UZXh0dXJlKGNhbnZhczIpXHJcblxyXG4gICAgICAgIC8vIGxvYWQgYW4gaW1hZ2VcclxuICAgICAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgIGltYWdlT2JqLnNyYyA9IHJlcXVpcmUoXCIuLi8uLi9wdWJsaWMvaW1hZ2VzL3B1enpsZXMvY2FydG9vbiAoMSkuanBnXCIpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGlzIGxvYWRlZCwgdGhpcyBmdW5jdGlvbiBleGVjdXRlc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhbnZhczIud2lkdGgsY2FudmFzMi5oZWlnaHQpXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5pbWcuc3JjKVxyXG4gICAgICAgIGxldCB3cyA9IChjYW52YXMyLndpZHRoLzEuNSkvaW1hZ2VPYmoud2lkdGhcclxuICAgICAgICBsZXQgaHMgPSAoY2FudmFzMi5oZWlnaHQvMS41KS9pbWFnZU9iai5oZWlnaHRcclxuICAgICAgICB0aGlzLnNjYWxlID0gTWF0aC5taW4od3MsaHMpXHJcbiAgICAgICAgY29udGV4dDIuc2NhbGUodGhpcy5zY2FsZSx0aGlzLnNjYWxlKVxyXG5cclxuICAgICAgICBpbWFnZU9iai5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb250ZXh0Mi5kcmF3SW1hZ2UoaW1hZ2VPYmosIGltYWdlT2JqLndpZHRoLCBpbWFnZU9iai5oZWlnaHQpXHJcbiAgICAgICAgICAgIGlmICggdGV4dHVyZTIgKSAvLyBjaGVja3MgaWYgdGV4dHVyZSBleGlzdHNcclxuICAgICAgICAgICAgICAgIHRleHR1cmUyLm5lZWRzVXBkYXRlID0gdHJ1ZVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1hdGVyaWFsMiA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge21hcDogdGV4dHVyZTIsIHNpZGU6VEhSRUUuRG91YmxlU2lkZX0gKVxyXG4gICAgICAgIG1hdGVyaWFsMi50cmFuc3BhcmVudCA9IHRydWVcclxuXHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNhbnZhczIud2lkdGgsIGNhbnZhczIuaGVpZ2h0KVxyXG4gICAgICAgIHZhciBtZXNoMiA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyMCwgMjApLFxyXG4gICAgICAgICAgICBtYXRlcmlhbDJcclxuICAgICAgICApXHJcbiAgICAgICAgbWVzaDIucG9zaXRpb24uc2V0KDAsOCwtOS45KVxyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKCBtZXNoMiApXHJcblxyXG4gICAgfVxyXG4gICAgcmVuZGVyKHRpbWVzdGFtcCl7XHJcbiAgICAgICAgLy8gdmFyIGRlbHRhID0gTWF0aC5taW4odGltZXN0YW1wIC0gdGhpcy5sYXN0UmVuZGVyLCA1MDApXHJcbiAgICAgICAgdGhpcy5sYXN0UmVuZGVyID0gdGltZXN0YW1wXHJcblxyXG4gICAgICAgICAgLy/nq4vmlrnkvZPnmoTml4vovaxcclxuICAgICAgICAvLyAgIHRoaXMuY3ViZS5yb3RhdGlvbi55ICs9IGRlbHRhICogMC4wMDA2O1xyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSBWUiBoZWFkc2V0IHBvc2l0aW9uIGFuZCBhcHBseSB0byBjYW1lcmEuXHJcbiAgICAgICAgICAvL+abtOaWsOiOt+WPlkhNROeahOS/oeaBr1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKClcclxuXHJcblxyXG4gICAgICAgICAgLy8gUmVuZGVyIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSBtYW5hZ2VyLlxyXG4gICAgICAgICAgLy/ov5vooYxjYW1lcmHmm7TmlrDlkozlnLrmma/nu5jliLZcclxuICAgICAgICB0aGlzLm1hbmFnZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhLCB0aW1lc3RhbXApXHJcbiAgICAgICAgICAvLyByZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhKVxyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIpXHJcbiAgICB9XHJcbiAgICBvblJlc2l6ZShlKSB7XHJcbiAgICAgICAgdGhpcy5lZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxyXG4gICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXHJcbiAgICB9XHJcbiAgICBzZXRTdGFnZURpbWVuc2lvbnMoc3RhZ2UpIHtcclxuICAgICAgLy8gTWFrZSB0aGUgc2t5Ym94IGZpdCB0aGUgc3RhZ2UuXHJcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gdGhpcy5za3lib3gubWF0ZXJpYWxcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNreWJveClcclxuXHJcbiAgICAgIC8vIFNpemUgdGhlIHNreWJveCBhY2NvcmRpbmcgdG8gdGhlIHNpemUgb2YgdGhlIGFjdHVhbCBzdGFnZS5cclxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc3RhZ2Uuc2l6ZVgsIHRoaXMuYm94U2l6ZSwgc3RhZ2Uuc2l6ZVopXHJcbiAgICAgICAgdGhpcy5za3lib3ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpXHJcblxyXG4gICAgICAvLyBQbGFjZSBpdCBvbiB0aGUgZmxvb3IuXHJcbiAgICAgICAgdGhpcy5za3lib3gucG9zaXRpb24ueSA9IHRoaXMuYm94U2l6ZS8yXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5za3lib3gpXHJcblxyXG4gICAgICAvLyBQbGFjZSB0aGUgY3ViZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY2VuZSwgYXQgdXNlciBoZWlnaHQuXHJcbiAgICAvLyAgIGN1YmUucG9zaXRpb24uc2V0KDAsIGNvbnRyb2xzLnVzZXJIZWlnaHQsIDApO1xyXG4gICAgfVxyXG4gICAgc2V0dXBTdGFnZSgpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpc1xyXG4gICAgICAgIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbihmdW5jdGlvbihkaXNwbGF5cykge1xyXG4gICAgICAgICAgICBpZiAoZGlzcGxheXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5ID0gZGlzcGxheXNbMF1cclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRpc3BsYXkuc3RhZ2VQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRTdGFnZURpbWVuc2lvbnMoc2VsZi5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvamF2YXNjcmlwdHMvZ2FtZS5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpZWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGltZyx4LHksd2lkdGgsaGVpZ2h0LGNhbnZhcyl7XHJcbiAgICAgICAgdGhpcy5pbWcgPSBpbWdcclxuICAgICAgICB0aGlzLnggPSB4XHJcbiAgICAgICAgdGhpcy55ID0geVxyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aFxyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXNcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDQwMFxyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDMwMFxyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxyXG4gICAgfVxyXG4gICAgZHJhdygpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW1nLHRoaXMueCx0aGlzLnksdGhpcy53aWR0aCx0aGlzLmhlaWdodCwwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgIC8vIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWcsdGhpcy54LHRoaXMueSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsMCw0MDAsMzAwKVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2phdmFzY3JpcHRzL3BpZWNlLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3B1enpsZXMvY2FydG9vbiAoMSkuanBnXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3B1YmxpYy9pbWFnZXMvcHV6emxlcy9jYXJ0b29uICgxKS5qcGdcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9